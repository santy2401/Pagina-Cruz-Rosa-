//15.115.0-es2019 2025-08-06T23:49:44.271Z (3b777d04e352d)
var CS_CONF={"collectionEnabled":true,"useSentry":false,"projectId":4451,"status":1,"hostnames":["adobe.com","photoshop.com","marketo.com","qualtrics.com","adobelr.com","dc.stage.acrobat.com","stage.acrobat.adobe.com","video.tv.adobe.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":1,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":20,"validationRate":10,"lastTrackingDraw":1743535516,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":"tt_blade_[a-z0-9]+Marquee","whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":"","replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":"(.*www(.stage)?.adobe.com\\/apps.*)|(.*lightroom./adobe./com.*)","anonymisationMethod":"replayRecordingMaskedUrlRegex","tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":1,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[".modal-payment"]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withNavigation":false,"withResource":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":0,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":0,"apiErrors":{"collectStandardHeaders":0,"collectionRules":[]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.contentsquare.net","malkaRecordingDomain":"k-aus1.contentsquare.net","staticResourceManagerDomain":"srm.bf.contentsquare.net","voc":{"siteId":null,"enabled":0},"implementations":[{"template":{"name":"PiiMasking","args":{"cssSelectors":[".profile-container,.recent-assets-container-app,.welcome-message,.recent-grid-item,.your-work-container,.comment-timeline"],"attributes":[]}},"triggers":[{"name":"PageState","args":{"state":"Any"}}]},{"template":{"name":"PiiMasking","args":{"cssSelectors":["div#collection,video.focus-ring, div#CDOGridItem,.tooltipTriggerWrapper"],"attributes":[]}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural","artificial"]},"condition":{"operator":"AND","args":[{"operator":"contains","args":["${window.location.href}","adobe.com/files"]}]}}]}],"ptcSnapshotPath":"ss/4451/2"};
var CS_INTEGRATIONS_CONF = {"qualtrics":{},"adobe-target":{}};
/* integration-qualtrics 3.2.0 */
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Qualtrics","dvarPrefix":"FB_QT_","apvPrefix":"cs_qualtrics","replayKey":"qt"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-qualtrics-contentsquare","version":"3.2.0","scripts":{"build:snippet":"webpack"}}')},function(e,t,n){"use strict";function i(e,t){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",t,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${t}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function o(e,t){let n=!1;window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(i){t?n||(e(i),n=!0):e(i)}])}function a(e,t){function n(e){return"object"==typeof e&&null!==e}if(n(window.CS_INTEGRATIONS_CONF)&&n(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][t]}function c(e){const t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""}function s(){let e=0,t=document.location.host;const n=t.split("."),i="_cs_tld"+(new Date).getTime();for(;e<n.length-1&&-1==document.cookie.indexOf(i+"="+i);)t=n.slice(-1-++e).join("."),document.cookie=i+"="+i+";domain="+t+";SameSite=None;Secure";return document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",t}function r(e){return e.toString().replace(/[^\w. ]/gi,(function(e){return"&#"+e.charCodeAt(0)+";"}))}function u(e){return Array.isArray(e)}function d(e,t){t||(t="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&=]"+e+t+"([^&#]*)").exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}n.r(t);function l(e,t){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${t}`,"color: #2a9d8f; font-weight: bold")}var f=n(0);const p=function(e){let t,n,o,a;if(i((function(){const i=e.name;t=e.version;const c=i.replace("@contentsquare/integration-","");n=c+"-"+t;let s="-contentsquare";a=new RegExp(s+"$").test(c),o=c.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(s="-cap",a=new RegExp(s+"$").test(c),o=c.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),a)return{snippetBuildName:n,parameterName:o,snippetVersion:t}}(n(1)),g=p.parameterName,_=p.snippetBuildName,S=p.snippetVersion;i((function(){const e=f.displayName,t=f.dvarPrefix,n=f.apvPrefix,p=f.replayKey;var m,w;m=e,w=S,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(m+" - v"+w);let y=!1;window.self!=window.top&&(y=CS_CONF.iframesTracking);const b=a(g,"settings"),h=u(b)?b:[],C=h.includes("sendArtificialPageviews"),D=h.includes("setReplayLinkToCurrentPV");let I=!1;function v(e,n,i,o){(function(e,t){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:t}])})(e=t+function(e){if(e){return((new DOMParser).parseFromString(e,"text/html").body.textContent||"").trim()}return""}(e),n),I&&"etr"===i&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackEventTriggerRecording","@ETS@"+e])}(e),o&&C&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+o),l(_,`Dynamic variable with ${e} and value ${n} sent`)}function T(){const e={contentsquare_integration:c("_cs_s"),vendor:"qualtrics"};window.opener?window.opener.postMessage(e,"*"):window.self!=window.top&&window.top.postMessage(e,"*")}if(window.Qualtrics&&Qualtrics.SurveyEngine&&"function"==typeof Qualtrics.SurveyEngine.addOnPageSubmit){if(!y){let e;if(window._cs_integration_qualtrics_postmessage_csid||window.ClickTaleSettings&&ClickTaleSettings.PTC&&ClickTaleSettings.PTC.IntegrationHandler&&ClickTaleSettings.PTC.IntegrationHandler.UserValues)window._cs_integration_qualtrics_postmessage_csid?e=_cs_integration_qualtrics_postmessage_csid:ClickTaleSettings.PTC.IntegrationHandler.UserValues&&(e=ClickTaleSettings.PTC.IntegrationHandler.UserValues);else{const t=document.location.search;t.indexOf("CSID=")>-1?e=d("CSID"):CS_CONF.ptcDomain&&t.indexOf("CT_UID=")>-1?e=d("CT_UID"):window._cs_integration_qualtrics_csid&&(e=decodeURIComponent(_cs_integration_qualtrics_csid))}if(e&&"null"!=e){const t=e.split("~"),n=t[0],i=t[1],o=t[2],a=t[3],c=s();n&&i&&o&&(a?document.cookie="_cs_optout="+a+";domain="+c+";path=/;SameSite=None;Secure":(document.cookie="_cs_optout=;domain="+c+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;domain=."+document.location.host+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure"),document.cookie="_cs_id="+n+";domain="+c+";path=/;SameSite=None;Secure",document.cookie="_cs_s="+i+";domain="+c+";path=/;SameSite=None;Secure",document.cookie="_cs_c="+o+";domain="+c+";path=/;SameSite=None;Secure")}}let e;function x(){if(!y){let e=c("_cs_s");if(e&&e.indexOf(".T.")>-1){const t=setInterval((function(){i((function(){e=c("_cs_s"),e&&-1===e.indexOf(".T.")&&(clearInterval(t),T())}),_)}),500)}else T()}}window.Page?e=!1:window.q&&(e=!0),setTimeout((function(){(function(e,t,n,i){return new Promise((function(o,a){function c(){window._uxa.push(["replay:link:generate",{withTimestamp:n},s])}function s(i){if(i&&i.replayLink&&i.isRecording){let a="https://"+i.replayLink+"&vd="+e;if(!t&&!n){const e=new URLSearchParams(a);e.set("pvid",1);const t=e.toString();a=decodeURIComponent(t)}o(a)}}e||(e="missingFromDynamicSnippet"),n||(n=!1),i?c():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&c()}]))}))})(p,D,!1,y).then((function(t){i((function(){if(I=!0,t&&Qualtrics.SurveyEngine){const n=Qualtrics.SurveyEngine;let i;CS_CONF.ptcDomain&&(i="ClicktaleSpecificRecording",!0===e&&"function"==typeof n.setJSEmbeddedData?n.setJSEmbeddedData(i,t):!1===e&&"function"==typeof n.setEmbeddedData&&n.setEmbeddedData(i,t)),i="ContentsquareReplayLink",!0===e&&"function"==typeof n.setJSEmbeddedData?n.setJSEmbeddedData(i,t):!1===e&&"function"==typeof n.setEmbeddedData&&n.setEmbeddedData(i,t)}}),_)}))}),500);if(o(x,!1),window.addEventListener("Contentsquare_QT_Integration_Dispatcher",(function(e){i((function(){if(e&&"object"==typeof e.detail&&"string"==typeof e.detail.key&&"string"==typeof e.detail.value){let t=e.detail.key;const n=e.detail.value;"FB_QT_"===t.slice(0,6)&&(t=t.slice(6)),v(t,n)}}),_)})),!1===e&&"function"==typeof Page.getSessionId&&Page.runtime&&Page.runtime.ED&&Page.runtime.ED.SurveyID&&Page._questionRenderers&&Qualtrics.SurveyEngine.QuestionInfo){const e=Page.runtime.ED.SurveyID,t=Page.getSessionId().replace("FS_","R_");v("Feedback Displayed","Survey ID : "+e);let o=!1,a=!1,c=!1;const s=[];function k(){const e=Qualtrics.SurveyEngine.QuestionInfo,t=Object.keys(e);if(u(t))for(let e=0;e<t.length;e++){const n=Qualtrics.SurveyEngine.QuestionInfo[t[e]].Selector;if(n&&"TB"!=n){a=!0;break}}}function O(){i((function(){k(),o||(o=!0,v("Feedback Accepted","Survey ID : "+e,0,n+"=feedback_accepted_"+e)),setTimeout((function(){i((function(){a&&!c&&!1===Page.runtime.FailedValidation&&(c=!0,v("Feedback Submitted","Survey ID : "+e,"etr",n+"=feedback_submitted_"+e),v("Feedback Response ID",t))}),_)}),2e3);const r=Page._questionRenderers,d=Object.keys(r);if(u(d))for(let t=0;t<d.length;t++){const n=r[d[t]].runtime;if(n&&n.Selector&&n.QuestionText&&n.Displayed){const i=n.QuestionText;if("NPS"===n.Selector&&n.Selected){const o=parseInt(n.Selected);s.includes(d[t]+"~~~"+o)||(s.push(d[t]+"~~~"+o),v("NPS Rating - "+d[t]+" - "+e+" - "+i,o),v("NPS Rating - "+d[t]+" - "+e,o))}if("STAR"===n.Selector){const i=n.Choices,o=Object.keys(i);if(u(o))for(let n=0;n<o.length;n++){const a=i[o[n]].Display;if(i[o[n]].Value){const c=parseInt(i[o[n]].Value);s.includes(d[t]+" ("+(n+1)+")~~~"+c)||(s.push(d[t]+" ("+(n+1)+")~~~"+c),v("Star Rating - "+d[t]+" ("+(n+1)+") - "+e+" - "+a,c),v("Star Rating - "+d[t]+" ("+(n+1)+") - "+e,c))}}}if("SAVR"===n.Selector||"SAHR"===n.Selector){const i=n.Selected;if(i&&n.Choices){const o=n.Choices[i].ID;o&&(s.includes(d[t]+"~~~AID"+o)||(s.push(d[t]+"~~~AID"+o),v(d[t]+" - "+e,"AID"+o)))}}if("MAVR"===n.Selector&&n.Choices){const i=n.Choices,o=Object.keys(i);if(u(o))for(let n=0;n<o.length;n++)if(i[o[n]].Selected){const a=i[o[n]].ID;a&&(s.includes(d[t]+"~~~AID"+a)||(s.push(d[t]+"~~~AID"+a),v(d[t]+" - "+e,"AID"+a)))}}if("Likert"===n.Selector&&n.Choices){const i=n.Choices,o=Object.keys(i);if(u(o))for(let n=0;n<o.length;n++){const a=i[o[n]].Selected;if(a&&!s.includes(d[t]+"~~~"+a)){const c=i[o[n]].ID;c&&(s.push(d[t]+"~~~"+a),v(d[t]+" - "+e+" - AID"+c,a))}}}}}setTimeout((function(){document.getElementById("NextButton")||v("Feedback Completed","Survey ID : "+e,0,n+"=feedback_completed_"+e)}),2e3),Qualtrics.SurveyEngine.addOnPageSubmit(O)}),_)}k(),Qualtrics.SurveyEngine.addOnPageSubmit(O)}else if(!0===e&&window.q.init&&window.q.init.appData&&window.q.init.appData.setup&&window.q.init.appData.setup.survey&&window.q.init.appData.setup.survey.id&&window.q.init.appData.session&&window.q.init.appData.session.id){const e=window.q.init.appData.setup.survey.id,t=window.q.init.appData.session.id.replace("FS_","R_");v("Feedback Displayed","Survey ID : "+e);let o=!1;function O(){i((function(){o||(o=!0,v("Feedback Submitted","Survey ID : "+e,"etr",n+"=feedback_submitted_"+e),v("Feedback Response ID",t)),setTimeout((function(){i((function(){document.getElementById("next-button")||v("Feedback Completed","Survey ID : "+e,0,n+"=feedback_completed_"+e)}),_)}),2e3),Qualtrics.SurveyEngine.addOnPageSubmit(O)}),_)}Qualtrics.SurveyEngine.addOnPageSubmit(O)}}else if(!y){function N(){const t=c("_cs_id"),n=c("_cs_c"),i=c("_cs_optout");return t+"~"+e+"~"+n+"~"+i}let e;function x(){function t(){const e=N();localStorage.setItem("CSID",e),CS_CONF.ptcDomain&&(localStorage.setItem("CT_UID",e),sessionStorage.setItem("CT_UID",e)),sessionStorage.setItem("CSID",e)}if(e=c("_cs_s"),e&&e.indexOf(".T.")>-1){const n=setInterval((function(){i((function(){e=c("_cs_s"),e&&-1===e.indexOf(".T.")&&(clearInterval(n),t())}),_)}),500)}else t()}window.addEventListener("message",(function(e){const t=e.data;t&&(t.contentsquare_integration&&"qualtrics"===t.vendor&&i((function(){const e=t.contentsquare_integration,n=e.split("."),i=Number(n[n.length-1]),o=new Date(i).toUTCString();if(window.CS_CONF&&CS_CONF.allowSubdomains){const t=s();document.cookie="_cs_s="+r(e)+";expires="+o+";domain="+t+";path=/"}else document.cookie="_cs_s="+r(e)+";expires="+o+";path=/";x()}),_),t.message&&"Contentsquare_QT_Integration_Ready"===t.message&&i((function(){const t={message:"Contentsquare_QT_Integration_Launch",user_values:N()};e.source.postMessage(t,"*")}),_))}));o(x,!1)}}),_)}]);
/* integration-adobe-target 3.8.1 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e,n,t){if((t=t||window)&&n&&e){let o=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,o||(o=!0,n())}})}}const t=JSON.parse('{"Q":"Adobe Target","M":"AB_AT_"}'),o=function(n){let t,o,i,c;if(e(function(){const e=n.name;t=n.version;const a=e.replace("@contentsquare/integration-","");o=a+"-"+t;let r="-contentsquare";c=new RegExp(r+"$").test(a),i=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),c||(r="-cap",c=new RegExp(r+"$").test(a),i=a.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),c)return{snippetBuildName:o,parameterName:i,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-adobe-target-contentsquare","version":"3.8.1","scripts":{"build:snippet":"npx webpack"}}')),i=o.parameterName,c=o.snippetBuildName,a=o.snippetVersion;e(function(){const o=t.Q,r=t.M;var u,s;u=o,s=a,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(u+" - v"+s);const l=function(e){function n(e){return"object"==typeof e&&null!==e}if(n(window.CS_INTEGRATIONS_CONF)&&n(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e].customObjectName}(i),d=l?l.trim():"ttMETA";function p(e,n){var t,o;(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=r+e,n),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(c,(t=e,o=n,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=t,document.getElementById("csValue").textContent=o),`Dynamic variable with ${t} and value ${o} sent`))}const g=[];function f(e){if(e&&function(e){return Array.isArray(e)}(e))for(const n of e){let e,t;n.CampaignName&&n.RecipeName?(e=n.CampaignName,t=n.RecipeName):n.campaign&&n.experience?(e=n.campaign,t=n.experience):n["activity.name"]&&n["experience.name"]&&(e=n["activity.name"],t=n["experience.name"]),g.length&&g.includes(e+"~~~~"+t)&&(e="",t=""),e&&t&&(g.push(e+"~~~~"+t),p(e,t))}}document.addEventListener("at-request-succeeded",function(n){e(function(){n&&n.detail&&n.detail.responseTokens&&f(n.detail.responseTokens)},c)}),function(e,t,o){o=o||window;const i=e.split(".");if(1==i.length)n(e,t,o);else{let e=o,c=0;const a=function(){e=c>0?e[i[c-1]]:window,c++,c>=i.length?n(i[c-1],t,e):n(i[c-1],a,e)};a()}}(d,function(){setTimeout(function(){e(function(){f(window[d])},c)},500)})},c)})();
(()=>{var tp=Object.defineProperty;var ep=(s,n,t)=>n in s?tp(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t;var Pe=(s,n,t)=>ep(s,typeof n!="symbol"?n+"":n,t);var _e={};_e.d=(s,n)=>{for(var t in n)_e.o(n,t)&&!_e.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:n[t]})};_e.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();_e.o=(s,n)=>Object.prototype.hasOwnProperty.call(s,n);_e.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var Zr={};_e.r(Zr);_e.d(Zr,{getRequestParameters:()=>fE});function cs(s,n){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(n)]),t||(t=s[n]),t}var Ii=typeof window=="undefined";function sp(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof _e.g!="undefined"?_e.g:typeof process!="undefined"?process:Function("return this")()}var ht=sp();var Cc="cs-native-frame",Je={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};window.csSetTimeout=cs(window,"setTimeout");window.csQueueMicrotask=cs(window,"queueMicrotask");window.csClearTimeout=cs(window,"clearTimeout");window.csSetInterval=cs(window,"setInterval");window.csClearInterval=cs(window,"clearInterval");window.csFileReader=cs(window,"FileReader");(()=>{var s;let n=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++n}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function ip(){let s=document.createElement("iframe");s.id=Cc,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),!!Element.prototype.attachShadow){let e=n.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return n.innerHTML=s.outerHTML,n.firstElementChild.contentWindow}function np(s,n){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,n));)e=Object.getPrototypeOf(e);return t}function rp(s,n,t){let e=np(s,n);if(!e)return function(){return this[n]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function Ic(s){var n,t;Object.keys(Je.constructors).forEach(e=>{window[Je.constructors[e]]=s[e]instanceof Function&&s[e].prototype==null?s[e].bind(window):s[e]}),cp(s),("Prototype"in window||ap())&&(window.csMutationObserver=(t=(n=cs(window,"MutationObserver"))!==null&&n!==void 0?n:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),ks("csNode",Je.nodeProperties,s.Node.prototype,"get"),ks("csElement",Je.elementProperties,s.Element.prototype,"get"),ks("csElement",Je.elementPropertiesValues,s.Element.prototype,"value",!1),ks("csHTMLImageElement",Je.imageProperties,s.HTMLImageElement.prototype,"set"),ks("csEvent",Je.eventProperties,s.Event.prototype,"get"),ks("csNavigator",Je.navigatorProperties,s.navigator,"value")}function ks(s,n,t,e,i=!0){n.forEach(r=>{let o=typeof r!="string"&&"binding"in r,c=o?r.propertyName:r;(i||c in t)&&(window[`${s+c}`]=rp(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(r.binding)))})}function Pc(s,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=n}function op(){try{let s=ip();return s?(window.CSPureWindow=s,Ic(window.CSPureWindow),!0):!1}catch(s){return Pc("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!op())try{Ic(ht)}catch(s){Pc("Critical",`failed to copy references from window: ${s.message}`)}function ap(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function cp(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}var ut=(()=>{let s;return function(n){n.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}n.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}n.stringReplaceAll=i;function r(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}n.truncate=r}(s||(s={})),s})();function Ar(s){return ut.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function lp(s){let n=s.getAttribute("id");return n&&ut.escapeInvalidCharacters(n)}function Ot(s){return K(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function Le(s){return s===parseInt(s,10)}function T(s){return K(s)&&(typeof s=="string"||s instanceof csString)}function Tr(s){return typeof s=="boolean"}function te(s){return typeof s=="object"}function K(s){return typeof s!="undefined"}function yt(s){return K(s)&&s!==null}function J(s){return typeof s=="object"&&s!==null}function hp(s,n,t){return Le(s)&&s>=n&&s<=t}function up(s){for(let n in s)return!1;return!0}function Yt(s){return typeof s=="function"}function xe(s){return s instanceof Element}function as(s){return s instanceof Error}function dp(s){let n=s.length;for(let t=0;t<n;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}function gt(s){return s.nodeType===1}function hn(s){return s.nodeType===3}function pp(s){return s.nodeType===8}function Oc(s){return gt(s)&&s.localName==="link"}function fp(s){return gt(s)&&s.localName==="source"}function Nc(s){return gt(s)&&s.localName==="a"}function to(s){return Oc(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function gp(s){return gt(s)&&s.localName==="img"}function Tn(s){return gt(s)&&s.localName==="style"}function Rn(s){return gt(s)&&s.localName==="input"}function eo(s){return gt(s)&&s.localName==="textarea"}function Cn(s){return gt(s)&&s.localName==="script"}function mp(s){return gt(s)&&s.localName==="button"}function Ks(s){return gt(s)&&"ownerSVGElement"in s}function so(s){return gt(s)&&s.localName==="select"}function yp(s){return gt(s)&&s.localName==="details"}function Ep(s){return gt(s)&&s.localName==="summary"}function Sp(s){return Ks(s)&&s.localName==="image"}function vp(s){return Ks(s)&&s.localName==="use"}function _p(s){return Ks(s)&&s.localName==="feImage"}function wp(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function bp(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function un(s){return s.nodeType===9}function Bs(s){return wp(s)&&"host"in s&&"mode"in s}function Mc(s){return gt(s)&&!!csElementshadowRoot.apply(s)&&Bs(csElementshadowRoot.apply(s))}var Ap=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function Tp(s){return gt(s)&&yt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(Ap,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var Pi="detached";function kc(s){let n=s,t=[n];for(;csNodeparentNode.apply(n)!==null;)n=csNodeparentNode.apply(n),csArray.prototype.push.call(t,n);return dn(n)&&csArray.prototype.push.call(t,Pi),{ancestors:t,selectionRoot:n}}function Rp(s){let n=s,t=[n],e=null;for(;csNodeparentNode.apply(n)!==null;)e===null&&Nc(n)&&(e=n),csArray.prototype.push.call(t,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return dn(n)&&csArray.prototype.push.call(t,Pi),{firstAnchorParent:e,ancestors:t,selectionRoot:n}}function dn(s){return we.isValidElement(s)}var vs=(()=>{var s,n;return(n=(s=ht.Element)===null||s===void 0?void 0:s.prototype)!==null&&n!==void 0?n:{}})(),Xt=vs.matches||vs.matchesSelector||vs.mozMatchesSelector||vs.msMatchesSelector||vs.oMatchesSelector||vs.webkitMatchesSelector,ca=vs.closest,Dc=9;function Cp(s,n){return n?csArray.prototype.some.call(n,t=>Xt.call(s,t)):!1}function Ip(s,n,t){if(s===Pi||s.nodeType===Dc)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(n.localName)),r=Ar(n),o=0,c=n.previousElementSibling;for(;c;)(Ar(c)===r||i&&(e!=null&&e.test(c.localName)))&&!Cp(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function Pp(s,n,t){if(s===Pi||s.nodeType===Dc)return 0;let e=0,i=n.previousElementSibling;for(;i;)Xt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var Op=[/\d{4}/,/^ember\d+$/],Np="@",io="data-cs-override-id",Mp="data-cs-dynamic-id";function Lc(s,n,t,e){let i=e.dynamicIdRegex||null,r=e.dynamicElementNameRegex,o=Ar(s);if(r&&r.test(s.localName)&&(o=csString.prototype.replace.call(o,r,`$1${Np}`)),Lp(s,t)){let m=no(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${io}="${m}"]`}}let c=Fp(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=kp(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=lp(s);if(Up(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let p=Dp(s,e);if(p){let m=Pp(n,s,p);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${p}](${m})`}}let u=Ip(n,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${u})`}}function kp(s,n,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Xt.call(s,e)&&Bp(e,n))return e}}function Dp(s,n){if(n.reliableSelectors){for(let t of n.reliableSelectors)if(Xt.call(s,t))return t}}function Lp(s,n){let t=no(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&ro(io,t,n)}function xp(s){return no(s)!==null}function no(s){return s.getAttribute(io)}function Up(s,n,t,e){return n&&!xp(s)&&!Vp(s,n,e)&&Hp(n,t)}function Vp(s,n,t){return s.hasAttribute(Mp)||jp(n,t)}function jp(s,n){let t=!1;return s&&n&&(t=n.test(s)),s&&(csArray.prototype.some.call(Op,e=>e.test(s))||t)}function Hp(s,n){return s&&ro("id",s,n)}function ro(s,n,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${n}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function Bp(s,n){try{return window.csquerySelectorAll[n.nodeType].call(n,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function Fp(s,n,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&ro(e,i,n))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var Rr=11;function pn(s,n,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return la(e,t);let i=e,r=s[0],{elementSelector:o,hasUniqueIdentifier:c}=Lc(i,r,n,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${la(h,t)}${o}`}let l=pn(s,n,t);return`${l?`${l}>`:""}${o}`}function la(s,n){if(s===Pi)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=kc(s.host);return`${pn(t,e,n)}|shadow-root|`}return s.nodeType===Rr?"|fragment|":""}var xc=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),zp=(()=>{class s extends xc{constructor(){super(...arguments),this.lo=!1,this.ho=!1,this.Za=!1}zm(t,e){return this.lo&&!(e===null&&dn(t))&&t.nodeType!==Rr&&!t.host}$m(t){return!t.localName}serializeElement(t,e,i){var r;if((r=this.path)!==null&&r!==void 0||(this.path=""),this.zm(t,e))return;let o=!1;e===null&&dn(t)&&(o=!0,this.done=!0);let c=this.ho&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.Za=!0,this.lo=!1,this.ho=!1),!l&&e===null&&t.nodeType===Rr){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.$m(t))return;let h=e!=null?e:"detached",{elementSelector:p,hasUniqueIdentifier:u}=Lc(t,h,i,this.options);u&&(this.ho=!0,this.lo=!this.options.fullPath);let m=`${o?`|detached|${c}`:""}${this.lo&&!u?"":p}`,S=!u&&this.ho&&!this.options.fullPath?"":this.path&&!this.Za?">":"";this.Za=!1,this.path=`${m}${S}${this.path}`}}return s})();function qt(s,n=jt.SHOW_ALL){let t=n|jt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=ha(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let r=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(r){let h=r;return r=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=ha(c);if(n&jt.SHOW_DOCUMENT_FRAGMENT&&l&&(r=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(er[c.nodeType]&n)!==0)return c}return null},visitAll(o){er[s.nodeType]&n&&o(s);let c=this.nextNode();for(;c;){if((er[c.nodeType]&n)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function ha(s){return s&&Mc(s)?s.shadowRoot:null}var tr=(()=>{var s;return(s=ht.Node)!==null&&s!==void 0?s:{}})(),jt=(()=>{var s;return(s=ht.NodeFilter)!==null&&s!==void 0?s:{}})(),er={2:jt.SHOW_ATTRIBUTE,4:jt.SHOW_CDATA_SECTION,8:jt.SHOW_COMMENT,11:jt.SHOW_DOCUMENT_FRAGMENT,9:jt.SHOW_DOCUMENT,10:jt.SHOW_DOCUMENT_TYPE,1:jt.SHOW_ELEMENT,[tr.ENTITY_NODE]:jt.SHOW_ENTITY,[tr.ENTITY_REFERENCE_NODE]:jt.SHOW_ENTITY_REFERENCE,[tr.NOTATION_NODE]:jt.SHOW_NOTATION,7:jt.SHOW_PROCESSING_INSTRUCTION,3:jt.SHOW_TEXT},mt={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function $p(s){mt=s}var O=s=>(n,t,e)=>{let i=(t==null?void 0:t.toString())||"",r=s||`${n.constructor&&n.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return Ue(r,o.bind(this))(...c)}}};function Ue(s,n){return function(...t){try{let e=n.apply(this,t);return K(window.Promise)&&e instanceof window.Promise?e.then(i=>i,i=>mt.error(as(i)?i:new Error(i),s)):e}catch(e){try{mt.error(as(e)?e:new Error(e),s)}catch{}}}}var Js=(()=>{class s{constructor(){this.uo=0}get length(){return this.uo}get isEmpty(){return!this.Os}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.uo++,this.jn?this.jn=this.jn[1]=[t,void 0]:this.jn=this.Os=[t,void 0]}pop(){if(!this.Os)return null;this.uo--;let t=this.Os[0];return this.Os=this.Os[1],this.Os||(this.jn=void 0),t}forEach(t){let e=this.Os;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.uo=0,this.Os=this.jn=void 0}}return s})(),Uc=50,Vc=.1;function Gp(){var s;if(!(!((s=window.performance)===null||s===void 0)&&s.mark))return!1;let n="isPerformanceMeasureSupported",t=`${n}_a`;return performance.mark(t),performance.measure(n,t)!==void 0}var fn=!1,nn=new Js;function qp(s=50,n=.1){fn=mt.isPerfLoggingActive()&&Gp(),fn&&(Uc=s,Vc=n)}var Cr=[],sr=[];function jc(s){csArray.prototype.push.call(Cr,s),performance.mark(`${s}-start`)}function Hc(s){let n=performance.measure(s,`${s}-start`);if(!n)return;let t=n.duration;t>=Vc&&csArray.prototype.push.call(sr,{mName:s,mDuration:+t.toFixed(2)}),csArray.prototype.pop.call(Cr),Cr.length===0&&(t>Uc&&nn.push(sr),sr=[])}function Ts(s,n){return function(...t){if(!fn)return s.apply(this,t);jc(n);let e=s.apply(this,t);return Hc(n),e}}var Mt=function(s){return function(n,t,e){let i=e.value;e.value=function(){if(!fn)return e.value=i,i.apply(this,arguments);jc(s);let r=i.apply(this,arguments);return Hc(s),r}}};var ws=(()=>{let s;return function(n){function t(){return!!Element.prototype.attachShadow}n.isSupported=t;function e(r){return r&&Mc(r)?r.shadowRoot:null}n.getShadowRoot=e;function i(r){return qt(r,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}n.getAllShadowHosts=Ts(i,"getAllShadowHosts")}(s||(s={})),s})(),Ct=(()=>{let s;return function(n){function t(){let u=[i()];return document.documentElement&&csArray.prototype.push.call(u,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(u,document.body.scrollHeight,document.body.offsetHeight),Math.max(...u)}n.documentHeight=t;function e(){return document.documentElement.scrollWidth}n.documentWidth=e;function i(){return window.innerHeight}n.windowHeight=i;function r(){return window.innerWidth}n.windowWidth=r;function o(){let u=window.csScreen.width;return Le(u)&&u>0?u:window.screen.width}n.screenWidth=o;function c(){let u=window.csScreen.height;return Le(u)&&u>0?u:window.screen.height}n.screenHeight=c;function l(){return window.pageXOffset}n.windowOffsetX=l;function h(){return window.pageYOffset}n.windowOffsetY=h;function p(){return{dw:`${e()}`,dh:`${t()}`,ww:`${r()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}n.getRequestParameters=p}(s||(s={})),s})();function Fs(s){var n;let t=(n=s.length)!==null&&n!==void 0?n:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function he(s,n){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=n(s[i]);return e}function Wp(s,n,t){let e=[],i=0;for(let r=0;r<s.length;r+=1){let o=n(s[r]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function oo(s,n){let t=[];return Wp(s,n,e=>csArray.prototype.push.call(t,e)),t}function W(s,n){if(Yp(s)){let t=s.length;for(let e=0;e<t;e++)n(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)n(e.value,t++),e=s.next()}}function Yp(s){return s.length>=0}function ve(s,n){let t=s.length;for(let e=0;e<t;e++)if(n(s[e],e))return s[e]}function gn(s,n){let t=s.length;for(let e=0;e<t;e++)if(n(s[e],e))return!0;return!1}function ao(s,n){let t=s.length;for(let e=0;e<t;e++)if(!n(s[e],e))return!1;return!0}function Ai(s,n){let t=s.length,e=[];for(let i=0;i<t;i+=1){let r=s[i];n(r)&&csArray.prototype.push.call(e,r)}return e}function Xp(s,n,t){let e=s.length+n.length+((t==null?void 0:t.length)||0),i=new csArray(e),r=0;for(let o=0;o<s.length;o++)i[r++]=s[o];for(let o=0;o<n.length;o++)i[r++]=n[o];if(!t)return i;for(let o=0;o<t.length;o++)i[r++]=t[o];return i}function ua(s,n){for(let t=0;t<s.length;t++)csArray.prototype.push.call(n,s[t])}function ls(s){let n=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,n?[i,e]:e)),t}var ir=(()=>{var s;return(s=ht.Node)!==null&&s!==void 0?s:Object})(),at=(()=>{let s;return function(n){let t="isConnected"in ir.prototype?_=>_.isConnected:_=>!_.ownerDocument||!(_.ownerDocument.compareDocumentPosition(_)&_.DOCUMENT_POSITION_DISCONNECTED);function e(_,x){for(let j=_;j;j=csNodenextSibling.apply(j))x(_)}n.forEachChild=e;function i(_){return t(_)}n.isConnected=i;function r(_,x){let j=[];for(let z of l(_,x))csArray.prototype.push.call(j,z);return j}n.getAncestors=r;let o=(_,x)=>{var j;return(j=csNodeparentNode.apply(_))!==null&&j!==void 0?j:x&&Bs(_)?_.host:null};function c(_,x,j=!1){let z=_;for(;z;){if(x(z))return z;let it=o(z,j);if(it&&it!==z)z=it;else break}return null}n.findAncestor=c;function*l(_,x=!1){let j=_;for(;j;){yield j;let z=o(j,x);if(z&&z!==j)j=z;else break}}n.walkUp=l;function h(_,x){if(_===x||x.contains(_))return!0;let j=n.getParentElement(_);return j&&j!==_?h(j,x):!1}n.isDescendantOf=h;function p(_){var x;return _.parentElement?_.parentElement:n.getRootNode(_)?(x=n.getRootNode(_))===null||x===void 0?void 0:x.host:null}n.getParentElement=p;function u(_,x=document){let j=Fs(window.csquerySelectorAll[x.nodeType].call(x,_)),z=ws.getAllShadowHosts(x);for(let it of z){let St=ws.getShadowRoot(it);if(!St)continue;let xt=Fs(window.csquerySelectorAll[St.nodeType].call(St,_));csArray.prototype.push.call(j,...xt)}return j}n.findAllElements=u,n.getRootNode=(()=>{if("getRootNode"in ir.prototype)return(j,z)=>j.getRootNode(z);function _(j){let z=x(j);return Bs(z)?_(z.host):z}function x(j){return csNodeparentNode.apply(j)!=null?x(csNodeparentNode.apply(j)):j}return(j,z)=>typeof z=="object"&&!!z.composed?_(j):x(j)})();function m(_){return _==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(_)}function y(_){let x=_.getBoundingClientRect();return x.right+Ct.windowOffsetX()<0||x.bottom+Ct.windowOffsetY()<0}function S(_){var x,j;if(((x=_.checkVisibility)===null||x===void 0?void 0:x.call(_,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!_.offsetParent){if(!_.getBoundingClientRect)return mt.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${_ instanceof ir} Ctor: ${(j=_==null?void 0:_.constructor)===null||j===void 0?void 0:j.name}`),!1;let St=_.getBoundingClientRect();if(St.width==0&&St.height==0)return!0}let z=window.getComputedStyle(_);return z?z.display==="none"||z.visibility==="hidden"||z.visibility==="collapse"||z.opacity==="0"||z.filter==="opacity(0)"||z.width==="0px"&&z.height==="0px"||m(z.color):!0}n.isHiddenByCSS=S;function C(_){if(S(_))return!0;let j=p(_);return j!=null&&C(j)}n.areAncestorsHiddenByCSS=C;function M(_){let x=null,j=_;do if(S(j))x=j;else break;while(j=p(j));return x}n.getTopAncestorHiddenByCSS=M;function b(_){let x=v(_);return x!==null&&!_.contains(x)&&!x.contains(_)}function v(_){let x=_.getBoundingClientRect(),j=x.left+.5*x.width,z=x.top+.5*x.height;return I(document,j,z)}n.getTopElement=v;function k(_){if(!_.getBoundingClientRect)return null;let x=_.getBoundingClientRect(),j=x.x+x.width/2,z=x.y+x.height/2;return n.getTopElementFromPoint(document,j,z)}n.getElementOnTop=k;function I(_,x,j){let z=_.elementFromPoint(x,j);if(!z)return null;let it=ws.getShadowRoot(z);return it&&it!=n.getRootNode(document.body)&&it!==_?I(it,x,j):z}n.getTopElementFromPoint=I;function R(_){return!y(_)&&!S(_)&&!b(_)}n.isVisibleInDocument=R;function F(_){return S(_)?!1:G(_)}n.isVisibleInViewportInForeground=F;function G(_){let x=v(_);return x===null?!1:_===x?!0:vt(_)?_.textContent!==""&&x.contains(_):_.contains(x)}n.isInViewPort=G;function rt(_,x,j){let z=_.getAttributeNS(x,j);return z===""?_.hasAttributeNS(x,j)?z:null:z}n.getAttributeNS=rt;function At(_){return!!(_.hasAttribute("tabIndex")||_.getAttribute("contentEditable")==="true"||Nc(_)&&_.hasAttribute("href")||(so(_)||eo(_)||Rn(_)||mp(_))&&!_.hasAttribute("disabled")||yp(_)||Ep(_))}n.isElementFocusable=At;function vt(_){return _.localName==="span"||_.localName==="a"||_.localName==="b"||_.localName==="i"||_.localName==="button"||_.localName==="input"||_.localName==="label"||_.localName==="cite"||_.localName==="small"||_.localName==="strong"||_.localName==="code"||_.localName==="abbr"||_.localName==="em"||_.localName==="dfn"||_.localName==="time"||_.localName==="output"||_.localName==="object"||_.localName==="sub"}n.isInlineElement=vt}(s||(s={})),s})(),Kp=(()=>{class s{constructor(t){this.Gm=t}run(t){let e=[...this.Gm],i=at.getAncestors(t,!1),r=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.qm(e,o,c,r),this.Wm(e),e.length===0)break;i.length===0&&o.host&&(i=at.getAncestors(o.host,!1),r=i[i.length-1])}}qm(t,e,i,r){for(let o of t)o.serializeElement(e,i,r)}Wm(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),Jp=(()=>{class s extends xc{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.Ym(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}Ym(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.Xm(t.id),t.classList&&(e+=this.Km(csArray.from(t.classList))),t.attributes&&(e+=this.Jm(t)),e}Xm(t){return t?`#${t};`:""}Km(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}Qm(t,e){var i,r;return((r=(i=this.options).isAttributeSensitive)===null||r===void 0?void 0:r.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||Ks(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Rn(t)&&e==="value"}Zm(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}ty(t){let e={};for(let i of csArray.from(t.attributes))this.Qm(t,i.name)||(e[i.name]=i.value);return e}Jm(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let r=Object.entries(this.ty(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(r,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.Zm(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(r.length>0?";":"")}}return s})(),we=(()=>{let s;return function(n){n.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}n.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let p=o(c);if(p===document)return{path:"",hierarchy:""};if(!t(p))return{path:n.INVALID_ELEMENT,hierarchy:n.INVALID_ELEMENT};let u=new zp(h),m=new Jp(l);return new Kp([u,m]).run(p),{path:u.getPath(),hierarchy:m.getPath()}}n.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return n.INVALID_ELEMENT;let{ancestors:p,selectionRoot:u}=kc(h);return pn(p,u,l)}n.getElementPath=i;function r(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:n.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:p,ancestors:u,selectionRoot:m}=Rp(h);return{path:pn(u,m,l),firstAnchorParent:p}}n.getElementPathAndFirstAnchorParent=r;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||we;var Qp=Number.MAX_SAFE_INTEGER||9007199254740991;function mn(){}function Ve(s,n){return csString.prototype.lastIndexOf.call(s,n,0)===0}function Bc(s,n){return csString.prototype.indexOf.call(s,n,s.length-n.length)!==-1}var co=34164e6,Ae={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=Qp){return Math.floor(Math.random()*s)}},nr=csSymbol("cachedJson");function Zp(s){if(s[nr])return s[nr];if(csArray.isArray(s)){if(s.length===0)return"[]";let n="["+zs(s[0]);for(let t=1;t<s.length;t++)n+=","+zs(s[t]);return n+="]"}return s[nr]=csJSON.stringify(s)}var zs=typeof window.Symbol!="undefined"?Zp:csJSON.stringify;var ct=(()=>{let s;return function(n){n.debug="debug",n.warn="warn",n.implementation="implementation",n.error="error",n.critical="critical"}(s||(s={})),s})(),Fc=["t.contentsquare.net","clicktale"],tf=s=>{var n;if(typeof s.filename=="string"&&csArray.prototype.some.call(Fc,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(n=s.error)===null||n===void 0?void 0:n.stack,L.critical(t)}};window.addEventListener("error",tf);var L=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(Fc,t)}static setStrategy(t){s.ji=t}static computeIsActive(t){s.je=Ae.boolean(t),s.je?s.tc=Ae.boolean(10):s.tc=!1}static isLoggingActive(){return s.je}static getStrategy(){return s.ji}static debug(t,e=""){s.je&&this.ji.send(t,e,ct.debug)}static warn(t,e=!0,i=""){var r;s.je&&e&&this.ji.send(t,i,ct.warn),(r=window.UXAnalytics.Console)===null||r===void 0||r.warn(t)}static implementation(t,e=""){s.je&&this.ji.send(t,e,ct.implementation)}static error(t,e=""){var i;s.je&&this.ji.send(t,e,ct.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){this.ji.send(t,e,ct.critical)}static tryToExecute(t,e){return function(...i){try{let r=e.apply(this,i);return K(window.Promise)&&r instanceof window.Promise?r.then(o=>o,o=>s.error(as(o)?o:new Error(o),t)):r}catch(r){try{s.error(as(r)?r:new Error(r),t)}catch{}}}}static isPerfLoggingActive(){return s.tc}}return s.je=!1,s.tc=!1,s})();var ef=/^\d+\.\d+(?:\.\d+)?$/,sf=s=>{if(!ef.test(s))return;let[n,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:n,minor:t,patch:!e||Number.isNaN(e)?0:e}},nf=(s,n)=>s.major!==n.major?s.major-n.major:s.minor!==n.minor?s.minor-n.minor:s.patch-n.patch,rf=(s,n)=>nf(s,n)>=0,of=1,af="f553e78fb58e051e51fe8074c4c6e73e",Ir=(()=>{let s;return function(n){n[n.Disabled=0]="Disabled",n[n.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",n[n.Enabled=2]="Enabled"}(s||(s={})),s})(),cf=(()=>{class s{constructor(t){var e,i,r,o,c,l,h,p,u,m,y,S,C;this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||co,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(r=t.smbConfig)===null||r===void 0?void 0:r.record)!==null&&o!==void 0)||o),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(h=t.apiErrorsEnabled)!==null&&h!==void 0?h:0,...t.apiErrors},this.customErrors={enabled:(p=t.customErrorsEnabled)!==null&&p!==void 0?p:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.sc(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.sc(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.sc(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(u=t.recordingUrlRules)!==null&&u!==void 0?u:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((m=t.uxaDomain)===null||m===void 0?void 0:m.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(y=t.anonymizeDigits)!==null&&y!==void 0?y:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(S=t.recordTargetingRules)!==null&&S!==void 0?S:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(C=t.collectTargetText)!==null&&C!==void 0?C:Ir.Disabled}getTrackerUri(){return`${this.Ns()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.Ns()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${af}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.Ns()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.Ns()}://${this.loggerDomain}`}getMetricsUri(){return`${this.Ns()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.Ns()}://${this.staticResourceManagerDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.Ns()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB&&!!this.dynamicConfDomain}getPaProxyDomainUri(){return`${this.Ns()}://${this.paProxyDomainUri}`}Ns(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===of}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[r,o]=i;this.ey(r,o)}})}ey(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e)}sc(t){return t?this.sy(t):null}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}sy(t){try{let e=/^\/(.*)\/([gim]*)$/.exec(t);if(e){let[,i,r]=e;return new csRegExp(`^${i}$`,r)}return new csRegExp(`^${t}$`)}catch{return null}}isHeaderCollectionActive(){var t,e;return this.apiErrors.collectStandardHeaders||!!(!((t=this.apiErrors.validCustomHeaders)===null||t===void 0)&&t.length)||!!(!((e=this.apiErrors.plainCustomHeaders)===null||e===void 0)&&e.length)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.$u()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.$u())return!0;let t=sf(this.getHeapVersion()||"");if(t&&t.major===4&&rf(t,{major:4,minor:23,patch:5}))return!0}return!1}$u(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,r,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((r=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||r===void 0?void 0:r.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Ir.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}}return s})(),lf=(()=>{class s{constructor(t,e){this.po=t,this.Gu=e}init(){this.qu=this.po!==this.po.top,this.Wu=this.Gu.isWebView&&this.po===this.po.top,this.Gu.iframesTracking&&this.qu||this.Wu?this.Yu=!1:this.Yu=!0}isInIframeContext(){return this.qu}isTopWindowTracker(){return this.Yu}isInWebViewContext(){return this.Wu}}return s})(),Ti=(()=>{let s;return function(n){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}n.toQuery=t}(s||(s={})),s})(),zc=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),$s=(()=>{class s extends zc{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.ic(t);let e=Ti.toQuery(t);this.iy(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}iy(t){let e=new window.Image(1,1);e.onload=mn,e.onerror=mn,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}ic(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})(),hf=(()=>{class s{constructor(t,e){this.Ms=t,this.ny=e}init(){this.us=new $s(this.Ms.getLoggerUri()),this.us.setRequestParametersProviders(this,this.ny)}send(t){this.fo=t,this.us.send()}getRequestParameters(){return{a:this.fo.app,l:this.fo.level,m:this.fo.message,s:this.fo.stacktrace}}}return s})();function tt(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}var Pr=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t}_get(){return this._values}_reset(){this._values={}}aggregate(){if(!s.globalService)return;let t=this._get(),e=Object.keys(t);e.length&&(s.globalService.push(csArray.prototype.map.call(e,i=>({name:this.name,parameter:i,value:t[i]}))),this._reset())}}return s.globalService=null,tt([O("Metric.aggregate")],s.prototype,"aggregate",null),s})(),Vt=(()=>{class s extends Pr{constructor(t,e=100){super(t),this.ry=e,this.Me=null,this._values={}}count(t,e=1){this._values[t]=(this._values[t]||0)+e,this._debounce()}_debounce(){Pr.globalService&&(this.Me&&window.csClearTimeout(this.Me),this.Me=window.csSetTimeout(()=>{this.aggregate(),this.Me=null},this.ry))}}return s})();var et={counters:{commandsFromIntegrations:new Vt("commands-from-integrations"),commandsFromCSTC:new Vt("commands-from-cstc"),commandsFromIframe:new Vt("commands-from-iframe"),commandApplied:new Vt("command-applied"),commandError:new Vt("command-error"),commandMisuse:new Vt("command-misuse"),CSTCSnippetUsed:new Vt("cstc-snippet-used"),redactedPII:new Vt("redacted-pii"),pageAnonymisation:new Vt("page-anonymisation"),patchedNativeFunctions:new Vt("patched-native-functions"),pureWindowState:new Vt("pure-window-state"),sensitiveElements:new Vt("sensitive-elements"),cspErrors:new Vt("csp-errors"),networkRequests:new Vt("network-requests"),webVitalsErrors:new Vt("web-vitals-errors")},setService(s){Pr.setGlobalService(s)}},uf=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,df=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,pf="CS_ANONYMIZED_EMAIL",rr="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",ff=new csRegExp(`(ey${rr}\\.ey${rr}\\.${rr})`,"g"),gf="CS_ANONYMIZED_JWT",mf=/[0-9]{4}/,yf=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Ef="CS_ANONYMIZED_PII",Sf="\u2022",vf=/\d/g,_f=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,wf=/(?:\d{1,3}\.){3}\d{1,3}/,bf=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Qe=(()=>{let s;return function(n){function t(p){return csString.prototype.replace.call(p,uf,pf)}n.replaceEmail=t;function e(p){return csString.prototype.replace.call(p,ff,gf)}n.replaceJWT=e;function i(p,u){return csString.prototype.replace.call(p,yf,u)}n.replaceCreditCardNumber=i;function r(p){return csString.prototype.replace.call(p,vf,Sf)}n.replaceDigits=r;function o(p){return wf.test(p)||bf.test(p)}n.mayHaveIPAddress=o;function c(p){return _f.test(p)}n.mayHaveNumberSequence=c;function l(p){return mf.test(p)}n.mayHaveCreditCardNumber=l;function h(p){return df.test(p)}n.mayHaveEmail=h}(s||(s={})),s})(),Rs=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.oy(this.nc(t));return e===!0?i=this.ay(i):e===!1&&(i=this.cy(i)),i}anonymizePII(t){return this.nc(t)}anonymizeJwt(t){return Qe.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.nc(t[i])}),t}nc(t){if(Qe.mayHaveEmail(t)){let e=Qe.replaceEmail(t);return e!==t&&et.counters.redactedPII.count("email"),e}return t}ay(t){return Qe.replaceDigits(t)}cy(t){return Qe.mayHaveNumberSequence(t)?Qe.replaceDigits(t):t}oy(t){return Qe.mayHaveCreditCardNumber(t)?Qe.replaceCreditCardNumber(t,(e,i,r,o,c)=>{if(csString.prototype.indexOf.call(r,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(r,o),""):r;if(!this.ly(h))return e;et.counters.redactedPII.count("cc")}else et.counters.redactedPII.count("cc-partial");return`${i}${Ef}${c}`}):t}ly(t){let e=parseInt(t[t.length-1]),i=0;for(let r=t.length-2;r>=0;r--){let o=parseInt(t[r]);r%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),$c="15.115.0";function lo(){return{v:$c}}function ho(s){let n=new ArrayBuffer(s.length),t=new Uint8Array(n);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return n}function da(s){let n=new Uint8Array(s),t="";for(let e=0;e<n.byteLength;e+=1)t+=csString.fromCodePoint(n[e]);return t}function Gc(s){let n=self.atob(s);return ho(n)}function Or(s){let n=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(n,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function pa(s){let n=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=n?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!n&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){mt.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let r=n?Gc(e[1]):ho(e[1]);return new Blob([r],{type:csString.prototype.replace.call(e[0],"data:","")})}var qc=typeof performance!="undefined"&&!!performance.now,fa=qc?()=>performance.now():csDate.now,Af=(()=>{var s,n;return qc?(n=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&n!==void 0?n:Math.floor(performance.timeOrigin):0})(),D={now(){return Math.round(fa()+Af)},elapsed(){return fa()}};function ga(){return Math.floor(D.now()/1e3)}function Wc(){return typeof window.Promise=="function"}function Tf(){var s;return typeof crypto!="undefined"&&Yt((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function ma(){var s,n;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((n=window.navigation)===null||n===void 0?void 0:n.removeEventListener)=="function"}function Bt(s,n){return csString.prototype.lastIndexOf.call(s,n,0)===0}function Qs(s,n){return csString.prototype.indexOf.call(s,n,s.length-n.length)!==-1}var Yc=(()=>{class s{constructor(t,e){this.f=t,this.N=e}getRequestParameters(){return{d:`${D.now()}`,p:this.N.anonymizePII(window.location.href),...this.f.getRequestParameters(),...lo()}}}return s})(),Rf="uxa",ya=5,Cf="No stacktrace",Xc="snippet-",Kc="implementation-snippet-",Ea=(()=>{let s;return function(n){n.IMPLEMENTATION="implementation",n.DYNAMIC="dynamic"}(s||(s={})),s})(),or={[ct.debug]:0,[ct.warn]:1,[ct.implementation]:1,[ct.error]:2,[ct.critical]:3},If=(()=>{class s{constructor(t,e,i){this.ds=e,this.N=new Rs,this.Xu=or[ct.warn],this.Xu=or[t.minLogLevel||ct.warn],this.us=i||new hf(t,new Yc(t,this.N)),this.Ku={[ct.debug]:[],[ct.warn]:[],[ct.implementation]:[],[ct.error]:[],[ct.critical]:[]},this.go={implementation:{},dynamic:{}},this.us.init()}send(t,e="",i=ct.warn){if(!this.hy(i,e))return;csArray.prototype.push.call(this.Ku[i],e||"");let r={message:this.uy(t,e),stacktrace:this.dy(t),app:Rf,level:i};this.us.send(r)}uy(t,e){let i=as(t)?this.N.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}dy(t){return as(t)?`${t.stack||Cf} ${this.Hn()}`:this.Hn()}Hn(){let t=this.ds.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.ds.getSessionService(),r=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(o)}hy(t,e){if(or[t]<this.Xu)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,Kc,0))===0)return this.Ju(e,Ea.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Xc,0))===0)return this.Ju(e,Ea.DYNAMIC);let i=this.Ku[t];return!(i.length>=ya||e&&csArray.prototype.some.call(i,r=>r===e))}Ju(t,e){return t in this.go[e]?this.go[e][t]>=ya?!1:(this.go[e][t]+=1,!0):(this.go[e][t]=1,!0)}}return s})(),Dt=!Ii&&document.createElement("a"),Pf=/(:443|:80)$/;function be(s){return Dt?(Dt.href=s,Dt.href):""}function Jc(s,n){return new csURL(s,n).href}function Qc(s){let n=po(s);return n===null?"":decodeURIComponent(n.hostname)}function uo(s,n){return csArray.prototype.some.call(n,t=>Qs(s,`.${t}`)||s===t||t==="")}function Of(s){return s[0]==="/"?s:`/${s}`}function Sa(s){return csString.prototype.replace.call(s,Pf,"")}function po(s){return!Dt||!Bt(s,"http://")&&!Bt(s,"https://")?null:(Dt.href=s,{hash:Dt.hash,host:Sa(Dt.host),hostname:Dt.hostname,href:Dt.href,origin:Dt.origin?Dt.origin:Sa(`${Dt.protocol}//${Dt.host}`),pathname:Of(Dt.pathname),port:Dt.port,protocol:Dt.protocol,search:Dt.search})}var va="CS_IFRAME_MESSAGE",Gs=(()=>{let s;return function(n){n.AfterPageView="afterPageView",n.GetSessionKey="getSessionKey"}(s||(s={})),s})(),Jt=(()=>{let s;return function(n){n.Parent="parent",n.Child="child"}(s||(s={})),s})(),P=(()=>{let s;return function(n){n.Discovery="discovery",n.Stop="stop",n.RecordingContext="recordingContext",n.SensitiveStatus="sensitiveStatus",n.RecordingEvent="recordingEvent",n.EndOfBufferedMessages="endOfBufferedMessages",n.ChildLogMessage="childLogMessage",n.AnalysisEvent="analysisEvent",n.JavascriptError="javascriptError",n.ApiError="apiError",n.Assets="assets",n.DetailedApiError="detailedApiError",n.EmerchandisingMessage="emerchandisingMessage",n.Commands="commands",n.IntegrationCallback="integrationCallback",n.StaticResource="staticResource",n.TrackingContextResultMessage="trackingContextResultMessage",n.TrackingContextRequestMessage="trackingContextRequestMessage",n.CustomError="customError"}(s||(s={})),s})(),nt=(()=>{let s;return function(n){function t(l,h,p,u){let m={type:l,from:h,pid:p,signature:va};return u!==void 0&&u>=0&&(m.id=u),m}n.buildBaseMessage=t;function e(l,h,p,u){let m=Qc(l.origin);return!!l.data&&!!l.data.type&&l.data.signature===va&&l.data.from===h&&l.data.pid===p&&uo(m,u)}n.isMessageValid=e;function i(l,h,p,u){u?l.postMessage(p,h,u):l.postMessage(p,h)}n.sendPostMessage=i;function r(){return new MessageChannel}n.getNewChannelMessage=r;function o(l,h){l.postMessage(h)}n.sendChannelMessage=o;function c(l){l.close()}n.closeChannelPort=c}(s||(s={})),s})(),Nf=(()=>{class s{constructor(t){this.f=t}send(t,e="",i=ct.warn){let r={message:t,errorCode:e,level:i},o=nt.buildBaseMessage(P.ChildLogMessage,Jt.Child,this.f.projectId);o.content=r,nt.sendPostMessage(window.parent,"*",o)}}return s})(),Mf=(()=>{class s{setContext(t,e){this.O=t,this.A=e}getVisitorService(){return this.O}getSessionService(){return this.A}}return s})();function kf(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function B(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}function Df(){let s=new MutationObserver(n=>{n.forEach(t=>{W(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(et.counters.pureWindowState.count("iframe-deletion"),mt.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function _a(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function Lf(){(!_a(MutationObserver)||!_a(MutationObserver.prototype.observe))&&et.counters.patchedNativeFunctions.count("MutationObserver")}function xf(){try{window.CSPureWindow&&Df(),Lf()}catch{}}var wt=(()=>{let s;return function(n){n.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let p=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return p?decodeURIComponent(p[2]):null}n.get=t;function e(l,h,p,u,m,y){let S=encodeURIComponent(`${h}`),C=p===n.CURRENT_DOMAIN?void 0:p,M=i(u),b=M?`;expires=${M.toUTCString()}`:"",v=";path=/",k=yt(C)?`;domain=${C}`:"",I=`${l}=${S}${b}${v}${k}`;return K(m)&&m!==le.NotSet&&(I=`${I};SameSite=${m}`),K(y)&&y===Ee.Yes&&(I=`${I};Secure`),document.cookie=I,!0}n.set=e;function i(l){return Ot(l)?new csDate(D.now()+l):l}n.toExpireDate=i;function r(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),le.None,Ee.Yes)}n.remove=r;function o(){return document.cookie.length>0}n.isCookiePresent=o;function c(l,h){let p="_cs_root-domain",u=t(p);if(u!==null&&u!=="1")return u;let m=csString.prototype.split.call(window.location.hostname,"."),y=csArray.prototype.pop.call(m);for(;m.length&&(u===null||u==="1");)y=csArray.prototype.join.call([csArray.prototype.pop.call(m),y],"."),e(p,y,y,void 0,l,h),u=t(p);return r(p,y),y}n.getRootDomain=c}(s||(s={})),s})(),Uf=(()=>{let s;return function(n){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}n.browserIsSafariV12=t}(s||(s={})),s})(),le=(()=>{let s;return function(n){n.None="None",n.Lax="Lax",n.NotSet="X"}(s||(s={})),s})(),Ee=(()=>{let s;return function(n){n[n.Yes=1]="Yes",n[n.No=0]="No"}(s||(s={})),s})(),In=(()=>{class s{constructor(t,e,i){this.f=t,this.R=e,this.ci=i,this.rc=!1,this.Qu=le.NotSet,this.oc=Ee.No}getSameSiteFlag(){return this.Qu}getSecureFlag(){return this.oc}getDomain(){return this.ac}getRootDomain(){return this.Zu}init(){if(this.f.cookielessTrackingEnabled)return;let t=this.py(),e=this.fy();this.rc=this.gy(t,e),this.rc?(this.Qu=t,this.oc=e):this.f.secureCookiesEnabled&&this.R.getUrlProtocol()==="https:"&&(this.oc=Ee.Yes),this.Zu=this.my(),this.ac=this.yy(this.Zu)}gy(t,e){return Uf.browserIsSafariV12()?!1:(wt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),wt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(wt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}py(){return this.R.getUrlProtocol()==="http:"?le.Lax:this.ci.isSameSiteNoneSecureNeeded()||this.f.crossDomainTracking?le.None:le.Lax}fy(){return this.R.getUrlProtocol()==="http:"?Ee.No:this.f.secureCookiesEnabled||this.f.crossDomainTracking||this.ci.isSameSiteNoneSecureNeeded()?Ee.Yes:Ee.No}isSameSiteSupported(){return this.rc}set(t,e,i){let r=wt.toExpireDate(i);wt.set(t,e,this.ac,r,this.getSameSiteFlag(),this.getSecureFlag())}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.ac;wt.remove(t,i)}my(){let t=this.ci.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?le.None:void 0,i=t?Ee.Yes:void 0;return wt.getRootDomain(e,i)}yy(t){return this.f.allowSubdomains?t:wt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Ds="_cs_t",wa="1",Vf=(()=>{class s{constructor(t,e){this.Et=t,this.f=e,this.mo=!1,this.yo=!1}init(){if(!this.f.cookielessTrackingEnabled&&this.Et.isTopWindowTracker()&&"cookie"in document){if(!this.Et.isInIframeContext()&&wt.isCookiePresent()){this.mo=!0,this.yo=!1;return}if(wt.set(Ds,wa,wt.CURRENT_DOMAIN),wt.get(Ds)!==null){this.mo=!0,this.yo=!1,wt.remove(Ds,wt.CURRENT_DOMAIN);return}wt.set(Ds,wa,wt.CURRENT_DOMAIN,void 0,le.None,Ee.Yes),wt.get(Ds)!==null&&(this.mo=!0,this.yo=!0,wt.remove(Ds,wt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.mo}isSameSiteNoneSecureNeeded(){return this.yo}}return s})();function jf(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Hf=(()=>{class s{constructor(t,e){this.f=t,this.ci=e}canTrack(){return this.f.isProjectActive()&&this.Ey()&&this.td()&&this.Sy()}canTrackInChild(){return this.f.isProjectActive()&&this.vy()&&(this.td()||this._y())}Sy(){return this.f.cookielessTrackingEnabled?jf():this.ci.areCookiesEnabled()}td(){return uo(window.location.hostname,this.f.hostnames)}Ey(){return!this.sd()&&this.wy()}vy(){return!this.sd()&&this.by()}_y(){return window.location.protocol==="about:"&&window.location.hostname===""}sd(){return"visibilityState"in document&&document.visibilityState==="prerender"}wy(){return this.nd()&&this.Ay()}by(){return this.nd()}Ay(){try{return!!window.localStorage}catch{return!1}}nd(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),Bf=(()=>{class s{constructor(t,e){this.cc=!1,this.rd=new Map,this.od=new Map,this.ad=new Map,this.cd="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";var e;!function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));let t={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class s{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:s}=t;this.send(s,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach((t=>{this.queryParams[t]=e[t]}))}removeQueryParams(e){e?e.forEach((e=>{delete this.queryParams[e]})):this.queryParams={}}send(s,r){const a=r||{...this.queryParams},o=!("ct"in a),i="string"!=typeof s&&!this.isArrayBuffer(s);"ct"in a||(this.compressionOpts&&o?a.ct=this.compressionOpts.compressionType:a.ct=e.UNCOMPRESSED);const n=i?JSON.stringify(s):s,h=Object.keys(a).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(a[e])}\`)).join("&"),c=\`\${this.endpoint}?\${h}\`;!function(e,t){const s=e.length;for(let r=0;r<s;r++)if(t(e[r],r))return!0;return!1}(this.mandatoryParameters,(e=>null==a[e]))?this.compressionOpts&&o&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,(e=>this.doSend(c,a,e))):this.doSend(c,a,n):t.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${c}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,s){const r=new XMLHttpRequest,a=Object.keys(t).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`)).join("&");r.open("POST",e),r.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:r.responseText,status:r.status};this.onLoadCallback(e)}},r.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:a,metadata:t,events:s}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(r.timeout=this.timeout,r.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>r.abort(),Object.keys(this.headers).forEach((e=>{r.setRequestHeader(e,this.headers[e])})),r.send(s)}}class r{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class a{constructor(e){this.ramStorage={},this.byteSizeCounter=new r(e)}save({key:e,metadata:t,events:s}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:s}))}recover(e){const t=[];this.getStorageKeys().forEach((e=>{const s=this.ramStorage[e];void 0!==s&&(delete s.metadata.datatype,t.push(s),this.removeItem(e))})),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var o;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));class i{constructor(e,t,s){this.storageName=e,this.onOpenError=s,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new r(t),this.init()}async init(){await this.openCache(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach((e=>{this.save(e)})),this.toBeSavedBuffer=[]}async save(e){try{if(this.cacheState===o.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(e);if(this.cacheState!==o.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:t,metadata:s,events:r}=e;if(this.byteSizeCounter.addString(t),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached())return;await this.cache.put(\`\${this.origin}/\${t}\`,new Response(r,{headers:s}))}catch{}}async recover(e){(this.cache||(await this.openCache(),this.cacheState===o.READY))&&this.doRecover(e)}async openCache(){try{this.cacheState=o.OPEN_IN_PROGRESS,this.cache=await self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=o.READY}catch{this.cacheState=o.OPEN_FAILED}}async doRecover(e){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const t=await this.cache.keys();if(0===t.length)return;const s=(await this.cache.matchAll()).map((e=>{const t={};e.headers.forEach(((e,s)=>{t[s]=e})),delete t["content-type"];const s=t.datatype;return delete t.datatype,"json"===s||"base64"===s?e.text().then((e=>({metadata:t,events:e}))):e.arrayBuffer().then((e=>({metadata:t,events:e})))})),r=await Promise.all(s);await Promise.all(t.map((e=>this.cache.delete(e)))),e(r),this.byteSizeCounter.reset()}catch{}finally{this.recoveryInProgress--}}}class n{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new i(e,n.MAX_SIZE,(e=>{this.setRamStorageStrategy(e)}))}setRamStorageStrategy(e){this.storageStrategy=new a(n.MAX_SIZE),e&&e.forEach((e=>{this.storageStrategy.save(e)}))}}n.MAX_SIZE=16777216,function(){const e="CS_WORKER_SIGNATURE",t=new Map,r=new n("csPersisted");function a(a){var o;if((o=a)&&o.WORKER_SIGNATURE===e)switch(a.type){case"CreatePostRequest":{const{endpoint:o,compressionOutputType:i,useRetry:n,mandatoryParameters:h}=a,c={endpoint:o,mandatoryParameters:h,worker:!0};i&&(c.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(c.recoveryStorage=r);const d=new s(c);t.set(o,d),d.onLoad((t=>{const s={type:"onLoad",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)})),d.onError((t=>{const s={type:"onError",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)}))}break;case"SetQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.removeQueryParams(s)}break;case"Send":{const{endpoint:e,payload:s,queryParams:r}=a,o=t.get(e);o&&o.send(s,r)}break;case"Abort":{const{endpoint:e}=a,s=t.get(e);s&&s.abort()}break;case"SetHeader":{const{endpoint:e,headerName:s,headerValue:r}=a,o=t.get(e);o&&o.setRequestHeader(s,r)}break;case"SetTimeout":{const{endpoint:s,timeout:r}=a,o=t.get(s);o&&o.onTimeout((()=>{const t={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:e};self.postMessage(t)}),r)}break;default:throw new Error(JSON.stringify(a))}}self.addEventListener("message",(function(e){e.data.getReader?async function(e,t){const s=e.getReader();for(;;){const{done:e,value:r}=await s.read();if(e)break;t(r)}}(e.data,a):a(e.data)}))}()})();`;try{this.ps=this.Ty(e||i),this.cc=!0,s.isTransferableStreamSupported()&&(this.ld=new ReadableStream({start:r=>{this.lc=r},cancel:()=>{this.lc=null}}),this.ps.postMessage(this.ld,[this.ld]))}catch(r){r.name==="SecurityError"&&et.counters.cspErrors.count("network-worker"),this.cc=!1}}postMessage(t){t.WORKER_SIGNATURE=this.cd,this.lc?this.lc.enqueue(t):this.ps.postMessage(t)}Ty(t){let e=window.csURL||window.webkitURL,i=window.Blob,r=window.Worker,o=new i([t],{type:"application/javascript"}),c=e.createObjectURL(o);L.whiteListFilename(c);let l=new r(c);return l.onmessage=h=>{let{type:p,endpoint:u,WORKER_SIGNATURE:m}=h.data;if(m===this.cd){if(p==="onLoad"){let{response:y}=h.data,S=this.rd.get(u);S&&S(y)}else if(p==="onError"){let{response:y}=h.data,S=this.od.get(u);S&&S(y)}else if(p==="onTimeout"){let y=this.ad.get(u);y&&y()}}},l}registerOnLoadCallback(t,e){this.rd.set(t,e)}registerOnErrorCallback(t,e){this.od.set(t,e)}registerOnTimeoutCallback(t,e){this.ad.set(t,e)}isSupported(){return this.cc}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),Ff=(()=>{class s{constructor(t){var e;this.Kt={},this.Jt=t.endpoint,this.we=t.networkWorker,this.Ry=t.compressionOutputType,this.Cy=t.useRetry,this.we.postMessage({type:"CreatePostRequest",endpoint:this.Jt,compressionOutputType:this.Ry,useRetry:this.Cy,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this.we.postMessage({type:"SetQueryParams",endpoint:this.Jt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.Kt[e]=t[e]})}getQueryParams(){return this.Kt}removeQueryParams(t){this.we.postMessage({type:"RemoveQueryParams",endpoint:this.Jt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.Kt[e]})}send(t,e){this.we.postMessage({type:"Send",endpoint:this.Jt,payload:t,queryParams:e})}abort(){this.we.postMessage({type:"Abort",endpoint:this.Jt})}onLoad(t){this.we.registerOnLoadCallback(this.Jt,t)}onError(t){this.we.registerOnErrorCallback(this.Jt,t)}setRequestHeader(t,e){this.we.postMessage({type:"SetHeader",endpoint:this.Jt,headerName:t,headerValue:e})}onTimeout(t,e){this.we.registerOnTimeoutCallback(this.Jt,t),this.we.postMessage({type:"SetTimeout",endpoint:this.Jt,timeout:e})}}return s})(),Pn=(()=>{let s;return function(n){n.UNCOMPRESSED="0",n.GZIP="2"}(s||(s={})),s})(),Zc=(()=>{class s{constructor(t){this.onError=t}}return s})(),zf=(()=>{class s{constructor(t){var e;this.Kt={},this.hc={},this.ud=i=>{for(let r of i){let{metadata:o,events:c}=r;this.send(c,o)}},this.Jt=t.endpoint,this.Bn=t.compressionOpts,this.Qt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.worker=!!t.worker,this.Qt&&this.Qt.recover(this.ud)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Kt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Kt[e]}):this.Kt={}}send(t,e){let i=e||{...this.Kt},r=!("ct"in i),o=typeof t!="string"&&!this.Iy(t);"ct"in i||(!this.Bn||!r?i.ct=Pn.UNCOMPRESSED:i.ct=this.Bn.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(p=>`${encodeURIComponent(p)}=${encodeURIComponent(i[p])}`).join("&"),h=`${this.Jt}?${l}`;if(gn(this.mandatoryParameters,p=>i[p]==null)){mt.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.Bn&&r&&typeof c=="string"?this.Bn.compressor(c,this.Bn.compressionOutputType,p=>this.dd(h,i,p)):this.dd(h,i,c)}onLoad(t){this.Hi=t}onError(t){this.Fn=t}onTimeout(t,e){this.li=t,this.zn=e}abort(){this.pd&&this.pd()}setRequestHeader(t,e){this.hc[t]=e}getQueryParams(){return this.Kt}Iy(t){return t&&t.byteLength!==void 0}dd(t,e,i){let r=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");r.open("POST",t),r.onload=()=>{if(this.Qt&&this.Qt.recover(this.ud),this.Hi){let c={params:e,responseText:r.responseText,status:r.status};this.Hi(c)}},r.onerror=()=>{this.Qt&&this.Qt.save({key:o,metadata:e,events:i}),this.Fn&&this.Fn({params:e})},this.zn&&this.li&&(r.timeout=this.zn,r.ontimeout=()=>{this.li()}),this.pd=()=>r.abort(),Object.keys(this.hc).forEach(c=>{r.setRequestHeader(c,this.hc[c])}),r.send(i)}}return s})(),tl=(()=>{class s{constructor(t){this.pc=t,this.we=new Bf(this.pc)}create(t,e,i,r,o=[]){if(this.we.isSupported()&&e)return new Ff({networkWorker:this.we,endpoint:t,compressionOutputType:i,useRetry:!!r,mandatoryParameters:o});{let c=i?{compressor:this.pc.compress,compressionOutputType:i,compressionType:this.pc.algorithm}:void 0;return new zf({endpoint:t,compressionOpts:c,recoveryStorage:r})}}}return s})(),$f=(()=>{class s{constructor(t,e,i,r,o){this.O=t,this.A=e,this.Xe=i,this.At=r,this.f=o}get(){return{exclusion:this.Xe.getAppliedTrackingDraw(),visitor:this.O.getVisitor(),session:this.A.getSession(),cvars:this.At.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.Xe.exclude(this.f),this.O.removeVisitor(),this.A.removeSession(),this.At.removeCustomVariablesSession()}include(t){this.Xe.removeExclusion(),this.O.setVisitor(t.visitor),t.session?this.A.setSession(t.session):this.A.removeSession(),t.cvars?this.At.setCustomVariableSession(t.cvars):this.At.removeCustomVariablesSession()}}return s})(),yn=".",fo="__DOT__",Gf=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,el="x";function sl(s){let[n,t,e,i,r,o,c,l,h]=Xf(s);return{id:n,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(r),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===el?null:h}}function qf(s){var n;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(n=s.identityPrint)!==null&&n!==void 0?n:el],csString),Wf),yn)}function il(s){return Gf.test(s)}function Wf(s){return csString.prototype.replace.call(s,/\./g,fo)}function Yf(s){return csString.prototype.replace.call(s,new csRegExp(fo,"g"),yn)}function Xf(s){return csString.prototype.indexOf.call(s,fo)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,yn),Yf):csString.prototype.split.call(s,yn)}var H=(()=>{let s;return function(n){n.QUOTA_REACHED="X",n.RECORDING_RULES_TARGETING="8",n.ANALYTICS_ONLY_RULES_TARGETING="9",n.ANALYTICS_ONLY="0",n.RECORDING_GLOBAL_SAMPLING="5",n.RECORDING_TEMPORARILY="T",n.RECORDING_URL_SAMPLING="6",n.RECORDING_ETR_SAMPLING="7",n.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",n.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),Gt=(()=>{let s;return function(n){n.ETR_OFF="0",n.ETR_ON="1"}(s||(s={})),s})(),os=(()=>{let s;return function(n){n.ETR_LEGACY="0",n.ETR_SESSION="1",n.ETR_PAGE="2"}(s||(s={})),s})(),ie=(()=>{let s;return function(n){n.ETR_DISABLED="0",n.ETR_PENDING="1",n.ETR_SAVED_PAGE="2",n.ETR_SAVED_SESSION="3",n.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Nr=(()=>{let s;return function(n){n.UNNECESSARY="U",n.NOT_EXPRESSED="N",n.WITHDRAWN="W",n.GRANTED="G"}(s||(s={})),s})();var Kf=(()=>{let s;return function(n){n.ETR_DISABLED="0",n.ETR_PENDING="1",n.ETR_SAVED_PAGE="2",n.ETR_SAVED_SESSION="3",n.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),nl=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,rl=".";function Jf(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],rl)}function ol(s){if(!On(s))return null;let n=Mr(s);return n!==null?al(n):null}function al(s){var n,t;let[e,i,r,o]=csString.prototype.split.call(s,rl);return{collectState:i,replayConsent:(n=r)!==null&&n!==void 0?n:Nr.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:Kf.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function On(s){return nl.test(s)}function Mr(s){if(!s)return null;let n=(()=>{var t;return(t=csString.prototype.match.call(s,nl))===null||t===void 0?void 0:t[1]})();return n!=null?n:null}var cl=(()=>{let s;return function(n){function t(e){return{exclusion:Number(e._cs_ex)||0,visitor:e._cs_id?sl(e._cs_id):null,session:e._cs_s?ol(e._cs_s):null,cvars:e._cs_cvars?window.csJSON.parse(e._cs_cvars):null}}n.fromRaw=t}(s||(s={})),s})(),Oe="_cs_ex",ba=2592e6,Qf=/^[0-9]+$/,ll=(()=>{class s{constructor(t,e,i){this.f=t,this.U=e,this.Zt=i}onCookieToSet(t){this.hi=t}onCookieToRemove(t){this.pi=t}get(){return this.f.cookielessTrackingEnabled?Number(this.Zt.getItem(Oe)):Number(this.U.get(Oe))}set(t){var e;this.f.cookielessTrackingEnabled?this.Zt.setItem(Oe,t):(this.U.set(Oe,t,ba),(e=this.hi)===null||e===void 0||e.call(this,Oe,t,ba))}remove(){var t;this.f.cookielessTrackingEnabled?this.Zt.removeItem(Oe):(this.U.delete(Oe),(t=this.pi)===null||t===void 0||t.call(this,Oe))}static isValidExclusionString(t){return Qf.test(t)}}return s})(),Ze="_cs_cvars",hl=(()=>{class s{constructor(t,e,i){this.f=t,this.U=e,this.Zt=i}onCookieToSet(t){this.hi=t}onCookieToRemove(t){this.pi=t}get(){return this.f.cookielessTrackingEnabled?this.Zt.getItem(Ze):this.U.get(Ze)}set(t){var e;this.f.cookielessTrackingEnabled?this.Zt.setItem(Ze,t):(this.U.set(Ze,t),(e=this.hi)===null||e===void 0||e.call(this,Ze,t))}remove(){var t;this.f.cookielessTrackingEnabled?this.Zt.removeItem(Ze):(this.U.delete(Ze),(t=this.pi)===null||t===void 0||t.call(this,Ze))}static isValidCustomVarString(t){return typeof t=="string"}}return s})(),kr=(()=>{let s;return function(n){function t(i){let r=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(i),o=>csArray.prototype.indexOf.call(r,o)>=0)}n.isRawDomainState=t;function e(i){return t(i)?(!i._cs_id||il(i._cs_id))&&(!i._cs_s||On(i._cs_s))&&(!i._cs_ex||ll.isValidExclusionString(i._cs_ex))&&(!i._cs_cvars||hl.isValidCustomVarString(i._cs_cvars)):!1}n.isValid=e}(s||(s={})),s})(),Zf="1.0.0",tg=(()=>{class s{constructor(t,e){this.be=t,this.Ot=e}retrieve(t,e){this.w=e,this.retrievedStates=[],this.fc=csArray.prototype.map.call(csArray.prototype.filter.call(t,i=>this.Py(i)),s.getXdframeOrigin),this.be.onMessage(i=>{this.gc(i)}),this.be.onTimeout(()=>{this.mc()}),this.be.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.fc,s.getXdframeUrl),i=>this.be.open(i))}gc(t){if(this.yc(t)){let e=t.data;if(kr.isValid(e))csArray.prototype.push.call(this.retrievedStates,e);else throw this.be.stop(),`Invalid domain state: ${csJSON.stringify(t.data)} from ${t.origin}`}this.Oy()&&(this.be.stop(),this.w(csArray.prototype.map.call(this.retrievedStates,cl.fromRaw)))}mc(){L.warn("xdframe: all messages not received")}yc(t){return csArray.prototype.indexOf.call(this.fc,t.origin)>-1}Oy(){return this.retrievedStates.length===this.fc.length}Py(t){return!Bc(this.Ot.hostname,t)}static getXdframeOrigin(t){return`https://csxd.${t}`}static getXdframeUrl(t){return`${t}/xdframe-${Zf}.html`}}return s})(),eg=(()=>{class s{constructor(){this.Ny=3e3,this.gd=t=>{this.handleMessage(t)}}onMessage(t){this.md=t}onTimeout(t){this.li=t}start(){window.addEventListener("message",this.gd),this.Me=window.csSetTimeout(()=>{this.li()},this.Ny)}open(t){var e;let i=document.createElement("iframe");return i.src=t,i.setAttribute("hidden",""),i.setAttribute("title","Intentionally blank"),(e=document.body)===null||e===void 0||e.appendChild(i),i}stop(){window.removeEventListener("message",this.gd),window.csClearTimeout(this.Me),this.md=mn,this.li=mn}handleMessage(t){this.md(t)}}return B([O("XdframeMessage")],s.prototype,"handleMessage",null),s})(),sg="spki",Aa="RSA-OAEP",ig="SHA-256",Ta="AES-CTR",ng="SHA-1",Ra=190,bs=(()=>{let s;return function(n){var t;let e=!1,i=null,r,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;n.crypto=(t=ht.crypto)===null||t===void 0?void 0:t.subtle,n.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}n.isKeyImported=l;function h(){return i}n.getCryptoKey=h;function p(){var I,R;return((R=(I=ht.self.crypto)===null||I===void 0?void 0:I.subtle)===null||R===void 0?void 0:R.encrypt)!=null&&ht.self.CryptoKey!=null}n.isSupported=p;async function u(I){r=n.crypto.importKey(sg,Gc(I),{name:Aa,hash:ig},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await r,r=void 0,i||mt.warn(`Fail to import public key '${I}'`)}n.importKey=u;async function m(I){if(!p()||e)return null;await r;let R=ho(I);R.byteLength>Ra&&(R=R.slice(0,Ra));try{let F=await n.crypto.encrypt({name:Aa},i,R);return da(F)}catch{return null}}n.asymmetricEncrypt=m;async function y(I,R){if(!p()||e)return null;let F={counter:R.initializationVector,name:Ta,length:64},G=o.encode(I);try{let rt=await n.crypto.encrypt(F,R.cryptoKey,G);return da(rt)}catch{return null}}n.symmetricEncrypt=y;async function S(I){let R=await C(I);if(!R)throw new Error("Export secret failed");let F=await m(R);if(!F)throw new Error("Encrypt secret failed");return F}n.encryptSecret=S;async function C(I){var R;if(!p())return null;try{return(R=(await n.crypto.exportKey("jwk",I)).k)!==null&&R!==void 0?R:null}catch{return null}}async function M(){if(!p()||e)return null;try{return{cryptoKey:await n.crypto.generateKey({name:Ta,length:128},!0,["encrypt","decrypt"]),initializationVector:ht.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}n.generateSymmetricKey=M;function b(I){c=I}n.setDigestSalt=b;async function v(I){I=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(I)),c&&(I=`${I}:${c}`);let R=o.encode(I);try{let F=await n.crypto.digest(ng,R);return Or(F)}catch{return null}}n.digest=v;function k(){return ht.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}n.generateKeyPair=k}(s||(s={})),s})();function rg(){let s=new Error,n=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(n.length===0)return"";let t=ag(n);return t===""||(n=cg(n,t),n.length===0)?"":ul(n[0])}function og(s){return csString.prototype.indexOf.call(s,"@")!==-1}function ag(s){return s.length>0?ul(s[0]):""}function cg(s,n){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,n)===-1)}function ul(s){let n="",t;og(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(n=e[1]),n}var lg=s=>s;function hg(s,n,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,n,{get(){var r;if(this[i])return this[i];let o=(r=t.get)===null||r===void 0?void 0:r.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let p=c[l],u=Reflect.set(c,l,h);return e.forEach(m=>m(this,h,p,"subproperty")),u}}):this[i]=o,this[i])},set(){var r;let o=arguments,c=this[n],l=(r=t.set)===null||r===void 0?void 0:r.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){mt.error(h)}return l}})}function ug(s,n,t){let e=dg(s,n);if(!e)return null;let i=(r,o,c,l)=>t(r,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function dg(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,n);return i?i.configurable?(s[t]=e,hg(s,n,i,e),e):(mt.warn(`Cannot intercept non configurable property '${csString(n)}' of object '${s}'`),null):(mt.warn(`Cannot intercept property '${csString(n)}' because it does not exist directly on the target object '${s}'`),null)}function pg(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,n);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return mt.warn(`Cannot intercept read only function '${csString(n)}' of object '${s}'`),null;let i=new Set;s[t]=i;let r=s[n];if(typeof r=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(ls(i),p=>p(c))}catch(p){mt.error(p)}let h=r.apply(this,c);try{for(let p=0;p<l.length;p++)l[p]({result:h,context:this,args:c})}catch(p){mt.error(p)}return h};gg(o,r),s[n]=o}return i}function Qt({target:s,methodName:n,hook:t,hookPrepareArgs:e=lg,options:i}){let r=pg(s,n);if(!r)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:rg()}:{};return p=>t({...p,...h,args:l})};return{activate:()=>{r.add(o)},deactivate:()=>{r.delete(o)}}}function fg(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,n);return i?i.configurable?(s[t]=e,Object.defineProperty(s,n,{set(){var r;let o=arguments,c=this[n],l=(r=i.set)===null||r===void 0?void 0:r.apply(this,o);try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){mt.error(h)}return l}}),e):(mt.warn(`Cannot intercept read only property '${csString(n)}' of object '${s}'`),null):e}function En(s,n,t){let e=fg(s,n);if(!e)return null;let i=(r,o,c)=>t(r,o,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function gg(s,n){s.prototype=n.prototype,Object.defineProperty(s,"toString",{value:()=>n.toString()})}var Zs=(()=>{var s;class n{static My(e){this.ks.forEach(i=>{e(i,"initial")})}static $n(e){if(this.M||(this.M=new csMutationObserver(i=>{for(let r of i)r.target.isConnected&&W(r.addedNodes,this.ky),W(r.removedNodes,this.Dy)})),csArray.prototype.push.call(this.Ae,e),!this.G){this.G=!0,this.M.observe(document,this.Gn);for(let i of ws.getAllShadowHosts(document)){let r=csElementshadowRoot.apply(i);this.ks.add(r),this.M.observe(r,this.Gn)}this.Ec||(this.Ec=Qt({target:Element.prototype,methodName:"attachShadow",hook:i=>i.result.isConnected&&this.yd(i.result)})),this.Ec.activate()}this.My(e)}static qn(e){var i,r;this.Ae=csArray.prototype.filter.call(this.Ae,o=>o!==e),this.Ae.length===0&&(this.Ae=[],this.G=!1,(i=this.M)===null||i===void 0||i.disconnect(),(r=this.Ec)===null||r===void 0||r.deactivate(),this.ks.clear())}constructor(e){this.w=e,this.w=Ue("DocumentShadowRootObserver:callback",(i,r)=>e(i,r))}get shadowRoots(){return ls(s.ks)}takeRecords(){var e,i;return(i=(e=s.M)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){ws.isSupported()&&s.$n(this.w)}disconnect(){ws.isSupported()&&s.qn(this.w)}}return s=n,n.Ae=[],n.ks=new Set,n.G=!1,n.Gn={childList:!0,subtree:!0},n.yd=t=>{s.ks.has(t)||(s.M.observe(t,s.Gn),s.ks.add(t),W(s.Ae,e=>e(t,"added")))},n.ky=t=>{qt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.yd)},n.Dy=t=>{t.isConnected||qt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.ks.has(e)&&(s.ks.delete(e),W(s.Ae,i=>i(e,"removed")))})},tt([O()],n.prototype,"observe",null),tt([O()],n.prototype,"disconnect",null),n})(),dl=!0;function pt(s,n=dl){s.boundElement.addEventListener(s.type,s.listener,n)}function ft(s,n=dl){s.boundElement.removeEventListener(s.type,s.listener,n)}function zt(s,n=0){let t=Math.pow(10,n);return Math.round(s*t)/t}var Ca=!1;function dt(){return(s,n,t)=>{if(t){let e=t.value;t.value=function(i,r){(i==null?void 0:i.isTrusted)===!1&&Ca||e.call(this,i,r)}}else{let e=s[n];if(typeof e!="function")return;s[n]=function(i,...r){(i==null?void 0:i.isTrusted)===!1&&Ca||e.call(this,i,r)}}}}function Nn(s,n){typeof n=="number"&&(n={wait:n});let t=n.wait,e=n.mode||"leading",i,r=[],o=null,c=0,l,h=()=>{c=D.now(),o=null,l=s.apply(i,r),r=[],i=null},p=function(...u){if(i=this!==null&&this!==void 0?this:ht,r=[...u],e==="trailing")return o||(o=ht.csSetTimeout(h,t)),l;let m=D.now(),y=t-(m-c);return y<=0||y>t?(c=m,l=s.apply(i,r),o?(ht.csClearTimeout(o),o=null):r=[]):o||(o=ht.csSetTimeout(h,y)),l};return p.cancel=()=>{o&&(ht.csClearTimeout(o),c=0,o=null,r=[])},p.flushPending=()=>{o&&(ht.csClearTimeout(o),h())},p}var Cs=s=>(n,t,e)=>{e.value=Nn(e.value,s)};function mg(s){return s.nodeType===1}function Pt(s){let n=csEventtarget.apply(s);return n&&mg(n)&&csElementshadowRoot.apply(n)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:n}function yg(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Eg(){return(s,n,t)=>{let e=t.value;return e&&(t.value=function(i){if(Pt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}function Sg(s){if(!T(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var vg=!!window.chrome,Ia="data-cs-scroll-container";function _g(s){try{if(yt(csEventtarget.apply(s)))return!0}catch{}return!1}var Vs=(()=>{let s;return function(n){function t(i){return!!(yt(i)&&_g(i)&&xe(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Ia)!==null)}n.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Ia}]`)}n.getScrollContainer=e}(s||(s={})),s})();function wg(){let s=csSymbol.for("propStore");return{getStore(n){return n[s]},get(n,t){let e=n[s];return e==null?void 0:e[t]},set(n,t,e){let i=n[s];i||(i={},n[s]=i),i[t]=e}}}var rn=wg(),Y=(()=>{let s;return function(n){function t(l,h,p){var u;l instanceof Node?rn.set(l,h,p):((u=l.props)!==null&&u!==void 0||(l.props={}),l.props[h]=p)}n.setProperty=t;function e(l,h){var p;return l instanceof Node?rn.get(l,h):(p=l.props)===null||p===void 0?void 0:p[h]}n.getProperty=e;function i(l){return l instanceof Node?rn.getStore(l):l.props}n.getProperties=i;function r(l,h){let p=null;return o(l,(u,m,y)=>h(u)&&(p=u)&&!!y()),p}n.findDescendant=r;function o(l,h){c(l,void 0,h)}n.traverse=o;function c(l,h,p){let u=!1;if(p(l,h,()=>u=!0),u)return;let y=l.shadowRoot;y&&c(y,l,p);let S=l.children;if(S!=null&&S.length){for(let C of S)if(C&&(c(C,l,p),u))break}}}(s||(s={})),s})(),pl=1,yi=csSymbol("nodeIdentifier");function bg(s=!1){s&&(pl=1),yi=csSymbol("nodeIdentifier")}function Ag(s){return Y.getProperty(s,yi)}function ot(s){let n=Y.getProperty(s,yi);return n!=null?n:(Y.setProperty(s,yi,pl++),Y.getProperty(s,yi))}var ar;function Nt(s){if(ar||(ar=document.createElement("div")),!(!!s&&T(s)))return mt.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Xt.call(ar,s),!0}catch{return mt.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function qs(s,n){if(ca)return ca.call(s,n);let t=s;do{if(Xt.call(t,n))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var U=(()=>{let s;return function(n){let t;(function(b){b[b.NotMasked=0]="NotMasked",b[b.Parent=1]="Parent",b[b.Child=2]="Child"})(t=n.MaskedElementState||(n.MaskedElementState={})),n.maskedProp="masked",n.maskedAttributeProp="maskedAttribute";function e(b){return te(b)&&"Attributes"in b&&"PIISelectors"in b?b.Attributes instanceof Array&&b.PIISelectors instanceof Array:!1}n.isSelectorUserInput=e;function i(b){if(!te(b)||b===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in b||(b.Attributes=[]),"PIISelectors"in b||(b.PIISelectors=[]),b}n.sanitizeSelectorUserInput=i;function r(b){var v;return(v=Y.getProperty(b,n.maskedProp))!==null&&v!==void 0?v:{state:t.NotMasked}}n.getMaskedElementDetails=r;function o(b){var v;return(v=Y.getProperty(b,n.maskedAttributeProp))!==null&&v!==void 0?v:{attributes:[]}}n.getMaskedAttributeDetails=o;function c(b){let v=Y.getProperty(b,n.maskedProp);return(v==null?void 0:v.state)===t.Parent}n.isMaskedElement=c;function l(b){let v=Y.getProperty(b,n.maskedProp);return(v==null?void 0:v.state)===t.Child}n.isMaskedElementChild=l;function h(b,v){let k=Y.getProperty(b,n.maskedAttributeProp);return((k==null?void 0:k.attributes)==null?void 0:csArray.prototype.indexOf.call(k==null?void 0:k.attributes,v))>-1}n.isMaskedAttribute=h;function p(b,v){Y.setProperty(b,n.maskedProp,v)}n.setMaskedElementProperty=p;function u(b){Y.setProperty(b,n.maskedProp,void 0)}n.unsetMaskedElementProperty=u;function m(b,v){Y.setProperty(b,n.maskedAttributeProp,v)}n.setMaskedAttributeProperty=m;function y(b,v){let k=csArray.prototype.filter.call(b.PIISelectors,F=>Nt(F));v.elementSelector.length>0&&csArray.prototype.push.call(k,...csString.prototype.split.call(v.elementSelector,","));let I=M([...k]),R={elementSelector:csArray.prototype.join.call(I,","),attrSelector:v.attrSelector,attrSelectors:v.attrSelectors};return csArray.prototype.forEach.call(b.Attributes,F=>{F!=null&&F.attrName&&(F!=null&&F.selector)&&Nt(F.selector)&&!S(R.attrSelectors,F)&&csArray.prototype.push.call(R.attrSelectors,F)}),R.attrSelector=C(R.attrSelectors),R}n.getComputedSelectorSettings=y;function S(b,v){return csArray.prototype.some.call(b,k=>k.selector===v.selector&&k.attrName===v.attrName)}function C(b){let v="";return csArray.prototype.forEach.call(b,k=>{let I=csString.prototype.split.call(k.selector,",");csArray.prototype.forEach.call(I,R=>{Nt(R)&&(v&&(v+=","),v+=R)})}),v}function M(b){if(b.length<=1)return b;let v=[];for(let k of b){let I=csString.prototype.split.call(k,",");for(let R of I)csArray.prototype.indexOf.call(v,R)===-1&&csArray.prototype.push.call(v,R)}return v}}(s||(s={})),s})(),V=(()=>{let s;return function(n){n[n.MUTATION_INSERT=1]="MUTATION_INSERT",n[n.MUTATION_REMOVE=2]="MUTATION_REMOVE",n[n.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",n[n.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",n[n.INITIAL_DOM=5]="INITIAL_DOM",n[n.SCROLL=6]="SCROLL",n[n.CLICK=8]="CLICK",n[n.RESIZE=9]="RESIZE",n[n.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",n[n.INPUT_SELECT=11]="INPUT_SELECT",n[n.INPUT_TEXT=12]="INPUT_TEXT",n[n.HASH_CHANGE=13]="HASH_CHANGE",n[n.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",n[n.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",n[n.MOUSE_OVER=16]="MOUSE_OVER",n[n.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",n[n.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",n[n.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",n[n.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",n[n.ATTACH_SHADOW=22]="ATTACH_SHADOW",n[n.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",n[n.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",n[n.PAGE_EVENT=27]="PAGE_EVENT",n[n.API_ERROR=28]="API_ERROR",n[n.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",n[n.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",n[n.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",n[n.KEY_DOWN=32]="KEY_DOWN",n[n.KEY_UP=33]="KEY_UP",n[n.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",n[n.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",n[n.USER_IDENTIFIER=38]="USER_IDENTIFIER",n[n.TOUCH_START=41]="TOUCH_START",n[n.TOUCH_MOVE=42]="TOUCH_MOVE",n[n.TOUCH_END=43]="TOUCH_END",n[n.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",n[n.POINTER_DOWN=47]="POINTER_DOWN",n[n.POINTER_MOVE=48]="POINTER_MOVE",n[n.POINTER_UP=49]="POINTER_UP",n[n.CUSTOM_ERROR=50]="CUSTOM_ERROR",n[n.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",n[n.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",n[n.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",n[n.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",n[n.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",n[n.SCREEN_RESIZE=65]="SCREEN_RESIZE",n[n.RESOURCE_HASHES=66]="RESOURCE_HASHES",n[n.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",n[n.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",n[n.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",n[n.TEXT_REF=73]="TEXT_REF",n[n.TOUCH_CANCEL=74]="TOUCH_CANCEL",n[n.MUTATION_MOVE=75]="MUTATION_MOVE",n[n.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",n[n.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",n[n.VIDEO_PLAY=78]="VIDEO_PLAY",n[n.VIDEO_PAUSE=79]="VIDEO_PAUSE",n[n.VIDEO_SEEK=80]="VIDEO_SEEK",n[n.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",n[n.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",n[n.DEBUG=999]="DEBUG"}(s||(s={})),s})();var di=(()=>{let s;return function(n){n[n.SWIPE=0]="SWIPE",n[n.PINCH_IN=1]="PINCH_IN",n[n.PINCH_OUT=2]="PINCH_OUT",n[n.LONG_PRESS=3]="LONG_PRESS",n[n.TAP=4]="TAP",n[n.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),js=(()=>{let s;return function(n){n[n.COPY=0]="COPY",n[n.CUT=1]="CUT",n[n.PASTE=2]="PASTE"}(s||(s={})),s})(),X=(()=>{let s;return function(n){n[n.SPACE=0]="SPACE",n[n.ENTER=1]="ENTER",n[n.BACKSPACE=2]="BACKSPACE",n[n.DELETE=3]="DELETE",n[n.ARROWUP=4]="ARROWUP",n[n.ARROWDOWN=5]="ARROWDOWN",n[n.ARROWLEFT=6]="ARROWLEFT",n[n.ARROWRIGHT=7]="ARROWRIGHT",n[n.CAPSLOCK=8]="CAPSLOCK",n[n.SHIFT=9]="SHIFT",n[n.TAB=10]="TAB",n[n.ALPHANUMERICAL=11]="ALPHANUMERICAL",n[n.ESCAPE=12]="ESCAPE",n[n.END=13]="END",n[n.ALT=14]="ALT",n[n.CTRL=15]="CTRL",n[n.META=16]="META"}(s||(s={})),s})(),Tg=33,fl=(()=>{class s{constructor(){this.eventType="user",this.Sc=[],this.Ly=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.xy=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.Eo=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.vc=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=Sg(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.vc,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.ce=new Zs((e,i)=>{switch(i){case"initial":case"added":this.fi(e);break;case"removed":this.gi(e);break}})}init(){this.Uy(),this.Vy(),this._c()}onEvent(t){csArray.prototype.push.call(this.Sc,t)}te(t,e=!1){csArray.prototype.forEach.call(this.Sc,i=>i(t,e))}start(){this.wc(),this.fi(document),this.ce.observe()}stop(){this.gi(document),this.ce.disconnect(),this.Sc=[]}Vy(){this.jy()&&csArray.prototype.push.call(this.Eo,...this.Ly)}Uy(){this.Hy()&&csArray.prototype.push.call(this.Eo,...this.xy)}fi(t){un(t)?csArray.prototype.forEach.call(this.Eo,e=>pt(e)):csArray.prototype.forEach.call(this.vc,e=>{let i={type:e.type,listener:e.listener,boundElement:t};pt(i)})}gi(t){un(t)?csArray.prototype.forEach.call(this.Eo,e=>ft(e)):csArray.prototype.forEach.call(this.vc,e=>{let i={type:e.type,listener:e.listener,boundElement:t};ft(i)})}jy(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}Hy(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}wc(){this.By()}By(){let t=Vs.getScrollContainer()||document,e=ot(t),i=this.Ed(t);if(i.top!==0||i.left!==0){let r={type:V.SCROLL,args:[e,i.left,i.top],date:D.now()};this.te(r,!0)}}Ed(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(U.isMaskedElement(t)||U.isMaskedElementChild(t))return;let e=ot(t),i=this.Ed(t),r={type:V.SCROLL,args:[e,i.left,i.top],date:D.now()};this.te(r)}mouseOverListener(t){if(U.isMaskedElementChild(t.target))return;let e=ot(t.target),i={type:V.MOUSE_OVER,args:[e],date:D.now()};this.te(i)}clickListener(t){let e=Pt(t);if(U.isMaskedElementChild(e))return;let i=ot(e),r={type:V.CLICK,args:[i],date:D.now()};this.te(r)}keyUpListener(t){let e=Pt(t);if(U.isMaskedElementChild(e))return;let i=ot(e),r=this.V[t.key];if(r===void 0)return;let o={type:V.KEY_UP,args:[i,r],date:D.now()};this.te(o)}keyDownListener(t){let e=Pt(t);if(U.isMaskedElementChild(e))return;let i=ot(e),r=this.V[t.key];if(r===void 0)return;let o={type:V.KEY_DOWN,args:[i,r],date:D.now()};this.te(o)}copyListener(t){let e=Pt(t);if(U.isMaskedElementChild(e))return;let i=ot(e),r={type:V.CLIPBOARD_COMMAND,args:[i,js.COPY],date:D.now()};this.te(r)}cutListener(t){let e=Pt(t);if(U.isMaskedElementChild(e))return;let i=ot(e),r={type:V.CLIPBOARD_COMMAND,args:[i,js.CUT],date:D.now()};this.te(r)}pasteListener(t){let e=Pt(t);if(U.isMaskedElementChild(e))return;let i=ot(e),r={type:V.CLIPBOARD_COMMAND,args:[i,js.PASTE],date:D.now()};this.te(r)}pointerUpListener(t){let e=Pt(t);if(U.isMaskedElementChild(e))return;let i=ot(e),r={type:V.POINTER_UP,args:[t.pointerId,t.pointerType,zt(t.clientX,1),zt(t.clientY,1),i,t.button],date:D.now()};this.te(r)}pointerMoveListener(t){let e={type:V.POINTER_MOVE,args:[t.pointerId,t.pointerType,zt(t.clientX,1),zt(t.clientY,1)],date:D.now()};this.te(e)}pointerDownListener(t){let e=Pt(t);if(U.isMaskedElementChild(e))return;let i=ot(e),r={type:V.POINTER_DOWN,args:[t.pointerId,t.pointerType,zt(t.clientX,1),zt(t.clientY,1),i,t.button,{pageX:zt(t.pageX,1),pageY:zt(t.pageY,1)}],date:D.now()};this.te(r)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:V.TOUCH_START,args:[r.identifier,zt(r.clientX,1),zt(r.clientY,1)],date:D.now()};this.te(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:V.TOUCH_MOVE,args:[r.identifier,zt(r.clientX,1),zt(r.clientY,1)],date:D.now()};this.te(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:t.type==="touchend"?V.TOUCH_END:V.TOUCH_CANCEL,args:[r.identifier,zt(r.clientX,1),zt(r.clientY,1)],date:D.now()};this.te(o)}}_c(){this.V={},this.V[" "]=X.SPACE,this.V.Spacebar=X.SPACE,this.V.Backspace=X.BACKSPACE,this.V.Enter=X.ENTER,this.V.Delete=X.DELETE,this.V.ArrowUp=X.ARROWUP,this.V.ArrowDown=X.ARROWDOWN,this.V.ArrowLeft=X.ARROWLEFT,this.V.ArrowRight=X.ARROWRIGHT,this.V.Up=X.ARROWUP,this.V.Down=X.ARROWDOWN,this.V.Left=X.ARROWLEFT,this.V.Right=X.ARROWRIGHT,this.V.CapsLock=X.CAPSLOCK,this.V.Shift=X.SHIFT,this.V.Tab=X.TAB,this.V.Escape=X.ESCAPE,this.V.Esc=X.ESCAPE,this.V.End=X.END,this.V.Alt=X.ALT,this.V.Control=X.CTRL,this.V.Meta=X.META}}return B([Mt("RecordingPageEvents.start")],s.prototype,"start",null),B([O("scroll")],s.prototype,"scrollListener",null),B([O("mouseOver"),dt(),Eg()],s.prototype,"mouseOverListener",null),B([O("click"),dt()],s.prototype,"clickListener",null),B([O("Event handler type: keyup")],s.prototype,"keyUpListener",null),B([O("Event handler type: keydown")],s.prototype,"keyDownListener",null),B([O("Event handler type: copy")],s.prototype,"copyListener",null),B([O("Event handler type: cut")],s.prototype,"cutListener",null),B([O("Event handler type: paste")],s.prototype,"pasteListener",null),B([O("Event handler type: pointerup"),dt()],s.prototype,"pointerUpListener",null),B([O("Event handler type: pointermove"),dt(),Cs({wait:Tg})],s.prototype,"pointerMoveListener",null),B([O("Event handler type: pointerdown"),dt()],s.prototype,"pointerDownListener",null),B([O("Event handler type: touchstart"),dt()],s.prototype,"touchStartListener",null),B([O("Event handler type: touchmove"),dt()],s.prototype,"touchMoveListener",null),B([O("Event handler type: touchend-cancel"),dt()],s.prototype,"touchEndCancelListener",null),s})(),Rg=2,go=(()=>{class s{constructor(t){this.Fy=t,this.So=0}addString(t){this.So+=t.length*Rg}addArrayBuffer(t){this.So+=t.byteLength}isThresholdReached(){return this.So>this.Fy}reset(){this.So=0}}return s})(),Cg=2*1e3*1024,Ig=200,Pg=(()=>{class s{constructor(t=[],e=Cg){this.Lt=t,this.bc=new go(e)}addEvent(t){this.bc.addString(zs(t)),csArray.prototype.push.call(this.Lt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Lt.length&&!(this.Lt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Lt,e,0,t)}eventsCount(){return this.Lt.length}clearEvents(){this.bc.reset(),this.Lt=[]}isFull(){return this.eventsCount()>=Ig}isThresholdReached(){return this.bc.isThresholdReached()}getEvents(){return this.Lt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Lt,r=>{csArray.prototype.indexOf.call(t,r.type)!==-1?csArray.prototype.push.call(e,r):csArray.prototype.push.call(i,r)}),this.Lt=i,e}stringifyEvents(){return zs(this.Lt)}mC(t){t.type===V.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return B([Mt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})(),Og=(()=>{class s{constructor(){this.vo=1}getCurrentIndex(){return this.vo}increment(){this.vo+=1}reset(){this.vo=1}getRequestParameters(){return{ri:`${this.vo}`}}}return s})(),mo=(()=>{class s{emit(t,e,i,r=document){let c=`${i!==void 0?`${i}`:`${s.zy}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&r.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.$y();if(i===null)return null;let{bubbles:r=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,r,o,c),i}static $y(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.zy="cs.tracking.",s})(),Et=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),on="null",ns=null,gl=[],Ng=()=>{var s;return Ii||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!Ii&&Ng()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],ns=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{Dr({type:"UXA_EVENT",event:s.detail})}),ns.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===on)return;on=s.data.sessionId,csArray.prototype.forEach.call(gl,n=>n()),ns==null||ns.postMessage({type:"CONNECTED",sessionId:on})}}));function Mg(s){Ii||(on!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(gl,s)))}function Dr(s){ns==null||ns.postMessage(s)}var Mn=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),Es=(()=>{class s extends Mn{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var Pa=(()=>{class s extends Mn{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),cr=(()=>{class s extends Mn{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Total: {total}ms"),this.total=0,this.count=0}get average(){return this.count?this.total/this.count:0}measure(t){let e=D.elapsed();t(),this.count++,this.total+=D.elapsed()-e}asyncMeasure(){let t=D.elapsed();return()=>{this.count++,this.total+=D.elapsed()-t}}getData(){return{total:this.total,count:this.count,average:this.average}}}return s})(),Lt={general:{category:"General",nbEvents:new Es("Nb of Events"),pendingTasks:new Es("Pending Tasks"),pendingEvents:new Es("Pending Tasks"),nbOfMutationObservers:new Pa("Nb of Mutation Observers")},mutations:{category:"Mutations",initialDOM:new cr("Initial DOM"),pendingMutations:new Es("Nb of Mutations scheduled"),serializedMutations:new cr("Serialized Mutations"),count:new Es("Mutation Count"),elementMutationObserved:new Pa("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new cr("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new Es("Nb of Hidden Elements "),nbElements:new Es("Nb of  Elements")}},Oa=null;Mg(()=>{let s=i=>Object.keys(i),n=csArray.prototype.map.call(s(Lt),i=>Lt[i]),t=csArray.prototype.map.call(n,i=>csArray.prototype.filter.call(csArray.prototype.map.call(s(i),r=>i[r]),r=>r instanceof Mn));Dr({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(n,(i,r)=>({category:i.category,performanceCounters:csArray.prototype.map.call(t[r],o=>({name:o.name,format:o.format}))}))}),!Oa&&(Oa=csSetInterval(()=>{let i=oo(he(t,r=>he(r,o=>o.getData())),r=>r);Dr({type:"UXA_PERFORMANCE_COUNTER",event:i})},1e3))});function je(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}function Zt(s){return Bt(s,"data:")}function ml(s){return Bt(s,"#")}function Sn(s){return!!s&&(Qs(s,".css")||Bt(s,"https://fonts.googleapis.com/css"))}var Na=/\bhttps?:\/\/[^\s<>"')\]]*[^\s<>"'),.;:\])]/gi;function kg(s){Na.lastIndex=0;let n,t=0,e=[];for(;(n=Na.exec(s))!==null;){let i=n.index,r=n.index+n[0].length;if(i>t){let c=csString.prototype.slice.call(s,t,i);csArray.prototype.push.call(e,{content:c,isUrl:!1})}let o=csString.prototype.slice.call(s,i,r);csArray.prototype.push.call(e,{content:o,isUrl:!0}),t=r}if(t<s.length){let i=csString.prototype.slice.call(s,t);csArray.prototype.push.call(e,{content:i,isUrl:!1})}return e}function yo(s){let n=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=Dg(n);return e?(Qs(t,",")||(e=Lg(e)),[Ma(t),...yo(e)]):[Ma(t)]}function Dg(s){return csString.prototype.split.call(s,/\s(.+)/)}function Ma(s){return csString.prototype.split.call(s,/,$/)[0]}function Lg(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var xg=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Ug(s,n){return csString.prototype.replace.call(s,xg,(...e)=>{let i=e[3]||e[4],r=e[9]||e[10]||e[11],o=jg((i||r).trim()),c=i?"@import ":"",l=n(o)||o;return`${c}url(${Vg(l)})`})}function Vg(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function Ei(s){let n=new Set;return Ug(s,t=>{var e,i;return n.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),ls(n)}function jg(s){let n=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,n,(t,e,i,r)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(r)return r;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var ka=new Map,lr=!Ii&&document.implementation.createHTMLDocument("");function yl(s){var n,t;return(t=(n=s.sheet)===null||n===void 0?void 0:n.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Hg(s){if(!Tn(s))return null;let n=El(s);if(n===null||n.length===0)return null;let t="";if(dp(s.textContent))W(n,e=>t+=e.cssText);else{let e=Bg(s);if(e===n.length||e>n.length)return null;let i=new csArray(n.length-e);for(let r=e,o=0;r<n.length;r+=1,o+=1)i[o]=n[r];W(i,r=>t+=r.cssText)}return t}function Bg(s){if(!lr)return 0;let n=ka.get(s.textContent);if(n)return n;let t=s.cloneNode(!0);t.textContent=s.textContent,lr.head.appendChild(t);let e=El(t);return n=e?e.length:0,ka.set(s.textContent,n),lr.head.removeChild(t),n}function El(s){try{if(s.disabled)return null;let n=s.sheet;return n?n.cssRules||n.rules:null}catch(n){if(n.name!=="SecurityError"&&n.name!=="InvalidAccessError")throw n;return null}}var fi=s=>s instanceof HTMLFormElement?"form":s.localName;var Is=(()=>{class s{constructor(t){this.csId=ot(t),this.props=rn.getStore(t)}}return s})(),Sl=(()=>{class s extends Is{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Hs=(()=>{class s extends Is{constructor(t){var e,i,r;super(t),this.attributes=[],this.nodeType=1,this.localName=fi(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=Hg(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new Sl(c);csArray.prototype.push.call(this.children,l)}Ks(t)&&Y.setProperty(this,"SVG",!0),(Tn(t)||to(t))&&(this.disabledSheet=(r=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&r!==void 0?r:!1)}static isElement(t){return t.nodeType===1}static getAttribute(t,e){return ve(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),Eo=(()=>{class s{constructor(t){this.type="asyncEvent",this.Ac=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.Ac)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Ds=t,this.Ac=!0,this.w&&this.w(this.Ds)}complete(t){this.Ac&&t(this.Ds),this.w=t}wait(){return new Promise(t=>this.complete(t))}}return s})();function Fg(s,n){let t=!1,e=function(){if(!t)return s.apply(n,arguments)};return e.cancel=()=>t=!0,e}var Lr=csQueueMicrotask||csSetTimeout,Yi=new Js,pi=new Js,Da=1;function Wt(s,n="high"){let t=Da;Yi.isEmpty&&pi.isEmpty&&vl(()=>{if(Da!==t)return;let r=Ts(()=>{for(;!pi.isEmpty;)pi.pop()();for(;!Yi.isEmpty;)Yi.pop()();pi.isEmpty||r()},"groupMicrotask.run");r()});let e=s.name||s.toString(),i=Ue(`groupMicrotask:${n}:${e}`,s);n==="high"?pi.push(i):Yi.push(i)}function vl(s,n=10){Lr(n===0?s:()=>vl(s,n-1))}async function _l(s=1){for(let n=0;n<s;n++)await new Promise(t=>Wt(t))}var kn=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return ls(this.set)}get count(){return this.set.size}}return s})(),zg=(()=>{class s extends kn{constructor(t="high"){super(),this.Gy=t}add(t){this.set.add(t),this.set.size===1&&Wt(()=>{this.set.clear()},this.Gy)}}return s})();function Dn(s,n=!1){let t=new kn;return{push(e){t.count===0&&(n?Wt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var Me=csSymbol(),So=(()=>{class s{constructor(t){var e,i,r,o,c,l,h,p,u,m,y,S,C;this.w=t,this.Tc=null,this.Rc=null,this.Cc=null,this.Ic=null,this.Pc=null,this.qy=Dn(M=>this.processUpdateRulesInATick(M)),this.Oc=null,this.Nc=null,this.Mc=null,this.w=M=>Wt(()=>t(M)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Tc=Qt({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:M,args:b})=>{this.processInsertRule(M,b)}})),typeof((o=(r=window.CSSStyleSheet)===null||r===void 0?void 0:r.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.Rc=Qt({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:M,args:b})=>{this.processDeleteRule(M,b)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Cc=Qt({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:M})=>this.processUpdateRule(M)})),typeof((p=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||p===void 0?void 0:p.deleteRule)=="function"&&(this.Ic=Qt({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:M})=>this.processUpdateRule(M)})),!((u=window.StyleSheet)===null||u===void 0)&&u.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Pc=En(window.StyleSheet.prototype,"disabled",(M,b,v)=>{b!==v&&this.Wy(M,b)})),typeof((y=(m=window.CSSStyleDeclaration)===null||m===void 0?void 0:m.prototype)===null||y===void 0?void 0:y.setProperty)=="function"&&(this.Oc=Qt({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:M})=>{let b=M.parentRule;b instanceof CSSStyleRule&&this.processUpdateRule(b)}})),typeof((C=(S=window.CSSStyleDeclaration)===null||S===void 0?void 0:S.prototype)===null||C===void 0?void 0:C.removeProperty)=="function"&&(this.Nc=Qt({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:M})=>{let b=M.parentRule;b instanceof CSSStyleRule&&this.processUpdateRule(b)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Mc=ug(window.CSSStyleRule.prototype,"style",M=>{this.processUpdateRule(M)}))}observe(){var t,e,i,r,o,c,l,h;(t=this.Tc)===null||t===void 0||t.activate(),(e=this.Rc)===null||e===void 0||e.activate(),(i=this.Cc)===null||i===void 0||i.activate(),(r=this.Ic)===null||r===void 0||r.activate(),(o=this.Pc)===null||o===void 0||o.activate(),(c=this.Oc)===null||c===void 0||c.activate(),(l=this.Nc)===null||l===void 0||l.activate(),(h=this.Mc)===null||h===void 0||h.activate()}disconnect(){var t,e,i,r,o,c,l,h;(t=this.Tc)===null||t===void 0||t.deactivate(),(e=this.Rc)===null||e===void 0||e.deactivate(),(i=this.Cc)===null||i===void 0||i.deactivate(),(r=this.Ic)===null||r===void 0||r.deactivate(),(o=this.Pc)===null||o===void 0||o.deactivate(),(c=this.Oc)===null||c===void 0||c.deactivate(),(l=this.Nc)===null||l===void 0||l.deactivate(),(h=this.Mc)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[Me]==null&&!t.ownerNode)return;let r={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.w(r)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.qy.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,r=csArray.prototype.indexOf.call(Fs(i.cssRules),e);if(r===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:r};this.w(o)}}processDeleteRule(t,[e]){if(t[Me]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.w(i)}Wy(t,e){if(t[Me]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.w(i)}}return tt([O()],s.prototype,"observe",null),tt([O()],s.prototype,"disconnect",null),tt([O()],s.prototype,"processInsertRule",null),tt([O()],s.prototype,"processUpdateRule",null),tt([O()],s.prototype,"processUpdateRulesInATick",null),tt([O()],s.prototype,"processDeleteRule",null),s})(),$g=(()=>{class s{constructor(t){this.Yy=1,this._o=new Set,this.kc=null,this.Dc=null,this.Lc=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.Xy=e=>{let i=e.sheet;if(this._o.has(i)){if(e.type==="cssRuleInserted"){let r={type:"adoptedStyleSheetRuleInserted",sheetId:i[Me],rule:e.rule,index:e.index};this.w(r)}else if(e.type==="cssRuleDeleted"){let r={type:"adoptedStyleSheetRuleDeleted",sheetId:i[Me],index:e.index};this.w(r)}else if(e.type==="cssRuleUpdated"){let r={type:"adoptedStyleSheetRuleUpdated",sheetId:i[Me],rule:e.rule,index:e.index};this.w(r)}else if(e.type==="cssStyleSheetDisabled"){let r={type:"adoptedStyleSheetDisabled",sheetId:i[Me],disabled:e.disabled};this.w(r)}}},this.w=e=>Wt(async()=>{await _l(2),t(e)}),this.ce=new Zs(this.Lc),"adoptedStyleSheets"in Document.prototype&&(this.kc=En(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.Dc=En(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.Sd=new So(this.Xy)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.ce.observe(),(t=this.kc)===null||t===void 0||t.activate(),(e=this.Dc)===null||e===void 0||e.activate(),this.Sd.observe()}disconnect(){var t,e;this._o.clear(),this.ce.disconnect(),(t=this.kc)===null||t===void 0||t.deactivate(),(e=this.Dc)===null||e===void 0||e.deactivate(),this.Sd.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.Ky(e);let i=he(e,o=>o[Me]),r={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.w(r)}Ky(t){W(t,e=>{if(this._o.has(e))return;let i=this.Yy++;e[Me]=i,this._o.add(e);let r=this.Jy(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:r,disabled:e==null?void 0:e.disabled};this.w(o)})}Jy(t){let e=[];try{e=he(t.cssRules,i=>i.cssText)}catch{}return e}}return tt([O()],s.prototype,"observe",null),tt([O()],s.prototype,"disconnect",null),tt([O()],s.prototype,"setStyleSheets",null),s})(),Gg=Ts(Xg,"optimizeMutations"),qg=csSymbol.for("ignoreNextSerialization");function Wg(){let s=new Set,n=new Set,t=new Set,e=new Set,i=new Map,r=new Map,o=new Map,c=new Set,l=new Set,h=new Map,p=new Set;return{isMovedNode(u){return s.has(u)},markAsMovedNode(u){p.delete(u),s.add(u)},isDetachedMove(u){return!!at.findAncestor(u,m=>p.has(m),!0)},isAddedNode(u){let m=at.findAncestor(u,y=>n.has(y)||l.has(y)||s.has(y),!0);return!!m&&!s.has(m)},isMovedNodeIntoAddedNode(u){return s.has(u)&&!!at.findAncestor(u,m=>n.has(m)||l.has(m),!0)},markAsAddedNode(u){p.delete(u),l.delete(u),n.add(u)},markAsPendingInsert(u){l.add(u)},isPendingInsert(u){return l.has(u)},isRemovedNode(u){return!!at.findAncestor(u,m=>t.has(m),!0)},markAsRemovedNode(u){t.add(u)},isUselessNode(u){return e.has(u)},markAsUselessNode(u){e.add(u)},getPlaceholder(u,m){let y=m==="previous"?r:i;return u&&y.has(u)?y.get(u)||null:u},getSiblings(u){let m=u.addedNodes.length,y=this.getPlaceholder(u.previousSibling,"previous"),S=this.getPlaceholder(u.nextSibling,"next");if(m){let C=y,M=S,b=u.previousSibling!==y,v=u.nextSibling!==S;for(let k=0;k<m;k++){let I=u.addedNodes[k],R=u.addedNodes[m-k-1];this.isLatestNodeMutation(I,u)?(r.delete(I),u.previousSibling&&b&&(i.set(u.previousSibling,I),b=!1),C=I):r.set(I,C),this.isLatestNodeMutation(R,u)?(i.delete(R),u.nextSibling&&v&&(r.set(u.nextSibling,R),v=!1),M=R):i.set(R,M)}}else u.previousSibling&&u.previousSibling!==y&&i.set(u.previousSibling,S),u.nextSibling&&u.nextSibling!==S&&r.set(u.nextSibling,y);return{previousSibling:y,nextSibling:S}},setAttributeMutation(u,m){let y=o.get(u)||new Set;y.add(m),o.set(u,y)},isAttributeMutated(u,m){var y;return!!(!((y=o.get(u))===null||y===void 0)&&y.has(m))},setLatestNodeMutation(u,m){h.set(u,m)},isLatestNodeMutation(u,m){return h.get(u)===m},markAsFutureAddedNode(u){h.has(u)||p.add(u)},isTextMutated(u){return c.has(u)},setTextMutated(u){return c.add(u)}}}function Yg(s,n){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];n.markAsFutureAddedNode(e),n.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];n.setLatestNodeMutation(e,s)}}function Xg(s){let n=Wg(),t=[];for(let e of s)e.type==="childList"&&Yg(e,n);for(let e of s)switch(e.type){case"attributes":Jg(e,n,t);break;case"characterData":Kg(e,n,t);break;case"childList":tm(e,n,t);break}return t}function Kg(s,n,t=[]){let e=s.target;return at.isConnected(e)&&!n.isTextMutated(e)&&!n.isAddedNode(e)&&!Zg(e,"characterData")&&(n.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function Jg(s,n,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return at.isConnected(e)&&!n.isAttributeMutated(e,i)&&!n.isAddedNode(e)&&(n.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var Qg=30;function Zg(s,n,t){let e=csSymbol.for(t?`${n}:${t}`:n),i=D.now(),r=s[e];return r&&i<r?!0:(s[e]=i+Qg,!1)}function tm(s,n,t=[]){let e=at.isConnected(s.target),i=!e&&n.isRemovedNode(s.target),r=e&&n.isAddedNode(s.target),o=n.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,p=()=>{if(h){let{childListType:y,movedNodes:S,...C}=h;csArray.prototype.push.call(t,y==="added"?C:{...C,movedNodes:S}),h=null}},u=y=>y===(h==null?void 0:h.childListType)?h:(p(),{childListType:y,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let y=0;y<s.addedNodes.length;y++){let S=s.addedNodes[y];n.isLatestNodeMutation(S,s)?(n.isMovedNode(S)?(h=u("moved"),csArray.prototype.push.call(h.movedNodes,S)):(n.markAsAddedNode(S),r||(h=u("added"),csArray.prototype.push.call(h.addedNodes,S))),l=S):at.isConnected(S)?n.isMovedNode(S)||n.markAsPendingInsert(S):n.markAsUselessNode(S)}p()}let m=Ai(s.removedNodes,y=>{if(at.isConnected(y)){if(!i&&!n.isPendingInsert(y)){if(n.isDetachedMove(y))return!0;n.markAsMovedNode(y),n.isMovedNodeIntoAddedNode(y)&&(y[qg]=!0)}return!1}return n.isUselessNode(y)?!1:(n.markAsRemovedNode(y),!0)});return m.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:m,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var La={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},de=(()=>{var s;class n{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static xc(e){if(s.shadowRootFilters.length>0&&Bs(e))for(let i=0;i<s.shadowRootFilters.length;i++){let r=s.shadowRootFilters[i];if(r(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,La)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Wt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(r=>{this.mutationObserver.observe(r,La)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(ws.getAllShadowHosts(document),r=>i(csElementshadowRoot.apply(r),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.xc(document),this.shadowRootObserver=new Zs(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,W(this.shadowRootObserver.shadowRoots,r=>{this.xc(r)}))}static disconnect(e,i){var r,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(r=this.shadowRootObserver)===null||r===void 0||r.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.w=e,this.vd=i;let r=Dn(o=>e(o,this),!0);this.w=Ue("DocumentMutationObserver:callback",o=>{W(o,c=>r.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),r=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&r.length?Xp(i,r):i!=null?i:r}observe(){s.observe(this.w,this.vd)}disconnect(){s.disconnect(this.w,this.vd)}}return s=n,n.callbacks=[],n.shadowRootCallbacks=[],n.started=!1,n.observedTargets=new Set,n.shadowRootFilters=[],n.mutationCallback=t=>{Lt.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},n.onShadowRoot=(t,e)=>{W(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.xc(t):s.disconnectShadowRoot(t)},n.isRefreshing=!1,tt([O()],n.prototype,"observe",null),tt([O()],n.prototype,"disconnect",null),n})(),em=(()=>{class s{constructor(t){this.w=t,this.Qy=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.w({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.w({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.w({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.w({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.w=e=>Wt(()=>t(e)),this._d=new So(e=>Wt(async()=>{await _l(),this.Qy(e)})),"adoptedStyleSheets"in Document.prototype&&(this.wd=new $g(t))}observe(){var t;this.M=new de(e=>this.Zy(e),(e,i)=>{i==="added"&&this.tE(e)}),this.M.observe(),this._d.observe(),(t=this.wd)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.M)===null||t===void 0||t.disconnect(),this._d.disconnect(),(e=this.wd)===null||e===void 0||e.disconnect()}Zy(t){let e=Gg(t);for(let i=0;i<e.length;i++){let r=e[i];if(!r){mt.error("processRawMutations: empty record");continue}switch(r.type){case"attributes":this.processAttributeChanged(r);break;case"characterData":this.processCharacterDataChanged(r);break;case"childList":this.processChildListChanged(r);break;default:mt.error(`processRawMutations: unknown record type '${r.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:at.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.w(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.w(e)}processChildListChanged(t){var e,i,r;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.w(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:Fs(t.addedNodes)};this.w(o)}if(!((r=t.removedNodes)===null||r===void 0)&&r.length){let o={type:"nodesRemoved",target:t.target,nodes:he(t.removedNodes,c=>c)};this.w(o)}}tE(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.w(e)}}return tt([O()],s.prototype,"processAttributeChanged",null),tt([O()],s.prototype,"processCharacterDataChanged",null),tt([O()],s.prototype,"processChildListChanged",null),s})(),sm=(()=>{class s extends Is{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),im=(()=>{class s extends Is{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),nm=(()=>{class s extends Is{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),rm=(()=>{class s extends Is{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),om=(()=>{class s extends Is{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),am=(()=>{class s{constructor(t,e,i){var r;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(r=t.namespaceURI)!==null&&r!==void 0?r:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let r=0;r<i.length;r++){let o=e[r];i[r]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&to(t)&&(i[r].value=yl(t))}return i}}return s})(),xa={workTime:40,async:!0,initialDOM:!0};var Si=csSymbol("InitialDom"),Ua=csSymbol.for("ignoreNextSerialization");function wl(s){return s[Ua]?(delete s[Ua],!0):!1}function bl(s=xa){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=xa.workTime);let r=Ue("serialize:callback",m=>e(m)),o=new Js,c=(m,y)=>{m.hasChildNodes()&&o.push({node:m,serializedNode:y});let S=m instanceof Element&&csElementshadowRoot.apply(m);if(S){let C=y.shadowRoot=vi(S);s.async&&s.initialDOM&&Y.setProperty(S,Si,!0),c(S,C)}},l,h=!0,p=8,u=Ue("work",()=>{var m;if(h)l=vi(t),s.async&&s.initialDOM&&Y.setProperty(t,Si,!0),c(t,l),h=!1;else if(o.isEmpty)return;let y=hm(100);for(;!o.isEmpty;){if(s.async&&y.elapsed()>=s.workTime){--p<=0&&csSetTimeout(u);return}let{node:S,serializedNode:C}=o.pop(),M=(m=C.children)!==null&&m!==void 0?m:[];if(Cn(S))continue;let b=0;for(let v=csNodefirstChild.apply(S);v;v=csNodenextSibling.apply(v)){if(wl(v))continue;let k=vi(v);s.async&&s.initialDOM&&Y.setProperty(v,Si,!0),M[b++]=k,c(v,k)}}s.async?csSetTimeout(()=>r(l)):e(l)});if(!s.async)s.workTime=1/0,u();else for(let m=0;m<p;m++)csSetTimeout(u,1)}}function cm(s){let n=vi(s),t=n;if(Cn(s))return n;let e=0;for(let r=csNodefirstChild.apply(s);r;r=csNodenextSibling.apply(r))wl(r)||(t.children[e++]=xr(r));let i=s.shadowRoot;return i&&(t.shadowRoot=xr(i)),n}var xr=Ts(cm,"serializeSync");function vi(s){let n,t;switch(s.nodeType){case 1:t=n=new Hs(s),n.attributes=um(s);break;case 3:t=new Sl(s);break;case 4:t=new sm(s);break;case 8:t=new im(s);break;case 10:t=new nm(s);break;case 9:t=new rm(s);break;case 11:t=new om(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function lm(){Si=csSymbol("InitialDom")}function hm(s){if(s<1)throw new Error("Precision should be >= 1");let n=0,t=performance.now();return{started:t,elapsed(){return++n%s===0&&(t=performance.now()),t-this.started}}}function um(s){return Cn(s)?[]:am.create(s)}var Ce=(()=>{class s{constructor(){this.le=[],this.isStarted=!1}produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:D.now(),t.timestamp==null&&(t.timestamp=D.now()),csArray.prototype.forEach.call(this.le,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.le=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.le,t),()=>{let e=csArray.prototype.indexOf.call(this.le,t);csArray.prototype.splice.call(this.le,e,1)}}}return s})(),dm=bl(),Al=(()=>{class s extends Ce{constructor(){super(...arguments),this.wo=!1}onStart(){this.wo=!0,this.w=Fg(this.eE,this),this.W=new em(this.w),this.W.observe();let t=Lt.mutations.initialDOM.asyncMeasure(),e=()=>{this.wo=!1,lm(),t()};this.produceEvent(new Eo(i=>dm(document,r=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:r})})))}onStop(){var t,e;this.wo=!1,(t=this.w)===null||t===void 0||t.cancel(),(e=this.W)===null||e===void 0||e.disconnect()}Ht(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=ot(e.target),i.targetProps=Y.getProperties(e.target)),[e,i]}eE(t){if(!this.sE(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Ht(t.type,t);i.attribute=e.attribute,i.isSvg=Ks(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=fi(e.target),i.linkRel=Oc(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?fi(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Ht(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?fi(e.target.parentElement):null,i.parentProps=e.target.parentElement?Y.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Ht(t.type,t);i.targetLocalName=gt(e.target)?fi(e.target):null,i.nextSibling=e.nextSibling?ot(e.nextSibling):null,i.previousSibling=e.previousSibling?ot(e.previousSibling):null,Lt.mutations.serializedMutations.measure(()=>{i.nodes=he(e.nodes,xr)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Ht(t.type,t);i.previousSibling=e.previousSibling?ot(e.previousSibling):null,i.nextSibling=e.nextSibling?ot(e.nextSibling):null,i.nodesIds=he(e.nodes,ot),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Ht(t.type,t);i.nodesIds=he(e.nodes,ot),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Ht(t.type,t);i.shadowRoot=vi(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Ht(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Ht(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Ht(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Ht(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Ht(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Ht(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Ht(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Ht(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Ht(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Ht(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}bo(t){return this.wo&&!Y.getProperty(t,Si)}sE(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.bo(t.target)||U.isMaskedElement(t.target)||U.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.bo(e)||U.isMaskedElement(e)||U.isMaskedElementChild(e))}case"attributeChanged":return this.bo(t.target)||U.isMaskedElementChild(t.target)||U.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.bo(t.target)||U.isMaskedElementChild(t.target);default:return!1}}}return s})(),Oi=(()=>{let s;return function(n){function t(e){return e.type==="DomEvent"}n.isDOMEvent=t}(s||(s={})),s})(),ti=(()=>{class s{constructor(){this.le=[]}start(){}stop(){this.le.length=0,this.le=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.le;csSetTimeout(()=>{let r=Ue("Processor:processEvent",o=>this.processEvent(o))(t);r!=null&&csArray.prototype.forEach.call(e,o=>o(r)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.le,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.le,t),()=>{this.le=csArray.prototype.filter.call(this.le,e=>e!==t)}}emitEvent(t){Wt(()=>csArray.prototype.forEach.call(this.le,e=>e(t)))}}return s.pendingEvents=0,s})(),Va=(()=>{class s{static async toStaticResourceEvent(t,e,i){let r=await s.iE(t);if(!r)return null;let o=await s.bd(r),c=Zt(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:r}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,r){let o=await s.nE(t,r),c=be(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(p=>{p&&csArray.prototype.push.call(h.nestedResources,{hash:p.hash,data:p.data})})),h}static async bd(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.Wn,e);return Or(i)}static async iE(t){let e;if(!Zt(t))e=await(await window.fetch(t)).blob();else{let i=pa(t);if(!i)return null;e=i}return e}static async nE(t,e){let i=new Map,r=be(t),c=[{resourceRawPath:t,resourceAbsolutePath:r}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!Zt(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let y=await fetch(l.resourceAbsolutePath);l.data=await y.text()}l.nestedResources||(l.nestedResources=Ei(l.data));let u=!1,m=!1;for(let y of l.nestedResources){let S=Zt(y)?y:l.resourceAbsolutePath?Jc(y,l.resourceAbsolutePath):be(y),C=i.get(S);if(C!==void 0){if(C!==null){let b=s.rE(C,y);l.data=ut.stringReplaceAll(l.data,y,b)}continue}ve(c,b=>b.resourceAbsolutePath===S)!==void 0||(u=!0,m||(csArray.prototype.push.call(c,l),m=!0),csArray.prototype.push.call(c,{resourceRawPath:y,resourceAbsolutePath:S}))}if(!u){let y=await s.oE(l.data);i.set(l.resourceAbsolutePath,{hash:y.hash,data:y.data})}}else{let u;if(!Zt(l.resourceAbsolutePath))u=await(await fetch(l.resourceAbsolutePath)).blob();else{let y=pa(l.resourceAbsolutePath);if(!y){i.set(l.resourceAbsolutePath,null);continue}u=y}let m=await s.bd(u);i.set(l.resourceAbsolutePath,{hash:m,data:u})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static rE(t,e){let i=`cs://resources/${t.hash}`;return Zt(e)||(i+=`?${s.Uc}=${e}`),i}static async oE(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),r=await crypto.subtle.digest(s.Wn,i);return{data:e,hash:Or(r)}}}return s.Wn="SHA-256",s.Uc="original-resource-name",s})(),Ws=(()=>{class s extends ti{constructor(){super(),this.Ao="cssrm://",this.he=0,this.fs=!1}isListening(t){return!s.isSupported()||!Oi.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.aE(t);break;case"attributeChanged":this.cE(t);break;case"characterDataChanged":this.lE(t);break}return t}disableOnlineAssets(){this.fs=!1}enableOnlineAssets(){this.fs=!0}isOnlineAssetsActivated(){return this.fs}aE(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)Y.traverse(i,(r,o)=>{if(r.nodeType===3&&o){this.hE(r,o.localName);return}if(!Hs.isElement(r))return;let c=ve(r.attributes,l=>l.name==="style");if(c&&(c.value=this.To(c.value)),this.uE(r)||this.dE(r,o)){let l=ve(r.attributes,p=>p.name==="src");l&&l.value&&(l.value=this.Ad(l.value));let h=ve(r.attributes,p=>p.name==="srcset");if(h){h.value=this.Td(h.value);return}}if(this.pE(r)&&this.fs){let l=ve(r.attributes,h=>h.name==="href");if(!l||!l.value)return;this.he++,this.Bi(be(l.value),this.he,!0),this.fE(r,l,this.he)}})}fE(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this.Ao+i}hE(t,e){if(!t||e!=="style")return;let i=this.To(t.data);i!==null&&(t.data=i)}lE(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.To(t.newValue);e!==null&&(t.newValue=e)}cE(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.To(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.Ad(t.newValue)),i&&(t.newValue=this.Td(t.newValue)))}Ad(t){return Zt(t)||this.fs?(this.he++,this.Bi(t,this.he,!1,D.now()),this.Ao+this.he):t}Td(t){if(!this.fs)return t;let e=t,i=yo(t),r=D.now();for(let o of i)this.he++,this.Bi(be(o),this.he,!1,r),e=csString.prototype.replace.call(e,o,this.Ao+this.he);return e}To(t){let e=Ei(t),i=t,r=D.now();for(let o of e){let c=Zt(o);if(!(c||this.fs)||this.gE(o))continue;this.he++,i=csString.prototype.replace.call(i,o,this.Ao+this.he);let l=Sn(o);c?this.Bi(o,this.he,!1,r):this.fs&&(l?this.Bi(o,this.he,!0,r):this.Bi(be(o),this.he,!1,r))}return i}Bi(t,e,i,r=D.now()){let o=i?Va.toCSSStaticResourceEvent:Va.toStaticResourceEvent,c=new Eo(async l=>{try{let h=await o(t,e,r,this.fs);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}});this.emitEvent(c)}uE(t){return t.localName==="img"}dE(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}pE(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return Wc()&&Tf()&&!!csArray.from}gE(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return je([Mt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),ne=(()=>{let s;return function(n){n.Visible="visible",n.Hidden="hidden",n.Blur="blur",n.PagehideVisible="pagehideVisible",n.PagehideHidden="pagehideHidden",n.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),Tl=(()=>{class s{constructor(){this.L=!1,this.Ls=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.ee(ne.Hidden):this.ee(ne.Visible);case"pagehide":return document.visibilityState==="hidden"?this.ee(ne.PagehideHidden):this.ee(ne.PagehideVisible);case"blur":return this.ee(ne.Blur);case"navigate":return this.mE(t)?this.ee(ne.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.L||(this.L=!0,this.Vc(),this.yE(),this.EE(),ma()&&this.SE())}stop(){this.L&&(this.L=!1,this.jc(),this.vE(),this._E(),ma()&&this.wE())}onEvent(t){this.ee=t}SE(){window.navigation.addEventListener("navigate",this.Ls)}wE(){window.navigation.removeEventListener("navigate",this.Ls)}Vc(){document.addEventListener("visibilitychange",this.Ls)}jc(){document.removeEventListener("visibilitychange",this.Ls)}yE(){window.addEventListener("pagehide",this.Ls)}vE(){window.removeEventListener("pagehide",this.Ls)}EE(){window.addEventListener("blur",this.Ls)}_E(){window.removeEventListener("blur",this.Ls)}mE(t){return t instanceof NavigateEvent?!t.downloadRequest&&!t.formData:!1}}return s})(),Ut=(()=>{let s;return function(n){n[n.Active=0]="Active",n[n.Paused=1]="Paused",n[n.Stopped=2]="Stopped"}(s||(s={})),s})(),pm=(()=>{class s{constructor(t,e,i=[]){this.Fi=t,this.Hc=e,this.bE=i,this.Ro=null,this.Tt=Ut.Active,this.tt=[]}reset(){this.Ro=null,this.tt=[],this.Tt=Ut.Active}disconnect(){this.Tt=Ut.Stopped}AE(){this.Hc(Ut.Paused),this.Tt=Ut.Paused,csSetTimeout(()=>{this.Tt===Ut.Paused&&this.Bc()},s.STOP_TIMEOUT)}TE(){this.Hc(Ut.Active),this.Tt=Ut.Active,W(this.tt,this.Fi),this.tt=[]}Bc(){this.tt=[],this.Hc(Ut.Stopped),this.Tt=Ut.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Ro=t.date,this.Tt!==Ut.Active)){this.TE(),this.Fi(t);return}if(this.RE(t)){this.Fi(t);return}switch(this.Tt){case Ut.Active:if(this.CE(t,e)){this.AE(),csArray.prototype.push.call(this.tt,t);return}this.Fi(t);break;case Ut.Paused:csArray.prototype.push.call(this.tt,t);break;case Ut.Stopped:break}}CE(t,e){return!e.isUserEvent&&this.Ro!==null&&t.date-this.Ro>s.INACTIVITY_TIMEOUT}RE(t){return csArray.prototype.indexOf.call(this.bE,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),fm=2e3,gm=(()=>{class s extends Et{constructor(t,e,i,r,o,c,l,h,p,u,m,y,S,C,M=[],b,v,k,I,R){super(),this.f=t,this.z=e,this.IE=i,this.He=r,this.Q=o,this.A=c,this.ue=l,this.pt=h,this.de=p,this.nt=u,this.B=m,this.Nt=y,this._t=S,this.ke=C,this.De=M,this.Rd=b,this.Bt=v,this.zi=k,this.Ke=I,this.gs=R,this.xs=0,this.Us=new mo,this.$i={allowFromQuotaService:!0,allowFromSerialization:!0},this.Cd=Nn(()=>{this.z.eventsCount()>0&&this.Id()},fm),this.ms=F=>this.processBrowserEvent(F),this.Yn=F=>this.Mt(F),this.Pd=0,this.Co=0,this.Be=new Tl,this.Fc=!1,this.Od=50*1024,this.mi=!1,this.Xn=!1,this.yi=[],this.Io=new pm(F=>this.X(F),F=>{switch(F){case Ut.Active:this.PE();break;case Ut.Stopped:this.OE();break}},[V.RESOURCE_HASHES,V.TEXT_VISIBILITY,V.API_ERROR,V.JAVASCRIPT_ERROR]),this.Nd=F=>{this.Nt.removeBatchInProgress(`${F.params.sn}.${F.params.pn}.${F.params.ri}`)}}init(){this.zc(),this.B.onLoad(this.Nd),this.B.onError(this.Nd)}PE(){csArray.prototype.forEach.call(this.Rd,t=>t.start())}OE(){csArray.prototype.forEach.call(this.Rd,t=>t.stopForInactivity())}zc(){var t,e,i;this.ke.onEvent(this.ms,this.Yn),(t=this.nt)===null||t===void 0||t.onInputNodeToEncrypt(this.Yn),(e=this.nt)===null||e===void 0||e.onApiErrorToEncrypt(r=>{this.Md(r)}),(i=this.nt)===null||i===void 0||i.onUserIdentifierToEncrypt(this.ms),this.Be.onEvent(r=>{if(csSetTimeout(()=>this.Ei("page-state",r)),r!==ne.Visible){if(r===ne.Blur)return this.kd();if(!this.Fc)return this.Fc=!0,csSetTimeout(()=>{this.Fc=!1}),r===ne.Hidden?this.kd():this.NE()}})}isRecording(){return this.A.hasValidSession()&&this.isStarted}kd(){if(!this.canSendEvents())return;this.ke.flush(),this.Nt.saveBatchesInProgress(),W(this.De,o=>{var c,l;return W((l=(c=o.getPendingEvents)===null||c===void 0?void 0:c.call(o))!==null&&l!==void 0?l:[],h=>this.z.addEvent(h))});let t=this.z.getEvents();if(t.length===0)return;this.Ei("pending-events",this.ke.pendingEvents);let e=this.B.getQueryParams();e.rst=this.getRecordingStartTimestamp(),e.let=this.getRecordingLastEventTimestamp();let i=this.He.getCurrentIndex();e.ri=i.toString(),this._t.removeQueryParams(),this._t.setQueryParams(e),this.Co=t[t.length-1].date;let r=this.z.stringifyEvents();if(r.length>this.Od){let o=this.Dd();if(o.length>0){let c=zs(o);this._t.send(c)||this.Nt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.He.increment()}if(this.z.eventsCount()>0){e.ri=this.He.getCurrentIndex().toString();let c=this.z.stringifyEvents();this.Nt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.He.increment()}}else this._t.send(r)||this.Nt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:r}),this.He.increment();this._t.removeQueryParams(),this.z.clearEvents()}NE(){if(!this.canSendEvents())return;this.ke.flush();let t=this.B.getQueryParams();this.Nt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this._t.removeQueryParams(),W(this.De,r=>{var o,c;return W((c=(o=r.getPendingEvents)===null||o===void 0?void 0:o.call(r))!==null&&c!==void 0?c:[],l=>this.z.addEvent(l))});let e=this.z.getEvents();if(e.length===0){delete t.let,delete t.rst,this._t.setQueryParams(t),this._t.send(),this._t.removeQueryParams();return}this.Ei("pending-events",this.ke.pendingEvents),this.Co=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this._t.setQueryParams(t);let i=this.z.stringifyEvents();if(i.length>this.Od){let r=this.Dd();if(r.length>0){let o=zs(r);this._t.send(o)||this.Nt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this._t.removeQueryParams(),this._t.setQueryParams(t),this._t.send(),this._t.removeQueryParams();if(this.z.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.He.getCurrentIndex();t.ri=o.toString();let c=this.z.stringifyEvents();this.Nt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:c}),this.He.increment()}}else this._t.send(i)||(this.Nt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.He.increment());this._t.removeQueryParams(),this.z.clearEvents()}blockSendingEventsFromQuotaService(){this.$i.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.$i.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.$i.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.$i.allowFromSerialization=!0}canSendEvents(){return this.$i.allowFromQuotaService&&this.$i.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.ue&&this.Ke){(e=this.ue)===null||e===void 0||e.anonymize(t);let i=this.Ke.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:D.now(),type:"JSError"});i&&this.ms(i)}}onIframeCustomError(t){if(this.gs){let e=this.gs.translate({...t,timestamp:D.now(),type:"CustomError"});e&&this.ms(e)}}onIframeDetailedApiError(t){this.Ld(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Mt(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.Q.isCurrentPageviewValid()&&this.Io.pushEvent(t,{isUserEvent:!1})}Mt(t){this.Q.refreshSession(),this.Q.isSessionValid()&&this.Io.pushEvent(t,{isUserEvent:!0})}X(t){Lt.general.nbEvents.increase(),this.z.addEvent(t),this.z.isThresholdReached()?this.pushEvents():this.z.isFull()&&this.Cd(),this.xd(t)}xd(t){this.f.emitDebugEvents&&this.Us.emit("recordingEvent",{...t,typeName:V[t.type]})}onStart(){var t;this.Ei("tag-version","15.115.0"),this.Ei("page-state",document.visibilityState),this.Io.reset(),this.Be.start(),this.initStates(),this.ke.start(),this.pt&&this.de&&this.pt.subscribe(s.xt,e=>this.Ld(e),{detailedEvent:!0}),this.f.emitDebugEvents&&this.Us.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.yi,e=>this.Ud(e)),this.yi=[],this.mi&&((t=this.Bt)===null||t===void 0||t.enableOnlineAssets(),this.mi=!1)}onStop(){var t;this.Be.stop(),this.pt&&this.pt.unsubscribe(s.xt),this.ke.stop(),this.Io.disconnect(),(t=this.Bt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.ke.flush(),this.Cd.cancel(),this.pushEvents(),this.B.removeQueryParams()}initStates(){this.Pd=D.now(),this.He.reset(),this.xs=0,this.B.setQueryParams(this.IE.getRequestParameters())}pushEvents(){W(this.De,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.z.eventsCount()>0&&(this.isStarted?this.Id():this.z.clearEvents())}Id(){if(!this.canSendEvents())return;let t=this.z.getEvents();this.Co=t[t.length-1].date;let e=this.He.getCurrentIndex();this.B.setQueryParams({ri:e.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});let i=this.B.getQueryParams();this.Nt.addBatchInProgress(`${i.sn}.${i.pn}.${e}`,this.B.getQueryParams(),t),this.B.send(t),this.He.increment(),this.z.clearEvents(),this.Vd&&this.Vd()}addInitialDom(t){this.z.addEventByTimestamp(t),this.xd(t)}Ld(t){if(this.zi&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.zi.truncate(t),this.nt){this.nt.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.Md(t)}Md(t){if(this.xs<s.ME){let e={type:V.API_ERROR,date:D.now(),args:[this.de.anonymize(t)]};this.ms(e),this.xs=this.xs+1,et.counters.networkRequests.count("collected")}}kE(t){t===os.ETR_SESSION?this.B.setQueryParams({[s.DE]:s.jd}):t===os.ETR_PAGE&&this.B.setQueryParams({[s.LE]:s.jd})}clearEvents(){this.z.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.Ke)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:D.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.ms(i)}onCustomErrorEvent(t){var e;let i=(e=this.gs)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:D.now(),message:t.message,attributes:t.attributes});i&&this.ms(i)}onPageEvent(t){this.Hd(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:D.now(),keyId:this.f.encryptionPublicKeyId};(e=this.nt)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.Ud({eventName:t,eventType:e}):csArray.prototype.push.call(this.yi,{eventName:t,eventType:e})}Ud(t){this.kE(t.eventType),this.Hd(t.eventName),this.pushEvents()}Hd(t){let e={type:V.PAGE_EVENT,date:D.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.xE)}]};this.z.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:D.now(),type:V.UNANONYMIZED_CONSENT_GRANTED};this.z.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:D.now(),type:V.UNANONYMIZED_CONSENT_WITHDRAWN};this.z.addEvent(t)}triggerRecordingForSessionGranted(){this.Ei("consent-granted")}triggerRecordingForSessionWithdrawn(){this.Ei("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.Xn=!0}getStaticResourceManagerStatus(){return this.Bt?{isStarted:this.f.useStaticResourceManager&&Ws.isSupported(),onlineAssets:{activated:this.Bt.isOnlineAssetsActivated(),enabledOnNextPageview:this.Xn}}:null}resetOnlineAssetsOnPageview(){this.mi=!1,this.Xn=!1}updateOnlineAssetsOnPageview(){this.Bt&&this.Xn&&(this.mi=!0,this.Xn=!1)}onRecordingRequestSent(t){this.Vd=t}getRecordingStartTimestamp(){return this.Pd.toString()}getRecordingLastEventTimestamp(){return this.Co.toString()}onOptOut(){W(this.De,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}Ei(t,e){if(!this.f.emitRecordInfoEvents)return;let i={date:D.now(),type:V.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.z.addEvent(i)}Dd(){return this.z.extractEvents(V.API_ERROR,V.JAVASCRIPT_ERROR,V.CUSTOM_ERROR,V.TEXT_VISIBILITY,V.POINTER_DOWN)}}return s.xt="RecordingService",s.xE=255,s.ME=20,s.LE="etrp",s.DE="etrs",s.jd="1",B([Mt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),mm=(()=>{class s extends Et{constructor(t,e,i){super(),this.Qt=t,this._t=e,this.B=i,this.$c=!1,this.Kn={},this.UE=r=>{if(r.length!==0)for(let o of r){let{metadata:c,events:l}=o;this.VE(c.rt)&&this.B.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.Kn={}}onStop(){}recover(){this.Qt.recover(this.UE)}addBatchInProgress(t,e,i){this.Kn[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.Kn[t]}blockSendingLastMessage(){this.$c=!1}allowSendingLastMessage(){this.$c=!0}sendLastMessageBeacon(){if(this.$c){let{ri:t,rst:e,let:i,...r}=this.B.getQueryParams();r.hlm="true",this._t.setQueryParams(r),this._t.send()}}VE(t){return!!t&&csString.prototype.indexOf.call(t,H.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.Kn),t=>{let{metadata:e,events:i}=this.Kn[t];this.Qt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Qt.save(t)}}return B([O("RecordingRecovery")],s.prototype,"recover",null),s})(),Ri=(()=>{class s{constructor(...t){this.Bd=t}addProvider(t){csArray.prototype.push.call(this.Bd,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Bd,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),Rl=(()=>{class s{constructor(t,e){this.Ot=t,this.N=e,this.Vs=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.D=t}start(){this.fi(),this.triggerInitialEvents()}stop(){this.gi()}fi(){csArray.prototype.forEach.call(this.Vs,t=>pt(t))}gi(){csArray.prototype.forEach.call(this.Vs,t=>ft(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:V.HASH_CHANGE,args:[this.N.anonymizePII(this.Ot.href)],date:D.now()};this.D(t)}visibilityChangeListener(){let t={type:V.VISIBILITY_CHANGE,args:[document.visibilityState],date:D.now()};this.D(t)}}return B([O("hashChange")],s.prototype,"hashChangeListener",null),B([O("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),Cl=(()=>{class s{constructor(){}onScannedAsset(t){this.Po=t}scanCssString(t){this.Gc(Ei(t))}scanElement(t,e){U.getMaskedElementDetails(t).state!==U.MaskedElementState.NotMasked||e&&U.isMaskedAttribute(t,e)||(Tn(t)?this.jE(t):to(t)?this.HE(t,e):(this.BE(t,e),this.FE(t,e),this.zE(t,e)))}HE(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:yl(t)};this.Po({type:"stylesheet",asset:o})}}jE(t){var e;let i=new Set;if(t.textContent)for(let o of Ei(t.textContent))i.add(o);let r;try{r=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||L.error(o.message)}if(r)for(let o=0;o<r.length;o++){let c=r.item(o).cssText;for(let l of Ei(c))i.add(l)}this.Gc(ls(i))}qc(t){return!this.$E(t)&&!Zt(t)&&!ml(t)}BE(t,e){if(gp(t)||fp(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.qc(i)){let r={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.Po({type:"asset",asset:r})}}(!e||e==="srcset")&&t.srcset&&this.GE(t.srcset)}}FE(t,e){if(t.nodeType!==1){mt.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}GE(t){this.Gc(yo(t))}zE(t,e){if((Sp(t)||vp(t)||_p(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.qc(i)){let r={assetId:be(i),assetRawPath:i,assetBasePath:window.location.href};this.Po({type:"asset",asset:r})}}}Gc(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.qc(e)),e=>({rawUrl:e,absoluteUrl:be(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.Po({type:"asset",asset:i})})}$E(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),ym=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.js=[],this.tt=[],this.qE=t}next(t){this.tt.length===this.qE&&csArray.prototype.shift.call(this.tt),csArray.prototype.push.call(this.tt,t),this.tt.length===1&&csSetTimeout(()=>this.clear());for(let e of this.js)e(t)}subscribe(t){if(ve(this.js,i=>t===i))return()=>{this.js=csArray.prototype.filter.call(this.js,i=>i!==t)};csArray.prototype.push.call(this.js,t);for(let i of this.tt)t(i);return()=>{this.js=csArray.prototype.filter.call(this.js,i=>i!==t)}}clear(){this.tt=[]}hasObservers(){return this.js.length>0}}return s})(),Il=(()=>{var s;class n{constructor(e){this.w=e}observe(){this.WE=s.Jn.subscribe(e=>this.w(e)),s.Oo||(s.Oo=!0,s.Qn.observe(),qt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.ys.add(i),s.Jn.next(i)}))}disconnect(){s.Oo&&(this.WE(),s.Jn.hasObservers()||(s.Oo=!1,s.Qn.disconnect(),s.Jn.clear(),s.ys.clear()))}}return s=n,n.ys=new kn,n.Jn=new ym,n.YE=Ts(t=>{Wt(()=>{for(let e of t)e.type==="childList"&&W(e.addedNodes,i=>{qt(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.ys.has(o)||(s.ys.add(o),s.Jn.next(o))})})})},"ElementObserver.findAllElements"),n.Oo=!1,n.Qn=new de(s.YE),tt([O()],n.prototype,"observe",null),tt([O()],n.prototype,"disconnect",null),n})(),Em=1,Sm=0,Pl=(()=>{class s{constructor(t,e=Em,i=Sm){this.XE=t,this.KE=e,this.JE=i,this.Fe=new Js,this.je=!1,this.Wc=0,this.Fd=()=>{for(this.Wc=0;this.Fe.length;){if(this.Wc>=this.KE){csSetTimeout(this.Fd,this.JE);return}let r=D.elapsed(),o=this.Fe.pop();if(!o)break;this.runTask(o);let c=D.elapsed()-r;this.Wc+=c}this.je=!1}}schedule(t,e=!1){if(!this.XE||e){t();return}Lt.general.pendingTasks.increase(),this.Fe.push(t),this.QE()}QE(){this.je||(this.je=!0,csSetTimeout(()=>{this.Fd()}))}runTask(t){Lt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Fe.forEach(t=>{this.runTask(t)}),this.Fe.clear()}clearQueue(){Lt.general.pendingTasks.clear(),Lt.mutations.pendingMutations.clear(),this.Fe.clear()}isEmpty(){return this.Fe.length===0}}return B([O("TaskScheduler"),Mt("runTask")],s.prototype,"runTask",null),B([Mt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),Ol=(()=>{class s{constructor(){this.G=!1,this.zd=new So(t=>t.type==="cssRuleInserted"&&this.ZE(t)),this.tS=Dn(t=>{this.G&&t.length>0&&this.I.schedule(()=>W(t,e=>this.Zn.scanElement(e)))}),this.eS=({type:t,asset:e})=>{var i,r,o;t==="stylesheet"&&((i=this.sS)===null||i===void 0||i.call(this,e)),(r=this.iS)===null||r===void 0||r.call(this,e);let c={date:D.now(),type:V.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.D)===null||o===void 0||o.call(this,c)},this.I=new Pl(!0,30,0),this.tr=new Il(t=>this.nS(t)),this.M=new de(t=>this.Mo(t)),this.Zn=new Cl,this.Zn.onScannedAsset(this.eS)}onEvent(t){this.D=t}onAsset(t){this.iS=t}onStyleSheetFound(t){this.sS=t}start(){this.G||(this.G=!0,this.zd.observe(),this.tr.observe(),this.M.observe())}stop(){this.G&&(this.zd.disconnect(),this.tr.disconnect(),this.M.disconnect(),this.G=!1)}ZE(t){!t.rule||!this.G||this.Zn.scanCssString(t.rule)}nS(t){this.G&&U.getMaskedElementDetails(t).state===U.MaskedElementState.NotMasked&&this.tS.push(t)}Mo(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.Zn.scanElement(e.target,e.attributeName);break;case"characterData":this.rS(e.target);break;case"childList":}})}rS(t){hn(t)&&csNodeparentNode.apply(t)&&Tn(csNodeparentNode.apply(t))&&this.Zn.scanCssString(t.data)}}return s})(),Nl=(()=>{class s{constructor(t){this.$d=[],this.Gd=[],this.Kt={},this.Jt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Kt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Kt[e]}):this.Kt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.$d,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Gd,t)}send(t){let e=Ti.toQuery({...this.Kt,ct:Pn.UNCOMPRESSED}),i=this.oS(e,t);return i?csArray.prototype.forEach.call(this.$d,r=>r()):csArray.prototype.forEach.call(this.Gd,r=>r(this.Kt)),i}oS(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Jt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Jt}?${t}`,e||"")}}return s})(),vm=(()=>{class s{constructor(t){this.ko={},this.Te=new go(t)}save({key:t,metadata:e,events:i}){this.Te.isThresholdReached()||(this.Te.addString(t),typeof i=="string"?this.Te.addString(i):this.Te.addArrayBuffer(i),!this.Te.isThresholdReached()&&(this.ko[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.aS(),i=>{let r=this.ko[i];r!==void 0&&(delete r.metadata.datatype,csArray.prototype.push.call(e,r),this.cS(i))}),e.length!==0&&(t(e),this.Te.reset())}aS(){return Object.keys(this.ko)}cS(t){delete this.ko[t]}}return s})(),ts=(()=>{let s;return function(n){n[n.NOT_STARTED=0]="NOT_STARTED",n[n.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",n[n.OPEN_FAILED=2]="OPEN_FAILED",n[n.READY=3]="READY"}(s||(s={})),s})(),_m=(()=>{class s{constructor(t,e,i){this.Gi=t,this.lS=i,this.Si=ts.NOT_STARTED,this.Do=[],this.Yc=0,this.hS=self.origin,this.Re=typeof window=="object"?"":"worker-",this.Te=new go(e),this.Xc()}async Xc(){await this.qd(),this.Si===ts.READY?this.uS():this.lS(this.Do)}uS(){csArray.prototype.forEach.call(this.Do,t=>{this.save(t)}),this.Do=[]}async save(t){try{if(this.Si===ts.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Do,t);return}if(this.Si!==ts.READY||this.Te.isThresholdReached())return;let{key:e,metadata:i,events:r}=t;if(this.Te.addString(e),typeof r=="string"?this.Te.addString(r):this.Te.addArrayBuffer(r),this.Te.isThresholdReached())return;await this.se.put(`${this.hS}/${e}`,new Response(r,{headers:i}))}catch{}}async recover(t){!this.se&&(await this.qd(),this.Si!==ts.READY)||this.dS(t)}async qd(){try{this.Si=ts.OPEN_IN_PROGRESS,this.se=await self.caches.open(`${this.Re}${this.Gi}`),this.Si=ts.READY}catch{this.Si=ts.OPEN_FAILED}}async dS(t){try{if(this.Yc++,this.Yc>1)return;let e=await this.se.keys();if(e.length===0)return;let i=await this.se.matchAll(),r=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((p,u)=>{l[u]=p}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(p=>({metadata:l,events:p})):c.arrayBuffer().then(p=>({metadata:l,events:p}))}),o=await Promise.all(r);await Promise.all(csArray.prototype.map.call(e,c=>this.se.delete(c))),t(o),this.Te.reset()}catch{}finally{this.Yc--}}}return s})(),wm=(()=>{class s{constructor(t){try{this.pS(t)}catch{this.Kc()}}pS(t){self.caches?this.fS(t):this.Kc()}save(t){this.Lo.save(t)}recover(t){this.Lo.recover(t)}fS(t){this.Lo=new _m(t,s.Wd,e=>{this.Kc(e)})}Kc(t){this.Lo=new vm(s.Wd),t&&csArray.prototype.forEach.call(t,e=>{this.Lo.save(e)})}}return s.Wd=1024*1024*16,s})(),hr=(()=>{let s;return function(n){n.REQUEST_START="requestStart",n.DOM_INTERACTIVE="domInteractive",n.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();var Ml=(()=>{class s extends ti{isListening(t){return Oi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let r of i){if(r instanceof Hs){let c=U.getMaskedAttributeDetails(r);r.attributes=this.Uo(r,c)}if(U.getMaskedElementDetails(r).state===U.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==r);continue}Y.traverse(r,c=>{if(c instanceof Hs){let l=U.getMaskedAttributeDetails(c);c.attributes=this.Uo(c,l);let h=U.getMaskedElementDetails(c);h.state===U.MaskedElementState.Parent&&(this.Qc(c,h),e++)}})}return e>0&&et.counters.sensitiveElements.count("masked-elements",e),t}Uo(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Qc(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),Hs.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return je([Mt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Se=(()=>{let s;return function(n){n.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",n.WHITELISTED_STATUS="whitelisted";function t(r){return Y.getProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP)===n.WHITELISTED_STATUS}n.isWhitelistedElement=t;function e(r){Y.setProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP,n.WHITELISTED_STATUS)}n.whitelistElement=e;function i(r){Y.setProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP,void 0)}n.removeWhitelistElement=i}(s||(s={})),s})(),bm=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Am="\uFF41",Tm=/[^\s]/g,Rm="a";function ur(s){let n=csString.prototype.replace.call(s,bm,Am);return csString.prototype.replace.call(n,Tm,Rm)}var Cm=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],kl=s=>{let n=new Set(Cm);return csArray.prototype.forEach.call(s,t=>{n.add(t)}),n},Im=["svg","slot"],Pm=(s,n,t)=>t==="radio"&&s==="input"&&n==="name"||csArray.prototype.indexOf.call(Im,s)>-1,Dl={href:new Set(["a"]),src:new Set(["iframe"])},Om=s=>Dl.hasOwnProperty(s),Nm=(s,n,t)=>{var e;return((e=Dl[n])===null||e===void 0?void 0:e.has(s))&&!Zt(t)},Mm=(s,n,t)=>(t==="submit"||t==="button")&&s==="input"&&n==="value",km=(()=>{class s{constructor(t,e,i,r=null){this.Je=t,this.wS=e,this.N=i,this.Vo=r,this.bS=kl(this.wS)}sanitize(t,e){return Y.traverse(t,(i,r)=>{if(i.anonymized=this.Je,i.nodeType===3){let{anonymizedValue:o,withAnonymization:c}=this.getAnonymizedValue(i.data,r?r==null?void 0:r.localName:e==null?void 0:e.targetLocalName,r?Y.getProperties(r):e==null?void 0:e.targetProps);i.anonymized=c,i.data=o;return}if(Hs.isElement(i))return this.AS(i);if(i.nodeType===4){i.data=this.Je?ur(i.data):this.N.checkAndAnonymizePII(i.data,this.Vo);return}}),t}setAnonymization(t){this.Je=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let r=(i==null?void 0:i[Se.ANONYMIZED_TEXT_STATUS_PROP])===Se.WHITELISTED_STATUS;return this.Je&&!r?{anonymizedValue:ur(t),withAnonymization:!0}:{anonymizedValue:this.N.checkAndAnonymizePII(t,this.Vo),withAnonymization:!1}}AS(t){if(Y.getProperty(t,"SVG"))return;let e=ve(t.attributes,r=>r.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,r=>(r.anonymized=this.Je,r.value=this.getAnonymizedAttributeValue(t.localName,r.name,r.value,i),r))}getAnonymizedAttributeValue(t,e,i,r){return this.TS(t,e,r)?i:Om(e)?Nm(t,e,i)?this.N.anonymizePII(i):i:this.Je&&Mm(t,e,r)?ur(i):this.Je?"":this.N.checkAndAnonymizePII(i,null)}TS(t,e,i){return Pm(t,e,i)||this.bS.has(e)}}return s})(),ja=(()=>{class s{static create(t,e){if(!s.isSupported())throw new Error("IntersectionObserver is not supported");if(e&&e.delay&&e.delay<100)throw new Error("Visibility delay should be > 100ms");return e!=null&&e.trackVisibility&&(t=s.RS(t)),new IntersectionObserver(t,e)}static isSupported(){return!!window.IntersectionObserver&&!!window.IntersectionObserverEntry}static RS(t){return(e,i)=>t(he(e,Dm),i)}}return s})();function Dm(s){return s.isVisible||!at.isVisibleInViewportInForeground(s.target)?s:{boundingClientRect:s.boundingClientRect,intersectionRatio:s.intersectionRatio,intersectionRect:s.intersectionRect,isIntersecting:s.isIntersecting,rootBounds:s.rootBounds,target:s.target,time:s.time,isVisible:!0}}var Ur=()=>(s,n,t)=>{t.value=xm(t.value)},Lm=csQueueMicrotask||csSetTimeout;function xm(s){let n=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var r;let o=(r=this)!==null&&r!==void 0?r:e;if(t=arguments,o[n])return;o[n]=!0,Lm(()=>{o[n]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=n,i}Ur.isScheduled=(s,n)=>{let t=n.oncePerTickSymbol;return s[t]};var Um=(()=>{class s{constructor(t){this.w=t,this.Hs=new Map,this.Yd=e=>{let i=e.target;if(this.Hs.has(i))return!0;let r=!1;return this.Hs.forEach((o,c)=>{r||!this.Hs.get(c).subtree||(r=c.contains(i))}),r},Lt.general.nbOfMutationObservers.increase(),this.M=new csMutationObserver(e=>{Ur.isScheduled(this,this.garbageCollect)&&(e=Ai(e,this.Yd)),e.length&&Wt(()=>t(e,this))})}disconnect(){Lt.general.nbOfMutationObservers.decrease(),this.M.disconnect(),this.Hs=new Map}takeRecords(){return this.M.takeRecords()}observe(t,e){return Lt.mutations.elementMutationObserved.increase(),this.Hs.set(t,e),this.M.observe(t,e)}unobserve(t){this.Hs.has(t)&&(Lt.mutations.elementMutationObserved.decrease(),this.Hs.delete(t),this.garbageCollect())}garbageCollect(){Lt.mutations.unobserveGarbageCollection.measure(()=>{let t=Ai(this.takeRecords(),this.Yd);t.length&&this.w(t,this),this.M.disconnect(),this.Hs.forEach((e,i)=>this.M.observe(i,e))})}}return tt([Ur()],s.prototype,"garbageCollect",null),s})(),Vm=(()=>{class s{constructor(t){this.w=t,this.jo=new Set}onMutations(t){if(gn(t,e=>{var i;return!!(!((i=e.removedNodes)===null||i===void 0)&&i.length)}))for(let e of this.jo.values())at.isConnected(e)||(this.jo.delete(e),this.w(e))}observe(t){this.W||(this.W=new de(e=>csSetTimeout(()=>this.onMutations(e))),this.W.observe()),this.jo.add(t)}disconnect(){var t;(t=this.W)===null||t===void 0||t.disconnect(),this.jo.clear(),this.W=void 0}}return tt([O("NodeDisconnectedObserver.onMutations")],s.prototype,"onMutations",null),s})(),jm=300,vn=(()=>{class s{constructor(t){this.Ho=new Set,this.CS=new Vm(e=>this.Xd(e)),this.G=!1,this.wt=t?{...Ha,...t}:Ha}stop(){var t,e;this.G=!1,(t=this.rr)===null||t===void 0||t.disconnect(),(e=this.M)===null||e===void 0||e.disconnect()}start(t){if(this.G)throw new Error("VisibilityObserver is already started");this.w=Ue("VisibilityObserver:callback",(i,r)=>t(i,r));let e={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:jm};this.rr=ja.create(i=>this.handleIntersection(i),e),this.M=new Um(i=>csSetTimeout(()=>{W(i,r=>this.Xd(r.target))})),this.Xc(),this.G=!0}observe(t){if(!this.G)throw new Error("Observer is stopped.");this.wt.reobserve===!1&&t[this.Zc]||(Lt.visibilityObserver.nbElements.increase(),t[this.Zc]=!0,this.watchIntersection(t))}Xc(){this.Bo=csSymbol("isVisible"),this.Zc=csSymbol("ObservedElement"),this.tl=csSymbol("LinkedElement"),this.Kd=csSymbol("Tracked")}Xd(t){this.Ho.add(t);for(let e of this.IS(t))this.Ho.add(e);this.recheckCssVisibilityAll()}recheckCssVisibilityAll(){W(this.Ho.keys(),t=>{!t.isConnected||at.areAncestorsHiddenByCSS(t)||t[this.Zc]&&this.watchIntersection(t)}),this.Ho.clear()}watchIntersection(t){this.M.unobserve(t),this.rr.unobserve(t);let e=at.getTopAncestorHiddenByCSS(t);e?(e!==t&&(this.Jd(e,t),this.watchMutation(e)),this.watchMutation(t)):this.rr.observe(t)}watchMutation(t,e=!0){e&&delete t[this.Bo],this.rr.unobserve(t);let i={attributeFilter:["style","class","hidden"]};this.M.observe(t,i)}handleIntersection(t){for(let e of t){let i=e.target;if(!e.isVisible){at.isVisibleInDocument(i)||this.PS(i);continue}let r=this.wt.allowSameMatch||!e.target[this.Bo];e.target[this.Bo]=!0,r&&!this.wt.delay&&this.onVisibilityChanged(e.target,_i.VisibleInViewPort)}this.wt.delay&&csSetTimeout(()=>{for(let e of t){let i=e.isIntersecting&&e.isVisible;e.target[this.Bo]&&i&&this.onVisibilityChanged(e.target,_i.VisibleInViewPort)}},this.wt.delay)}PS(t){Lt.visibilityObserver.hiddenElements.increase();let e=at.getTopElement(t);this.watchMutation(t),e&&(this.CS.observe(e),this.Jd(e,t),this.watchMutation(e,!1))}Jd(t,e){var i;(t[this.tl]=(i=t[this.tl])!==null&&i!==void 0?i:new Set).add(e)}IS(t){var e,i;let r=[],o=(i=(e=t[this.tl])===null||e===void 0?void 0:e.values())!==null&&i!==void 0?i:[];return W(o,c=>csArray.prototype.push.call(r,c)),r}onVisibilityChanged(t,e){if(e===_i.VisibleInViewPort&&this.wt.trackOnce){if(this.rr.unobserve(t),this.M.unobserve(t),t[this.Kd])return;t[this.Kd]=!0}this.w(t,e)}static isSupported(){return ja.isSupported()}}return tt([O()],s.prototype,"observe",null),tt([Cs({wait:50}),O(),Mt("recheckCssVisibilityAll")],s.prototype,"recheckCssVisibilityAll",null),tt([O()],s.prototype,"watchIntersection",null),tt([O()],s.prototype,"watchMutation",null),tt([O(),Mt("VisibilityObserver.handleIntersection")],s.prototype,"handleIntersection",null),tt([O()],s.prototype,"onVisibilityChanged",null),s})(),_i=(()=>{let s;return function(n){n.VisibleInViewPort="VisibleInViewPort",n.HiddenByAnother="HiddenByAnother",n.Hidden="Hidden"}(s||(s={})),s})(),Ha={delay:1e3,trackOnce:!0,reobserve:!1};var Ll=(()=>{let s;return function(n){n.ENCRYPTED_NODE_PROP="toEncrypt";function t(r){return Y.getProperty(r,n.ENCRYPTED_NODE_PROP)===!0}n.shouldEncrypt=t;function e(r){Y.setProperty(r,n.ENCRYPTED_NODE_PROP,!0)}n.markEncryptedNode=e;function i(r){Y.setProperty(r,n.ENCRYPTED_NODE_PROP,void 0)}n.unmarkEncryptedNode=i}(s||(s={})),s})(),ke=(()=>{let s;return function(n){n.EDITABLE_NODE_PROP="editableNode";function t(r){return Y.getProperty(r,n.EDITABLE_NODE_PROP)===!0}n.isEditableNode=t;function e(r){Y.setProperty(r,n.EDITABLE_NODE_PROP,!0)}n.markEditableNode=e;function i(r){Y.setProperty(r,n.EDITABLE_NODE_PROP,void 0)}n.unmarkEditableNode=i}(s||(s={})),s})();var Ba=(()=>{let s;return function(n){function t(e){return e.type==="TextVisibility"}n.isTextVisibilityEvent=t}(s||(s={})),s})(),xl=(()=>{class s extends ti{constructor(t,e,i,r=null){super(),this.N=i,this.Vo=r,this.Fo=new km(t,e,i,r)}setAnonymization(t){this.Fo.setAnonymization(t)}isListening(t){return Ba.isTextVisibilityEvent(t)||Oi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(Ba.isTextVisibilityEvent(t))return t.text=this.N.checkAndAnonymizePII(t.text,this.Vo),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.nl(t);break;case"attributeChanged":this.NS(t);break;case"characterDataChanged":this.MS(t);break}return t}nl(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let r of e)this.Fo.sanitize(r,i)}NS(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Fo.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}MS(t){t.newValue=this.Fo.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return je([Mt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var Ul=(()=>{class s extends ti{constructor(t){super(),this.Z=t}isListening(t){return Oi.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.Z.anonymizeUrl(t.initialDOM.baseURI)),t}}return je([Mt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),dr="textarea",Vl=(()=>{class s extends ti{isListening(t){return Oi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.DS(t);break;case"nodesAdded":this.LS(t);break;case"characterDataChanged":this.xS(t);break}return t}DS(t){Y.traverse(t.initialDOM,(e,i)=>{(this.tp(e,i)||this.ep(e))&&(e.data=this.rl(e.data))})}LS(t){for(let e of t.nodes)Y.traverse(e,(i,r)=>{(this.US(i,r,t)||this.ep(i))&&(i.data=this.rl(i.data))})}xS(t){var e;(t.parentLocalName===dr||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.rl(t.newValue))}rl(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}US(t,e,i){return this.VS(t,i)||this.tp(t,e)}VS(t,e){return t.nodeType===3&&e.targetLocalName===dr}tp(t,e){return t.nodeType===3&&K(e)&&e.localName===dr}ep(t){return t.nodeType===3&&ke.isEditableNode(t)}}return je([Mt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Hm=(()=>{class s{constructor(t){this.w=t,this.Ft={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.w=t}observe(){pt(this.Ft),this.wc()}wc(){this.resizeListener()}disconnect(){ft(this.Ft)}resizeListener(){let t={width:Ct.windowWidth(),height:Ct.windowHeight()};this.w(t)}}return tt([O("resize")],s.prototype,"resizeListener",null),s})(),is=(()=>{let s;return function(n){n.PORTRAIT="Portrait",n.LANDSCAPE="Landscape"}(s||(s={})),s})(),Xi=(()=>{let s;return function(n){n.PORTRAIT_PRIMARY="portrait-primary",n.PORTRAIT_SECONDARY="portrait-secondary",n.LANDSCAPE_PRIMARY="landscape-primary",n.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Ki=(()=>{let s;return function(n){n[n.PORTRAIT=0]="PORTRAIT",n[n.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",n[n.LANDSCAPE=-90]="LANDSCAPE",n[n.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),Bm=(()=>{let s;return function(n){let t=null;n.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=ht.screen)===null||c===void 0)&&c.orientation)},n.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in ht;function e(){return is.LANDSCAPE}function i(){var c;switch((c=ht.screen.orientation)===null||c===void 0?void 0:c.type){case Xi.PORTRAIT_PRIMARY:case Xi.PORTRAIT_SECONDARY:return is.PORTRAIT;case Xi.LANDSCAPE_PRIMARY:case Xi.LANDSCAPE_SECONDARY:return is.LANDSCAPE;default:return is.PORTRAIT}}function r(){switch(window.orientation){case Ki.PORTRAIT:case Ki.PORTRAIT_REVERSE:return is.PORTRAIT;case Ki.LANDSCAPE:case Ki.LANDSCAPE_REVERSE:return is.LANDSCAPE;default:return is.PORTRAIT}}function o(){return n.isScreenOrientationApiSupported()?i():n.isDeprecatedScreenOrientationApiSupported()?r():e()}n.getCurrentOrientation=o}(s||(s={})),s})(),Fm=(()=>{class s extends Ce{constructor(){super(...arguments),this.ol=null,this.al=null,this.Fs=new Hm(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=Bm.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.jS(t);if(e!==this.ol||i!==this.al){this.ol=e,this.al=i;let r={type:"screenResize",width:e,height:i};this.produceEvent(r)}}jS(t){let e,i,r=Ct.screenWidth(),o=Ct.screenHeight();return t===is.PORTRAIT?(e=r,i=o):(e=Math.max(r,o),i=Math.min(r,o)),{screenWidth:e,screenHeight:i}}onStart(){this.Fs.observe()}onStop(){this.ol=null,this.al=null,this.Fs.disconnect()}}return s})();function zm(s){let n=csEventtarget.apply(s);return n&&gt(n)&&csElementshadowRoot.apply(n)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:n}var ue=(()=>{class s{get selectors(){return this.$e===""?null:this.$e}constructor(t,e={closest:!1}){this.w=t,this.wt=e,this.$e="",this.or=new kn,this.Mo=Ts(i=>{if(this.$e==="")return;let r=[];for(let o of oo(i,c=>c.addedNodes)){if(!(bp(o)||this.wt.closest&&hn(o)))continue;let c=this.wt.closest?this.HS(o,this.$e):this.findMatchingElements(o,this.$e);ua(c,r)}r.length&&this.w(r,"added")},"SelectorObserver.processMutations"),this.BS=(i,r)=>{if(this.$e===""||r!=="added")return;let o=this.findMatchingElements(i,this.$e);o.length&&this.w(o,"added")},this.W=new de(this.Mo,this.BS)}observe(t){this.$e===""?this.W.observe():this.$e+=",",this.$e+=t;let e=this.findMatchingElements(document,t);for(let i of this.W.shadowRoots){let r=this.findMatchingElements(i,t);ua(r,e)}e.length&&(W(e,i=>{this.or.add(i)}),this.w(e,"initial"))}processPendingMutations(){this.Mo(this.W.takeRecords())}disconnect(){this.W.disconnect(),this.or.clear(),this.$e=""}HS(t,e){let i=[];if(hn(t)){if(t.parentElement){let r=qs(t.parentElement,e);r&&csArray.prototype.push.call(i,r)}return csArray.prototype.filter.call(i,r=>this.or.has(r)===!1)}else{if(xe(t)){let r=qs(t,e);if(r)return csArray.prototype.push.call(i,r),csArray.prototype.filter.call(i,o=>this.or.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=Fs(window.csquerySelectorAll[t.nodeType].call(t,e));return gt(t)&&Xt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,r=>this.or.has(r)===!1)}}return tt([O()],s.prototype,"observe",null),tt([O()],s.prototype,"disconnect",null),tt([Mt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),$m=(()=>{class s extends Ce{constructor(){super(),this.sp=t=>{let e=zm(t);e&&this.cl(e,t.type)},this.ce=new Zs((t,e)=>{switch(e){case"initial":case"added":this.ip(t);break;case"removed":this.np(t);break}}),this.F=new ue((t,e)=>{(e==="initial"||e==="added")&&this.FS(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&at.isConnected(t)&&!U.isMaskedElement(t)&&!U.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.ip(document),this.ce.observe(),this.F.observe("video")}onStop(){this.np(document),this.ce.disconnect(),this.F.disconnect()}cl(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let r=ot(t),o={type:"VideoEvent",videoEventType:i,nodeId:r};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),Lr(()=>this.produceEvent(o))}}FS(t){for(let e of t)this.cl(e,"seeked"),s.isPlaying(e)&&this.cl(e,"play")}ip(t){for(let e of["play","pause","seeked"])pt({type:e,listener:this.sp,boundElement:t})}np(t){for(let e of["play","pause","seeked"])ft({type:e,listener:this.sp,boundElement:t})}}return s})();function Gm(s){return s.nodeName==="SELECT"}function vo(s){return s.nodeName==="INPUT"}function qm(s){return s.nodeName==="TEXTAREA"||vo(s)&&!jl(s)&&!Hl(s)}function jl(s){return vo(s)&&s.type==="number"}function Hl(s){return vo(s)&&(s.type==="checkbox"||s.type==="radio")}var Bl=(()=>{class s extends Ce{constructor(t){super(),this.nt=t,this.ll=new zg("low"),this.qi=e=>this.inputHandler(e),this.vi=[],this.zS(),this.$S(),this.F=new ue(e=>{for(let i of e)this.ul(i)&&Wt(()=>{this.dl(i,ot(i))},"low")}),this.ce=new Zs((e,i)=>{switch(i){case"initial":case"added":pt({type:"change",listener:this.qi,boundElement:e});break;case"removed":ft({type:"change",boundElement:e,listener:this.qi});break}})}onStart(){pt({type:"keyup",boundElement:document,listener:this.qi}),pt({type:"change",boundElement:document,listener:this.qi}),W(this.vi,t=>t.activate()),this.F.observe(csArray.prototype.join.call(s.GS,",")),this.ce.observe()}onStop(){ft({type:"keyup",boundElement:document,listener:this.qi}),ft({type:"change",boundElement:document,listener:this.qi}),W(this.vi,t=>t.deactivate()),this.F.disconnect(),this.ce.disconnect(),this.ll.clear()}dl(t,e){var i,r,o;if(this.ll.has(t))return;if(this.ll.add(t),Gm(t)){let h={type:"InputEvent",inputType:"select",target:ot(t),selectedIndex:t.selectedIndex,timestamp:D.now()};this.produceEvent(h);return}if(Hl(t)){let h={type:"InputEvent",inputType:"checkable",target:ot(t),checked:t.checked,timestamp:D.now()};this.produceEvent(h);return}let c=qm(t),l=jl(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((r=this.nt)===null||r===void 0)&&r.shouldEncrypt(t)){(o=this.nt)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:D.now()});return}let p=l?"0":"\u2022",u={type:"InputEvent",inputType:"text",target:ot(t),value:csString.prototype.replace.call(h,/\S/g,p),timestamp:D.now()};this.produceEvent(u)}}inputHandler(t){if(!this.isStarted)return;let e=Pt(t),i=ot(e);!i||!this.ul(e)||at.isConnected(e)&&Wt(()=>{this.dl(e,i)},"low")}zS(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}$S(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let r=En(t.prototype,e,(o,c,l)=>{if(l!==c&&at.isConnected(o)){let h=i?o.parentElement:o;this.qS(h)}});r&&csArray.prototype.push.call(this.vi,r)}ul(t){return!U.isMaskedElement(t)&&!U.isMaskedElementChild(t)&&(Rn(t)||so(t)||eo(t))}qS(t){if(this.isStarted&&at.isConnected(t)){let e=ot(t);e&&this.ul(t)&&Wt(()=>{this.dl(t,e)},"low")}}}return s.GS=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],je([dt()],s.prototype,"inputHandler",null),je([O()],s.prototype,"trackChanges",null),s})();var Fl=(()=>{class s extends Ce{constructor(){super(),this.Es=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.WS=Ue("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)U.isMaskedElement(i)||U.isMaskedElementChild(i)||Tp(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=Dn(this.WS);this.tr=new Il(e=>t.push(e)),this.Bs=new Set}onStart(){this.Es&&this.tr.observe()}onStop(){this.Bs.clear(),this.tr.disconnect()}async register(t){this.Bs.has(t)||(this.Bs.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return je([O()],s.prototype,"register",null),s})(),Fa=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static rp(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.YS(t))}static YS(t){let i=t.getEntriesByType("navigation")[0];i&&(this._i=i,s.Wi(i))}static $n(t){this.XS(t),this._i&&t(this._i),this.Le||this.KS()}static XS(t){this.kt.add(t)}static JS(t){this.kt.delete(t)}static KS(){if(this.ar||(this.ar=this.rp()),!this.ar){this._i||(this._i={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Wi(this._i);return}this.ar.observe({type:"navigation",buffered:!0}),this.Le=!0}static Wi(t){this.kt.forEach(e=>e(t))}static qn(t){this.JS(t),this.kt.size===0&&this.ir()}static ir(){var t;this.Le&&((t=this.ar)===null||t===void 0||t.disconnect(),this.Le=!1,this._i=null,this.ar=this.rp())}constructor(t){this.w=t}observe(){s.$n(this.w)}disconnect(){s.qn(this.w)}}return s.Le=!1,s.kt=new Set,s._i=null,s})(),zl=(()=>{class s extends Ce{constructor(){super(...arguments),this.zo=null,this.op=new Fa(t=>{if(this.zo)return;let e=this.QS(t);e&&(this.zo=e,this.produceEvent(e))})}onStart(){if(this.zo){this.produceEvent(this.zo);return}this.op.observe()}onStop(){this.op.disconnect()}QS(t){let e=Fa.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:D.now()}}}return s})(),Rt=(()=>{let s;return function(n){n[n.TAP=0]="TAP",n[n.LONG_PRESS=1]="LONG_PRESS",n[n.DRAG=2]="DRAG",n[n.FLICK=3]="FLICK",n[n.PINCH_IN=4]="PINCH_IN",n[n.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Ji=(()=>{let s;return function(n){n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n[n.LEFT=3]="LEFT",n[n.RIGHT=4]="RIGHT"}(s||(s={})),s})(),Wm=(()=>{class s{compute(t,e){let i=this.zs(e.x)-this.zs(t.x),r=this.zs(e.y)-this.zs(t.y),o=e.time-t.time;return{duration:o,distance:this.ap(i,r),direction:this.ZS(i,r),velocity:this.sv(i,r,o)}}computePinchMetrics(t,e){let i=this.zs(e.x)-this.zs(t.x),r=this.zs(e.y)-this.zs(t.y);return{duration:e.time-t.time,distance:this.ap(i,r)}}getScale(t,e){return Math.abs(e/t-1)}zs(t){return t/window.devicePixelRatio}ap(t,e){return Math.round(Math.sqrt(t*t+e*e))}sv(t,e,i){let r=i/1e3,o=t/r,c=e/r;return Math.round(Math.abs(o)+Math.abs(c))}ZS(t,e){return Math.abs(t)>Math.abs(e)?t>0?Ji.RIGHT:Ji.LEFT:e>0?Ji.DOWN:Ji.UP}}return s})(),$l=typeof performance!="undefined"&&!!performance.now,za=$l?()=>performance.now():csDate.now,Ym=(()=>{var s;return $l?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),Qi={now(){return Math.round(za()+Ym)},elapsed(){return za()}};function $a(s,n=0){let t=Math.pow(10,n);return Math.round(s*t)/t}var Xm=1e3,Km=100,Jm=.1,Vr=(()=>{class s{constructor(){this.zt={},this.pl=()=>{},this.$o=new Wm,this.Ce()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.pl=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.iv(t))return;this.nv(t)&&this.Ce();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Qi.now()};if(t.touches.length===1)this.zt.startPinchTime=e.time,this.zt.firstTouch=e;else if(t.touches.length===2&&(this.zt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Qi.now()},this.zt.firstTouch&&this.zt.secondTouch)){let i=this.$o.computePinchMetrics(this.zt.firstTouch,this.zt.secondTouch);this.Yi=i.distance}csArray.prototype.push.call(this.cr,e),this.Go=Pt(t)}processActionMove(){this.gl=!0}processActionUp(t){if(this.rv(t)){if(csArray.prototype.push.call(this.cr,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Qi.now()}),this.ov(t)&&this.zt.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.zt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Qi.now()};this.zt.firstTouch&&(this.zt.firstTouch=e,this.zt.secondTouch=i),this.av(t)}this.Yi||this.cv()&&this.lv(t)}}Ce(){this.cr=[],this.Go=null,this.gl=!1,this.Yi=null,this.lr=!0}lv(t){let e=this.$o.compute(this.cr[0],this.cr[1]);this.lr=t.isTrusted;let i=this.gl?this.hv(e):this.uv(e);if(this.pv(i.type,t.changedTouches)){let r=t.changedTouches[0];i.pageX=$a(r.pageX,1),i.pageY=$a(r.pageY,1)}this.pl(i,t)}av(t){if(!(this.zt.firstTouch&&this.zt.secondTouch))return;let e=this.$o.computePinchMetrics(this.zt.firstTouch,this.zt.secondTouch);this.lr=t.isTrusted;let i=this.fv(e);i&&this.pl(i,t)}fv(t){return!this.Yi||this.$o.getScale(this.Yi,t.distance)<Jm?void 0:{type:this.Yi>t.distance?Rt.PINCH_IN:Rt.PINCH_OUT,target:this.Go,distance:t.distance,isTrusted:this.lr}}hv(t){return{type:t.velocity<Km?Rt.DRAG:Rt.FLICK,target:this.Go,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.lr}}uv(t){return{type:t.duration<Xm?Rt.TAP:Rt.LONG_PRESS,target:this.Go,isTrusted:this.lr}}pv(t,e){return t===Rt.TAP&&e&&e.length===1}nv(t){return t.touches.length===1}cv(){return this.cr.length===2}iv(t){return t.touches.length>0}rv(t){return t.changedTouches.length>0}ov(t){return this.gl&&!!this.Yi&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),Qm="touchstart",Zm="touchmove",ty="touchend",Gl=(()=>{class s{constructor(t){this.w=t}observe(){s.cp&&s.ml(this.w)}disconnect(){s.cp&&s.yl(this.w)}static gv(t,e){csArray.prototype.forEach.call(ls(s.kt),i=>i(t,e))}static ml(t){s.kt.has(t)||(s.kt.add(t),s.kt.size===1&&(s.ur.onGesture(s.gv),csArray.prototype.forEach.call(s.Vs,e=>pt(e))))}static yl(t){s.kt.delete(t),s.kt.size===0&&csArray.prototype.forEach.call(s.Vs,e=>ft(e))}static El(t){if(s.ur.isValidTouchEvent(t))switch(t.type){case"touchstart":s.ur.processActionDown(t);break;case"touchmove":s.ur.processActionMove();break;case"touchend":s.ur.processActionUp(t);break}}}return s.Vs=[{boundElement:ht.document,type:Qm,listener:n=>s.El(n)},{boundElement:ht.document,type:Zm,listener:n=>s.El(n)},{boundElement:ht.document,type:ty,listener:n=>s.El(n)}],s.cp=Vr.isGestureDetectionSupported(),s.kt=new Set,s.ur=new Vr,s})(),ql=(()=>{class s extends Ce{constructor(){super(),this.pr=new Gl(this.Sl.bind(this))}onStart(){this.pr.observe()}onStop(){this.pr.disconnect()}Sl(t){let e=this.mv(t);e&&this.produceEvent(e)}mv(t){if(!this.yv(t))return null;let e=Ag(t.target);return e?{type:"Gesture",targetId:e,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}yv(t){return t.target!==null&&!(gt(t.target)&&U.isMaskedElementChild(t.target))}}return s})(),Wl=(()=>{class s{constructor(t){this.w=t,this.$s=!1,this.Ft={boundElement:ht,type:"error",listener:e=>this.Ev(e)}}observe(){pt(this.Ft,this.$s)}disconnect(){ft(this.Ft,this.$s)}Ev(t){this.w(t)}}return s})(),ey=(()=>{class s extends Ce{constructor(){super(...arguments),this.lp=new Wl(t=>this.qo(t))}qo({message:t,filename:e,lineno:i,colno:r}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||Zt(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:r})}onStart(){this.lp.observe()}onStop(){this.lp.disconnect()}}return s})(),sy=(()=>{class s extends ti{constructor(t){super(),this.Sv=t,this.vl=1024,this._l=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=ut.truncate(t.message,this.vl,ut.ELLIPSIS),t.filename=ut.truncate(t.filename,this._l,ut.ELLIPSIS),this.Sv(t)}}return s})();var xs=[],jr=!1,Yl=Ts(ny,"executeTasks");function iy(s){if(csArray.prototype.push.call(xs,s),!jr){for(let n=0;n<3;n++)csSetTimeout(Yl);jr=!0}}function ny(){let s=csDate.now();for(let n=0;n<xs.length;n++)if(xs[n](),csDate.now()-s>=35){xs=csArray.prototype.slice.call(xs,n+1),csSetTimeout(Yl);return}xs=[],jr=!1}var es=(()=>{let s;return function(n){n[n.Started=0]="Started",n[n.Stopped=1]="Stopped",n[n.Processing=2]="Processing",n[n.Completed=3]="Completed"}(s||(s={})),s})(),Xl=(()=>{class s{constructor(){this.Ct=new Js,this.Tt=es.Stopped,this.w=null,this.up=t=>{this.Tt===es.Stopped||!t||(this.w(t),this.dp())}}get queueLength(){return this.Ct.length}start(t){if(this.w)throw new Error("callback already set");this.Tt=es.Started,this.w=t}push(t){this.Ct.push(t),this.Tl()}stop(){this.w=null,this.Tt=es.Stopped,this.Ct.clear()}static pipe(t,e){let i=t,r=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(r,l),W(i,h=>h.subscribe(p=>l.push(p))),i=[c]}let o=new ry(r);return W(i,c=>c.subscribe(l=>o.push(l))),o}pp(){return this.Tt===es.Stopped}Qe(){return this.Tt===es.Processing}dp(){if(!this.pp()){if(this.Ct.isEmpty){this.Tt=es.Completed;return}this.Tt=es.Processing,iy(()=>{let t=this.Ct.pop();t instanceof Eo?t.complete(this.up):this.up(t)})}}Tl(){this.pp()||this.Qe()||this.dp()}}return s})(),ry=(()=>{class s extends Xl{constructor(t){super(),this.fp=t}get queueLength(){return csArray.prototype.reduce.call(this.fp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),W(this.fp,t=>t.stop())}}return s})(),Kl=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.G=!1,this.kt=[]}get pendingEvents(){var t,e;return(e=(t=this.Ct)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.G)throw new Error("Recording is already started.");let t=this.kt;this.Ct=Xl.pipe(this.producers,this.processors),this.Ct.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),W(this.producers,e=>e.start()),W(this.processors,e=>e.start()),this.G=!0}stop(){this.Ct.stop(),this.kt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.G=!1,this.kt=[]}subscribe(t){if(this.G)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.kt,t),()=>this.kt=csArray.prototype.filter.call(this.kt,e=>e!==t)}}return s})(),Jl=(()=>{class s extends Ce{constructor(t){super(),this.De=t}subscribe(t){return super.subscribe(t)}onStart(){W(this.De,t=>{t.onEvent(e=>{var i;return this.Fi(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),W(this.De,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){W(this.De,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Fi(t,e){this.produceEvent({timestamp:D.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})();function oy(s,n,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,r={type:V.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(r);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{n({type:V.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)n({type:V.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{n({type:V.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:r,attribute:o,newValue:c}=s;n({type:V.MUTATION_ATTRIBUTE,date:e,args:[i,r,o,c]});break}case"characterDataChanged":{let{target:i,newValue:r}=s;n({type:V.MUTATION_CHARACTER_DATA,date:e,args:[i,r]});break}case"cssRuleInserted":{let{target:i,rule:r,index:o}=s,c=K(o)?[i,r,o]:[i,r];n({type:V.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:r}=s;n({type:V.STYLESHEET_RULE_DELETE,date:e,args:[i,r]});break}case"cssRuleUpdated":{let{target:i,rule:r,index:o}=s;n({type:V.STYLESHEET_RULE_UPDATE,date:e,args:[i,r,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:r}=s;n({type:V.STYLESHEET_DISABLED,date:e,args:[i,r]});break}case"shadowRootAttached":{let{target:i,shadowRoot:r}=s;n({type:V.ATTACH_SHADOW,date:e,args:[i,r]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:r,disabled:o}=s;n({type:V.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:r,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:r}=s;n({type:V.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,r]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:r,index:o}=s,c=K(o)?[i,r,o]:[i,r];n({type:V.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:r}=s;n({type:V.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,r]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:r,index:o}=s,c=[i,r,o];n({type:V.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:r}=s,o=[i,r];n({type:V.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:L.error("translateDOMEvent: DOMEvent not supported");break}}function ay(s){let n=cy(s.data);return{type:V.GESTURE_RECOGNITION,args:[s.targetId,n],date:s.timestamp}}function cy(s){let n={type:ly(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(n[t]=e)}return n}function ly(s){switch(s){case Rt.DRAG:case Rt.FLICK:return di.SWIPE;case Rt.LONG_PRESS:return di.LONG_PRESS;case Rt.TAP:return di.TAP;case Rt.PINCH_IN:return di.PINCH_IN;case Rt.PINCH_OUT:return di.PINCH_OUT}}function hy(s,n){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===n.batchSize){this.flush();return}n.autoFlushDelay&&n.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},n.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var uy=20;function dy(s){return hy(n=>{let t={visibleInViewPort:n},e={type:V.TEXT_VISIBILITY,date:D.now(),args:[t]};s(e)},{batchSize:uy,autoFlushDelay:1e3})}function py(s){return{type:V.PERFORMANCE_TIMINGS,args:[{performanceTiming:hr.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:hr.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:hr.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function fy(s){switch(s.inputType){case"text":return{type:V.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:V.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:V.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var gy=500,pr=0;function my(){return{processEvent(s,n){if(s.originalEvent.type===V.PERFORMANCE_RESOURCE_TIMING)return pr>=gy?null:(pr+=1,n({...s.originalEvent,date:s.timestamp}));n(s.originalEvent)},reset(){pr=0}}}function yy(s){switch(s.videoEventType){case"play":return{type:V.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:V.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let n=s;return{type:V.VIDEO_SEEK,args:[n.nodeId,n.newTimePositionInSec],date:s.timestamp}}default:return null}}var Ql=(()=>{class s{get pendingEvents(){return this.Wo.pendingEvents}constructor(t,e,i,r,o){this.Wo=t,this.S=e,this.Ie=i,this.Ke=r,this.gs=o,this.ie=()=>{},this.Yo=()=>{},this.gp=dy(c=>this.ie(c))}start(){var t,e;this.mp=my(),this.Wo.subscribe(i=>{var r,o,c,l,h,p;let u=i,{timestamp:m}=u;switch(u.type){case"Legacy":{let y=u.eventType==="user"?(r=this.Yo)!==null&&r!==void 0?r:()=>{}:this.ie;this.mp.processEvent(u,y)}break;case"CustomElementRegistration":{this.ie({type:V.CUSTOM_ELEMENT_REGISTRATION,date:m,args:[u.tagName]});break}case"DomEvent":{oy(u,this.ie,this.S);break}case"InputEvent":{let y=fy(u);(o=this.Yo)===null||o===void 0||o.call(this,y);break}case"encryptedCharacterDataChanged":{let{target:y,rawData:S,encryptedData:C,encryptionMetadata:M}=u;this.ie({type:V.MUTATION_ENCRYPTED_CHARACTER_DATA,date:m,args:[y,S,C,M]});break}case"StaticResource":{let{url:y}=u;this.ie({type:V.STATIC_RESOURCE_URL,date:m,args:[y]});break}case"ResizeMaskedElement":{let{target:y,width:S,height:C}=u;this.ie({type:V.MUTATION_ATTRIBUTE,date:m,args:[y,"","style",`width:${S}px !important;height:${C}px !important;`]});break}case"Gesture":{let y=ay(i);(c=this.Yo)===null||c===void 0||c.call(this,y);break}case"TextVisibility":{this.gp.push(u.text);break}case"StaticResourceManagerEvent":{(l=this.Ie)===null||l===void 0||l.processEvent(u);break}case"screenResize":{let{width:y,height:S}=u,C={type:V.SCREEN_RESIZE,date:m,args:[y,S]};this.ie(C);break}case"viewportResize":{let{width:y,height:S}=u,C={type:V.RESIZE,date:m,args:[y,S]};this.ie(C);break}case"PerformanceTiming":{this.ie(py(u));break}case"CustomError":{let y=(h=this.gs)===null||h===void 0?void 0:h.translate(u);y&&this.ie(y);break}case"JSError":{let y=(p=this.Ke)===null||p===void 0?void 0:p.translate(u);y&&this.ie(y);break}case"VideoEvent":{let y=yy(u);y&&this.ie(y);break}case"warning":{L.warn(u.message);break}default:L.error(`WebRecorderEventTranslator: Event not supported (${u.type})`);break}}),this.S.emitInitialDomStart(),(t=this.Ke)===null||t===void 0||t.start(),(e=this.gs)===null||e===void 0||e.start(),this.Wo.start()}stop(){var t,e,i;this.reset(),this.flush(),this.Wo.stop(),(t=this.Ie)===null||t===void 0||t.flushEvents(),(e=this.Ke)===null||e===void 0||e.stop(),(i=this.gs)===null||i===void 0||i.stop()}flush(){this.gp.flush()}onEvent(t,e){var i;this.ie=t,this.Yo=e,(i=this.Ie)===null||i===void 0||i.onEvent(r=>this.ie(r))}reset(){this.mp.reset()}}return s})(),Zl=(()=>{class s{constructor(t=100){this.bv=t,this.Xo={},this.fr=null,this.Uc="original-resource-name"}onEvent(t){this.Av=t}processEvent(t){this.Tv(t.resourceId,t.resource.hash,t.originalResourceName),this.Rv(t)}flushEvents(){this.fr&&csClearTimeout(this.fr),this.yp()}onSendStaticResource(t){this.Rv=t}yp(){if(!Object.keys(this.Xo).length)return;let t={type:V.RESOURCE_HASHES,date:D.now(),args:[this.Xo]};this.fr=null,this.Xo={},this.Av(t)}Tv(t,e,i){let r=e;i&&(r+=`?${this.Uc}=${i}`),this.Xo[t]=r,!this.fr&&(this.fr=window.csSetTimeout(()=>this.yp(),this.bv))}}return s})(),Ey=(()=>{class s{constructor(t,e){this.S=t,this.A=e,this.gr=ie.ETR_DISABLED,this.Ko=ie.ETR_PENDING,this.Rl=!0}getEtrStatus(t){t===void 0&&(t=this.A.getSession());let e=t==null?void 0:t.etrStatus;return this.Ep()&&e===ie.ETR_SAVED_SESSION?e:this.gr}onEventTriggerRecording(t,e){switch(e){case os.ETR_PAGE:this.Sp(ie.ETR_SAVED_PAGE);break;case os.ETR_LEGACY:case os.ETR_SESSION:this.Sp(ie.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===H.RECORDING_TEMPORARILY?this.Rl=!0:this.Rl=!1,t===H.ANALYTICS_ONLY&&e===Gt.ETR_ON?this.vp(this.Ko):this.vp(ie.ETR_DISABLED)}vp(t){this.gr=t,this.Ko=ie.ETR_PENDING,this._p(t),this.S.emitRecordingContextChange()}Sp(t){this.Rl?Number(t)>Number(this.Ko)&&(this.Ko=t):this.Ep()&&Number(t)>Number(this.gr)&&(this.gr=t,this._p(t),this.S.emitRecordingContextChange())}_p(t){let e=this.A.getSession();e!==null&&e.etrStatus===ie.ETR_NOT_SAVED_SESSION&&t===ie.ETR_SAVED_SESSION&&(e.etrStatus=t,this.A.setSession(e))}Ep(){return this.gr!==ie.ETR_DISABLED}}return s})();function _n(s,n){let t,e,i,r,o=null,c=h=>{let p=D.elapsed();if(!h&&o!==null){let m=n-(p-o);if(m>0){e=window.csSetTimeout(c,m);return}}let u=p-i;e=null,o=null,i=null,r=s(u,...t)},l=(...h)=>{if(t=[...h],i){o=D.elapsed();return}return i=D.elapsed(),e=window.csSetTimeout(c,n),r};return l.flushPending=()=>{e&&(window.csClearTimeout(e),c(!0))},l.cancel=()=>{o=null,i=null,e&&(window.csClearTimeout(e),e=null)},l}var Sy=(()=>{let s;return function(n){n[n.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),vy=8*1024*1024,_y=(()=>{class s extends Et{constructor(t,e,i){super(),this.Ie=t,this.wp=e,this.et=i,this.Cl={},this.bp=new Set,this.Qe=!1}initState(){Wc()&&(this.xe=this.et.getRequestParameters(),this.Cv=`${this.wp}/exist?${Ti.toQuery(this.xe)}`,this.Iv=`${this.wp}/putTag?${Ti.toQuery(this.xe)}`,this.Ap=_n(async()=>{if(this.Qe){this.Ap();return}this.Qe=!0;try{await this.Pv()}finally{this.Qe=!1}},300),this.Ie.onSendStaticResource(t=>{this.Tp(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.Tp(t)}Tp(t){this.Rp(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.Rp(e.hash,e.data)})}Rp(t,e){this.bp.has(t)||(this.bp.add(t),this.Cl[t]=e,this.Ap())}async Pv(){let t=this.Cl;this.Cl={};let e=await this.Ov(t);if(!e.length)return;let i=this.Nv(e);await Promise.all(csArray.prototype.map.call(i,r=>window.fetch(this.Iv,{method:"POST",body:r})))}async Mv(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.xe.pid,filter:Sy.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.Cv,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async Ov(t){let e=[],i=await this.Mv(t);return csArray.prototype.forEach.call(i,r=>{let o=t[r];o?csArray.prototype.push.call(e,{hash:r,data:o}):L.warn("SRM: received unknown hash: "+r)}),e}Nv(t){let e=0,i=[new FormData];for(let r of t){let{data:o,hash:c}=r,l=i.length-1;if(e=e+o.size,e<vy)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),wy=(()=>{class s{constructor(t){this.Jo=t,this.mr=20,this.wi=0,this.L=!1}translate(t){if(this.wi>=this.mr)return this.Jo.stop(),null;this.wi+=1;let{filename:e,message:i,lineno:r,colno:o,timestamp:c}=t;return{type:V.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:r,colno:o}]}}start(){this.L||(this.wi=0,this.L=!0)}stop(){this.L=!1}}return s})();var by="csPersisted",Ga="v2/recording",th=["isRecording"],_o=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],eh=["replay:resourceManager:getStatus","cssrm:getStatus"],Ay=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,m,y,S,C,M,b,v,k,I,R,F,G){this.Gs=t,this.A=e,this.f=i,this.xe=r,this.E=o,this.N=c,this.Q=l,this.$t=h,this.ue=p,this.pt=u,this.de=m,this.ft=y,this.S=S,this.qs=C,this.Cp=M,this.ne=b,this.It=v,this.Z=k,this.zi=I,this.lt=R,this.yC=F,this.nt=G}init(){var t,e;let i=[],r=[];csArray.prototype.push.call(r,new Ml),this.yr=new xl(this.lt.shouldUseAnonymization(),this.f.whitelistedAttributes,this.N,this.f.anonymizeDigits),this.Ai();let o=new wm(by);this.kv(o);let c=new Og;this.z=new Pg;let l=new Ol;csArray.prototype.push.call(i,l),this.f.useStaticResourceManager&&Ws.isSupported()&&(this.Bt=new Ws,this.Ie=new Zl,this.Ip=new _y(this.Ie,this.f.getStaticResourceManagerUri(),this.xe),this.Cp.addListener(this.Ip),csArray.prototype.push.call(r,this.Bt));let h=new Ri(c,this.xe,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.A.getCollectStates(),",")})}),p=new Nl(`${this.f.getRecordingUri()}/${Ga}`);csArray.prototype.push.call(r,this.yr),csArray.prototype.push.call(r,new Ul(this.Z)),csArray.prototype.push.call(r,new Vl),this.Ti=new fl,this.Ti.init(),csArray.prototype.push.call(i,this.Ti),this.Nt=new mm(o,p,this.B),csArray.prototype.push.call(i,new Rl(window.location,this.N));let u=new Al,m=new Fm,y=new $m,S=new Bl(this.nt),C=new Fl,M=[m,this.$t,u,new Jl(csArray.prototype.filter.call(i,I=>I)),C,new zl,new ql,S,y];this.f.jsErrorsEnabled&&(this.Jo=new ey,this.Lv=new sy(I=>this.ue.anonymize(I)),this.Ke=new wy(this.Jo),csArray.prototype.push.call(M,this.Jo),csArray.prototype.push.call(r,this.Lv));let b=new Kl(M,r),v=new Ql(b,this.S,this.Ie,this.Ke,this.gs),k=[u,m,y,S,C];this.recordingService=new gm(this.f,this.z,h,c,this.Q,this.A,this.ue,this.pt,this.de,this.nt,this.B,this.Nt,p,v,i,k,this.Bt,this.zi,this.Ke,this.gs),this.qs.addListener(this.recordingService),this.Cp.addListener(this.recordingService),this.recordingService.init(),this.E.register(th,()=>this.A.isReplayRecorded()&&!this.ne.isUrlExcludedForSessionReplay()),this.E.register(_o,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.S.emitRecordingContextChange()}),this.E.register(eh,()=>this.recordingService.getStaticResourceManagerStatus()),this.Er=new Ey(this.S,this.A),this.qs.addListener(this.Er),this.Gs.enableRecordingContext(this.recordingService,this.A,this.Er),this.Il()}onAfterNaturalPageView(){var t;this.ne.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Ip)===null||t===void 0||t.initState()}onStartTracking(){this.Nt.recover(),this.Ai(),this.A.isReplayRecorded()&&!this.ne.isUrlExcludedForSessionReplay()&&(this.A.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Pl())}onArtificialPageViewEnd(){this.A.isReplayRecorded()&&!this.ne.isUrlExcludedForSessionReplay()&&!this.A.isTemporarilyRecorded()&&this.Nt.sendLastMessageBeacon(),this.recordingService.clearStates()}onAfterArtificialPageView(){this.Ai(),this.A.isReplayRecorded()&&!this.ne.isUrlExcludedForSessionReplay()?(this.A.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.xv()):(this.recordingService.resetOnlineAssetsOnPageview(),this.Xi())}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.Xi()}onOptout(){this.Xi(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.Ai(),this.recordingService.triggerUnanonymizationConsentGranted(),this.S.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.Ai(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.S.emitRecordingContextChange()}onCollectStateChange(t,e){t===H.QUOTA_REACHED||t===H.ANALYTICS_ONLY&&e===Gt.ETR_OFF?(this.recordingService.clearEvents(),this.Xi()):(this.B.setQueryParams({rt:csArray.prototype.join.call(this.A.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.Er.onCollectStateChange(t,e))}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Nt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Nt.allowSendingLastMessage(),this.Ti.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.A.isReplayRecorded()&&!this.ne.isUrlExcludedForSessionReplay()&&(this.A.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Pl(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.Xi())}Il(){var t,e,i,r;if(!((e=(t=this.f.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let o=(r=(i=this.f.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.filterByHostSelector;W(o,c=>{Nt(c)&&de.setShadowRootFilter(l=>{try{return Xt.call(l.host,c)}catch{return!1}})})}}Pl(){this.recordingService.start(),this.Nt.start(),this.S.emitRecordingContextChange()}Xi(){bg(),this.recordingService.stop(),this.Nt.stop(),this.S.emitRecordingContextChange()}xv(){this.Xi(),this.Pl()}kv(t){let e="byteArray";this.B=this.It.create(`${this.f.getRecordingUri()}/${Ga}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}Ai(){var t;let e=this.lt.shouldUseAnonymization();this.yr.setAnonymization(e),(t=this.Dv)===null||t===void 0||t.setAnonymization(e)}}return B([Mt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),B([Mt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),gi=(()=>{let s;return function(n){n[n.NOT_NEEDED=1]="NOT_NEEDED",n[n.NOT_EXPRESSED=2]="NOT_EXPRESSED",n[n.WITHDRAWN=3]="WITHDRAWN",n[n.GRANTED=4]="GRANTED"}(s||(s={})),s})(),rs=(()=>{let s;return function(n){function t(r){return r.replayConsentRequiredForSession}n.isReplayConsentNeeded=t;function e(r){return r.collectState===H.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||r.collectState===H.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}n.isRecordingBlockedByConsent=e;function i(r){return r.collectState===H.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}n.isRecordingWithDrawn=i}(s||(s={})),s})(),Ty=(()=>{class s{constructor(t,e,i,r){this.O=t,this.A=e,this.f=i,this.Ze=r,this.Pp=!1}isNaturalPageViewSent(){return this.Pp}setNaturalPageViewSent(t){this.Pp=t}getTrackingContext(){let t=this.A.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.f.projectId,r=this.f.uxaDomain,o=t.pageNumber,c=this.Ze.getPageViewType(),l=this.A.isReplayRecorded(),h=this.Uv(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:r,recordingConsentState:h,...this.f.smbConfig}}getSessionKey(){let t=this.O.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Uv(t){return rs.isReplayConsentNeeded(this.f)?t.collectState===H.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?gi.NOT_EXPRESSED:t.collectState===H.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?gi.WITHDRAWN:gi.GRANTED:gi.NOT_NEEDED}}return s})(),Ry=(()=>{class s{constructor(t){this.bt=t,this.re=[]}handleCommand(t){if(Yt(t)&&(this.Sr(t),this.bt.isNaturalPageViewSent())){let e=this.bt.getTrackingContext();e!==null&&this.Ut(t,e)}}Sr(t){csArray.prototype.push.call(this.re,t)}executeRegisteredCallbacks(){let t=this.bt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.re,e=>this.Ut(e,t))}Ut(t,e){csSetTimeout(()=>{t(e)})}}return s})(),Cy=(()=>{class s{constructor(t){this.bt=t,this.Ri=[]}handleCommand(t){if(this.bt.isNaturalPageViewSent())return this.jv(t);this.vr(t)}jv(t){let e=this.bt.getSessionKey();return this.Op(t)&&e!==null&&this.Ut(t.callback,e),e}vr(t){this.Op(t)&&csArray.prototype.push.call(this.Ri,t.callback)}flushPendingCallbacks(){let t=this.bt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Ri,e=>{this.Ut(e,t)}),this.Ri=[]}Op(t){return t&&typeof t.callback=="function"}Ut(t,e){csSetTimeout(()=>{t(e)})}}return s})(),Iy=(()=>{class s{constructor(t,e){this.J=t,this.bt=e}onTrackingContextRequestCallback(t){let e=this.bt.getTrackingContext();e!==null&&this.J.sendToChildren(P.TrackingContextResultMessage,{...t,trackingContext:e})}onIframeIntegrationCallback(t){if(!this.bt.isNaturalPageViewSent())return;let e=this.bt.getTrackingContext();e!==null&&(t.trackingContext=e,this.J.sendToChildren(P.IntegrationCallback,t))}sendAfterPageViewCallbackToChildren(){let t=this.bt.getTrackingContext();if(t===null)return;let e={trackingContext:t,initiator:Gs.AfterPageView};this.J.sendToChildren(P.IntegrationCallback,e)}}return s})();function sh(s,n){let{isRecording:t,pageNumber:e,projectId:i,siteId:r,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,p,u]=l;r?h=`${c}/sites/${r}/player?uu=${p}&sn=${u}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${p}&sn=${u}&pvid=${e}&recordingType=cs`,n.withTimestamp&&(h+=`&t=${D.now()-n.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var Py=(()=>{class s{constructor(t){this.bt=t}handleCommand(t,e){te(t)&&Yt(e)&&this.Ut(t,e)}Ut(t,e){csSetTimeout(()=>{let i=this.bt.getTrackingContext();if(i){let r=sh(i,t);e(r)}})}}return s})(),ih=(()=>{class s{constructor(){this.re=new Set}handleCommand(t,e){return!Yt(t)||this.re.has(t)?null:(this.re.add(t),e&&(this.Re=e,this.Np(t,e)),()=>this.re.delete(t))}executeCallbacks(t){this.Hv(t)&&(this.Re=t,this.re.forEach(e=>this.Np(e,t)))}Np(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Hv(t){let{isRecording:e,recordingStartTimestamp:i,etrState:r,etrStatus:o,collectState:c}=t;return this.Re&&(this.Re.isRecording!==e||this.Re.recordingStartTimestamp!==i||this.Re.etrState!==r||this.Re.etrStatus!==o||this.Re.collectState!==c)}}return s})(),Ln=["afterPageView"],nh=["getSessionKey"],rh=["onRecordingContextChange","onRecordingStateChange"],oh=["replay:link:generate"],Oy=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.O=t,this.A=e,this.E=i,this.ht=r,this.J=o,this.f=c,this.Ze=l,this.Gs=h}init(){this.bt=new Ty(this.O,this.A,this.f,this.Ze),this.Ol=new Ry(this.bt),this.Mp=new Cy(this.bt),this._r=new ih,this.Bv=new Py(this.bt),this.Nl=new Iy(this.J,this.bt),this.ht.addListener(this.Nl),this.E.register(nh,t=>this.Mp.handleCommand(t)),this.E.register(Ln,t=>this.Ol.handleCommand(t)),this.E.register(rh,t=>this._r.handleCommand(t,this.Gs.getRecordingContext())),this.E.register(oh,(t,e)=>{this.Ki&&this.Bv.handleCommand({...t,recordingStartTimestamp:this.Gs.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){this.bt.setNaturalPageViewSent(!0),this.Mp.flushPendingCallbacks(),this.Ol.executeRegisteredCallbacks(),this.Nl.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){this.Ol.executeRegisteredCallbacks(),this.Nl.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this._r.executeCallbacks(this.Gs.getRecordingContext())}setRecordingService(t){this.Ki=t}}return B([Cs({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),Ny=512,My=255,wi=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,Ny),this.value=T(e)?csString.prototype.slice.call(e,0,My):e}static isKeyValid(t){return T(t)}static isValueValid(t){return T(t)||Le(t)}}return s})(),ky=(()=>{class s extends Et{constructor(t,e){super(),this.Gt=t,this.N=e,this.Ml=[]}onStart(){csArray.prototype.forEach.call(this.Ml,t=>this.kp(t.key,t.value)),this.Ml=[]}onStop(){}kp(t,e){let i=this.N.anonymizePII(t),r=Le(e)?e:this.N.anonymizePII(e);this.Gt.add(new wi(i,r))}trackDynamicVariable(t,e){if(wi.isKeyValid(t)&&wi.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Ml,{key:t,value:e});return}this.kp(t,e)}else throw new Error(`Command misuse: ${Ni[0]}`)}}return s})(),Dy=(()=>{class s{constructor(t){this.pe=t,this.Gt=[]}add(t){csArray.prototype.push.call(this.Gt,t),this.setBatchReadyCall()}clear(){this.Gt=[]}onBatchReady(t){this.Fv=t}getRequestParameters(){let t={};for(let e of this.Gt)t[e.key]=e.value;return{dv:this.pe.compressSync(csJSON.stringify(t),"base64"),ct:this.pe.algorithm}}setBatchReadyCall(){this.Fv()}}return B([Cs({wait:0,mode:"trailing"}),O("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),Ly="dvar",Ni=["trackDynamicVariable"],xy=(()=>{class s{constructor(t,e,i,r,o,c){this.E=t,this.A=e,this.f=i,this.xe=r,this.pe=o,this.N=c,this.us=new $s(this.f.getTrackerUri(),Ly),this.Gt=new Dy(this.pe),this.es=new ky(this.Gt,this.N)}init(){this.us.setRequestParametersProviders(this.xe,this.Gt),this.A.setDynamicVariablesService(this.es),this.Gt.onBatchReady(()=>this.us.send()),this.us.after(()=>this.Gt.clear()),this.E.register(Ni,({key:t,value:e}={})=>{this.es.trackDynamicVariable(t,e)})}onStartTracking(){this.es.start()}}return s})(),Hr=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),T(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return yt(t)&&Ot(t.revenue)&&T(t.currency)&&t.currency.length<=10&&(!yt(t.id)||T(t.id))}}return s})(),ah=100,Uy=100,Vy=(()=>{class s{constructor(t,e,i,r){this.id=t,this.name=e,this.price=i,this.quantity=r}static from(t){if(!s.kl(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return K(t.sku)&&(e.sku=t.sku),K(t.category)&&(e.category=t.category),K(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,ah)),e}static kl(t){return yt(t)&&T(t.id)&&T(t.name)&&Ot(parseFloat(t.price))&&Le(parseInt(t.quantity,10))&&(!K(t.sku)||T(t.sku))&&(!K(t.category)||T(t.category))&&(!K(t.merchant)||T(t.merchant))}}return s})(),ch=(()=>{class s extends Et{constructor(t,e,i){super(),this.N=t,this.Dp=e,this.Q=i,this.Dl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Dl,t=>{this.fe=t.transaction,this.wr=t.transactionItems,this.sendTransaction()}),this.Dl=[]}onStop(){}addTransaction(t){let e=this.N.anonymizeFields(t,["id"]);this.fe=Hr.from(e)}getTransaction(){return this.fe}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Dl,{transaction:this.fe,transactionItems:[...this.wr]}),this.clear();return}if(!(this.Dp===null||this.Q===null)&&(this.Q.refreshSession(),!!this.Q.isSessionValid())){if(!this.fe.hasValidRevenue()){L.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Dp.send()}}addItem(t){if(Yt(t))throw new Error(`Command misuse: ${ei[1]}`);let e=this.N.anonymizeFields(t,["id","name","sku","category"]),i=Vy.from(e);i!==null&&csArray.prototype.push.call(this.wr,i)}getItems(){return this.wr}clear(){this.fe=Hr.from({revenue:NaN}),this.wr=[]}getRequestParameters(){let t={id:this.fe.id?`${this.fe.id}`:"",revenue:`${this.fe.revenue}`};return K(this.fe.tax)&&(t.tax=`${this.fe.tax}`),K(this.fe.shipping)&&(t.shipping=`${this.fe.shipping}`),K(this.fe.currency)&&(t.cu=`${this.fe.currency}`),t.items=window.csJSON.stringify(this.wr),t}}return s})(),jy=(()=>{class s extends Et{constructor(t,e){super(),this.zv=t,this.Q=e,this.Pe=null,this.Ll=[]}onStart(){csArray.prototype.forEach.call(this.Ll,t=>{this.Pe=t,this.Lp()}),this.Ll=[]}onStop(){}addToCart(t){let e={};T(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Uy)),T(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,ah)),(e.sku||e.merchant)&&(this.Pe=e,this.Lp())}getCartItem(){return this.Pe}Lp(){if(!this.isStarted&&this.Pe!==null){csArray.prototype.push.call(this.Ll,this.Pe),this.clear();return}this.Q.refreshSession(),this.Q.isSessionValid()&&this.zv.send()}clear(){this.Pe=null}getRequestParameters(){if(!this.Pe)return{};let t={};return T(this.Pe.sku)&&this.Pe.sku.length>0&&(t.sku=this.Pe.sku),T(this.Pe.merchant)&&this.Pe.merchant.length>0&&(t.me=this.Pe.merchant),t}}return s})(),lh=["ecommerce:addToCart","ec:cart:add"],Mi=["ecommerce:addTransaction","ec:transaction:create"],ei=["ecommerce:addItem","ec:transaction:items:add"],ki=["ecommerce:send","ec:transaction:send"],Hy=(()=>{class s{constructor(t,e,i,r,o,c,l){this.f=t,this.et=e,this.O=i,this.E=r,this.N=o,this.Q=c,this.R=l}init(){let t=new $s(this.f.getTrackerUri(),"transaction"),e=new $s(this.f.getTrackerUri(),"addtocart");this.ss=new ch(this.N,t,this.Q),this.Qo=new jy(e,this.Q);let i=new Ri(this.et,this.O,this.R,this.ss);t.setRequestParametersProviders(i),t.after(()=>{this.ss.clear()});let r=new Ri(this.et,this.O,this.R,this.Qo);e.setRequestParametersProviders(r),e.after(()=>{this.Qo.clear()}),this.E.register(Mi,o=>{this.ss.addTransaction(o)}),this.E.register(ei,o=>this.ss.addItem(o)),this.E.register(ki,()=>this.ss.sendTransaction()),this.E.register(lh,o=>{this.Qo.addToCart(o)})}onStartTracking(){this.ss.start(),this.Qo.start()}}return s})(),By=(()=>{class s{constructor(t){this.Zo=t.performance}getRequestParameters(){if(this.$v())return{};let t=this.Gv();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}Gv(){let t=this.Zo.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}$v(){return!(this.Zo&&this.Zo.timing&&this.Zo.timing.loadEventEnd>0)}}return s})(),$t=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(r,o)=>o.enhanceAnalysisEvent(t,r),e)}}return s})(),q=(()=>{let s;return function(n){n[n.RESIZE=0]="RESIZE",n[n.SCROLL=1]="SCROLL",n[n.MOUSEMOVE=2]="MOUSEMOVE",n[n.MOUSEDOWN=3]="MOUSEDOWN",n[n.MOUSEUP=4]="MOUSEUP",n[n.CLICK=5]="CLICK",n[n.MOUSEOVER=6]="MOUSEOVER",n[n.MOUSEOUT=7]="MOUSEOUT",n[n.CHANGE=10]="CHANGE",n[n.FOCUSIN=11]="FOCUSIN",n[n.FOCUSOUT=12]="FOCUSOUT",n[n.TAP=14]="TAP",n[n.KEYDOWN=15]="KEYDOWN",n[n.KEYUP=16]="KEYUP",n[n.COMMAND=17]="COMMAND",n[n.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",n[n.PERFORMANCE=19]="PERFORMANCE",n[n.DRAG=20]="DRAG",n[n.FLICK=21]="FLICK",n[n.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",n[n.ZOOM=23]="ZOOM",n[n.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",n[n.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",n[n.DEAD_CLICK=30]="DEAD_CLICK",n[n.DEAD_ZOOM=31]="DEAD_ZOOM",n[n.PAGE_RELOAD=32]="PAGE_RELOAD",n[n.THRASHED_CURSOR=33]="THRASHED_CURSOR",n[n.BLANK_PAGE=34]="BLANK_PAGE",n[n.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",n[n.SUBMIT=36]="SUBMIT"}(s||(s={})),s})(),fr=(()=>{let s;return function(n){n.SUCCESS="success",n.FAILURE="failure",n.ATTEMPT="attempt"}(s||(s={})),s})();function Fy(s){return s.tgtHM!==void 0}function hh(s){return s.tgt!==void 0}function zy(s){return s.tgtLk!==void 0}function $y(s){return s.x!==void 0&&s.y!==void 0}function Gy(s){return s===fr.SUCCESS||s===fr.FAILURE||s===fr.ATTEMPT}var uh=(()=>{class s{constructor(t,e,i){this.oe=t,this.Vt=e,this.wt=i}processGesture(t,e){switch(t.type){case Rt.TAP:this.qv(e);break;case Rt.FLICK:this.Wv(t,e);break;case Rt.DRAG:this.Yv(t,e);break;default:break}}qv(t){let e={type:q.TAP,ts:0,x:0,y:0,tgt:""},i=$t.build(t,e,this.oe);i.tgt!==we.INVALID_ELEMENT&&this.D(i)}Yv(t,e){var i,r;let o={type:q.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.wt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((r=this.wt)===null||r===void 0)&&r.collectGestureVelocity&&(o.velocity=t.velocity);let c=$t.build(e,o,this.oe);c.tgt!==we.INVALID_ELEMENT&&this.D(c)}Wv(t,e){var i,r;let o={type:q.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.wt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((r=this.wt)===null||r===void 0)&&r.collectGestureVelocity&&(o.velocity=t.velocity);let c=$t.build(e,o,this.oe);c.tgt!==we.INVALID_ELEMENT&&this.D(c)}onEvent(t){this.D=t}start(){this.Vt.subscribe(s.xp,(t,e)=>this.processGesture(t,e))}stop(){this.Vt.unsubscribe(s.xp)}}return s.xp="AnalysisGestureTracker",B([dt()],s.prototype,"processGesture",null),s})(),dh=(()=>{class s{constructor(t,e,i,r=["submit"]){this.oe=t,this.mt=e,this.jt=i,this.Xv=r,this.Up="select, select *, input, textarea",this.Kv="select, select *, input, textarea",this.Vp="a, a *, button, button *, select, select *, input, textarea",this.br="input, select, textarea",this.Jv="form",this.ta=150,this.Qv=400,this.jp=!1,this.Ar=_n((o,c)=>this.scrollListener(o,c),this.ta),this.Hp=_n(o=>this.resizeListener(o),this.ta),this.Zv=Nn(o=>this.mouseMoveListener(o),this.Qv),this.t_=[{boundElement:window,type:"resize",listener:()=>this.Hp()},{boundElement:document,type:"scroll",listener:o=>this.Ar(o)},{boundElement:window,type:"mousemove",listener:o=>{this.Zv(yg(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.Bp=[{type:"change",listener:this.jt.on(this.Kv,o=>this.changeListener(o))},{type:"submit",listener:this.jt.on(this.Jv,o=>this.submitListener(o))}],this.e_=[{boundElement:document,type:"mouseover",listener:this.jt.on(this.Vp,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.jt.on(this.Vp,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.jt.on(this.Up,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.jt.on(this.Up,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.jt.on(this.br,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.jt.on(this.br,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.jt.on(this.br,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.jt.on(this.br,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.jt.on(this.br,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.Bp,o=>({...o,boundElement:document}))],this.V={},this.Lc=(o,c)=>{switch(c){case"initial":case"added":this.fi(o);break;case"removed":this.gi(o);break}},this.ce=new Zs(this.Lc),this._c()}fi(t){if(un(t)){let e=this.Fp();csArray.prototype.forEach.call(e,i=>pt(i))}else{let e=this.zp();csArray.prototype.forEach.call(e,i=>{pt({...i,boundElement:t})})}}gi(t){if(un(t)){let e=this.Fp();csArray.prototype.forEach.call(e,i=>ft(i))}else{let e=this.zp();csArray.prototype.forEach.call(e,i=>{ft({...i,boundElement:t})})}}onEvent(t){this.D=t}start(){this.ce.observe(),this.fi(document),this.resizeListener()}stop(){this.gi(document),this.ce.disconnect()}flushPendingDebouncedListeners(){this.Ar.flushPending(),this.Hp.flushPending()}$p(t){return csArray.prototype.some.call(this.Xv,e=>e===t)}zp(){return this.jt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.Bp,t=>!this.$p(t.type)):(L.warn("Element.matches is not implemented yet"),[])}Fp(){let t=[];return csArray.prototype.push.call(t,...this.t_),this.jt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.e_):L.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.$p(e.type))}resizeListener(t){let e=Vs.getScrollContainer(),i=xe(e);i&&(this.jp=!0);let r={type:q.RESIZE,ts:0,x:i?e.clientWidth:Ct.windowWidth(),y:i?e.clientHeight:Ct.windowHeight()};t!==void 0&&(r.d=t),this.D(r)}scrollListener(t,e){let i=Vs.isEventOnScrollContainer(e);!this.jp&&i&&this.resizeListener();let r={type:q.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:Ct.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:Ct.windowOffsetY(),d:t},o=$t.build(e,r,this.oe);this.D(o)}mouseMoveListener(t){let e={type:q.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=$t.build(t,e,this.oe);this.D(i)}mouseDownListener(t){let e={type:q.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=$t.build(t,e,this.oe);this.ge(i)}mouseUpListener(t){let e={type:q.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=$t.build(t,e,this.oe);this.ge(i)}clickListener(t){let e={type:q.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=$t.build(t,e,this.oe);this.ge(i)}mouseOverListener(t){let e={type:q.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=$t.build(t,e,this.oe);this.ge(i)}mouseOutListener(t){let e={type:q.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.mt.getEventTargetPath(t)},i=$t.build(t,e,this.oe);this.ge(i)}focusInListener(t){let e={type:q.FOCUSIN,ts:0,tgt:this.mt.getEventTargetPath(t)},i=$t.build(t,e,this.oe);this.ge(i)}focusOutListener(t){let e={type:q.FOCUSOUT,ts:0,tgt:this.mt.getEventTargetPath(t)},i=$t.build(t,e,this.oe);this.ge(i)}changeListener(t){let e={type:q.CHANGE,ts:0,tgt:""},i=$t.build(t,e,this.oe);this.ge(i)}submitListener(t){let e={type:q.SUBMIT,ts:0,tgt:""},i=$t.build(t,e,this.oe);this.ge(i)}copyListener(t){let e={type:q.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:js.COPY};this.ge(e)}cutListener(t){let e={type:q.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:js.CUT};this.ge(e)}pasteListener(t){let e={type:q.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:js.PASTE};this.ge(e)}keyUpListener(t){let e={type:q.KEYUP,ts:0,tgt:this.mt.getEventTargetPath(t),key:this.Gp(t)};this.ge(e)}keyDownListener(t){let e={type:q.KEYDOWN,ts:0,tgt:this.mt.getEventTargetPath(t),key:this.Gp(t)};this.ge(e)}Gp(t){let e=this.V[t.key];return e===void 0?X.ALPHANUMERICAL:e}ge(t){hh(t)&&t.tgt!==we.INVALID_ELEMENT&&this.D(t)}_c(){this.V[" "]=X.SPACE,this.V.Spacebar=X.SPACE,this.V.Enter=X.ENTER,this.V.Backspace=X.BACKSPACE,this.V.Delete=X.DELETE,this.V.ArrowUp=X.ARROWUP,this.V.ArrowDown=X.ARROWDOWN,this.V.ArrowLeft=X.ARROWLEFT,this.V.ArrowRight=X.ARROWRIGHT,this.V.Up=X.ARROWUP,this.V.Down=X.ARROWDOWN,this.V.Left=X.ARROWLEFT,this.V.Right=X.ARROWRIGHT,this.V.CapsLock=X.CAPSLOCK,this.V.Shift=X.SHIFT,this.V.Tab=X.TAB}}return B([O("Event handler type: resize")],s.prototype,"resizeListener",null),B([O("Event handler type: scroll")],s.prototype,"scrollListener",null),B([O("Event handler type: mouseMove"),dt()],s.prototype,"mouseMoveListener",null),B([O("Event handler type: mouseDown"),dt()],s.prototype,"mouseDownListener",null),B([O("Event handler type: mouseUp"),dt()],s.prototype,"mouseUpListener",null),B([O("Event handler type: click"),dt()],s.prototype,"clickListener",null),B([O("Event handler type: mouseOver"),dt()],s.prototype,"mouseOverListener",null),B([O("Event handler type: mouseOut"),dt()],s.prototype,"mouseOutListener",null),B([O("Event handler type: focusIn")],s.prototype,"focusInListener",null),B([O("Event handler type: focusOut")],s.prototype,"focusOutListener",null),B([O("Event handler type: change")],s.prototype,"changeListener",null),B([O("Event handler type: submit"),dt()],s.prototype,"submitListener",null),B([O("Event handler type: copy")],s.prototype,"copyListener",null),B([O("Event handler type: cut")],s.prototype,"cutListener",null),B([O("Event handler type: paste")],s.prototype,"pasteListener",null),B([O("Event handler type: keyup")],s.prototype,"keyUpListener",null),B([O("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),qy=(()=>{class s{constructor(){this.qp=100,this.Tr=0,this.Rr=Ct.documentHeight(),this.Wp={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.Tr=this.xl(Vs.getScrollContainer()).maxScrollRate}onEvent(t){this.D=t}start(){pt(this.Wp)}stop(){ft(this.Wp)}reset(){let t=Vs.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.xl(t);this.Rr=i,this.Tr=e,this.D()}xl(t){let e=0,i=0;if(t===null)i=Ct.documentHeight(),e=this.s_(i);else{let r=this.i_(t);i=this.Yp(t,r),e=this.n_(t,r)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Vs.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:r}=this.xl(e);(i>this.Tr||r>this.Rr)&&(this.Tr=i,r>this.Rr&&(this.Rr=r),this.D())}s_(t){let e=Math.round(this.r_()/t*100);return Math.min(e,this.qp)}r_(){let t=Ct.windowHeight();return Ct.windowOffsetY()+t}n_(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,r=this.Yp(t,e),o=Math.round(i/r*100);return Math.min(o,this.qp)}i_(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}Yp(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.Tr}`,mdh:`${this.Rr}`}}}return B([O("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})();var Wy=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,m,y,S,C,M,b,v,k,I,R,F){this.f=t,this.Ws=e,this.Vt=i,this.Ji=r,this.Ul=o,this.Ge=c,this.is=l,this.Xp=h,this.Q=p,this.Qt=u,this.K=m,this.Vl=y,this.Be=S,this.B=C,this.sa=M,this.Ss=b,this.vs=v,this.jl=k,this.Ci=I,this.Ii=R,this.Pi=F,this.Us=new mo,this.ia=!1}init(){var t,e,i,r,o,c,l;this.Ws.onEvent(h=>this.Mt(h)),this.Vt.onEvent(h=>this.Mt(h)),this.Ji.onEvent(()=>{let h=this.Ji.getRequestParameters();this.B.setQueryParams(h),this.is.setQueryParams(h)}),this.Vl.onEvent(h=>this.qe(h)),this.Hl(),(t=this.sa)===null||t===void 0||t.onEvent(h=>this.Mt(h)),(e=this.Ci)===null||e===void 0||e.onEvent(h=>this.Mt(h)),(i=this.Ss)===null||i===void 0||i.onEvent(h=>this.Mt(h)),(r=this.vs)===null||r===void 0||r.onEvent(h=>this.Mt(h)),this.o_(),(o=this.jl)===null||o===void 0||o.onEvent(h=>this.qe(h)),(c=this.Ii)===null||c===void 0||c.onEvent(h=>this.qe(h)),(l=this.Pi)===null||l===void 0||l.onEvent(h=>this.qe(h))}o_(){this.is.onBeaconSuccess(()=>{this.Ge.clearEvents()}),this.is.onBeaconFailure(t=>{this.a_(t)})}initStates(){let t=this.Xp.getRequestParameters(),e=this.Ul.getRequestParameters(),i=this.Ji.getRequestParameters();this.B.setQueryParams(t),this.B.setQueryParams(e),this.B.setQueryParams(i),this.is.setQueryParams(t),this.is.setQueryParams(e),this.is.setQueryParams(i),this.Bl()}clearStates(t){var e,i;this.Ws.flushPendingDebouncedListeners(),(e=this.Ss)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.vs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.Fl(),this.sendLastMessageBeacon()):this.sendEvents(),this.Ji.reset(),this.B.removeQueryParams()}start(t){var e,i,r,o,c,l,h;t||(e=this.jl)===null||e===void 0||e.start(),this.Be.start(),this.Ws.start(),this.Ji.start(),this.Vt.start(),(i=this.sa)===null||i===void 0||i.start(),(r=this.vs)===null||r===void 0||r.start(),t||this.Vl.start(),(o=this.Ss)===null||o===void 0||o.start(),(c=this.Ci)===null||c===void 0||c.start(),(l=this.Ii)===null||l===void 0||l.start(),(h=this.Pi)===null||h===void 0||h.start()}collectInitialEvents(){var t;(t=this.sa)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.qe(t)}onIframeAnalysisUserEvent(t){this.Mt(t)}onExternalEvent(t){this.X(t)}qe(t){this.Q.isCurrentPageviewValid()&&this.X(t)}Mt(t){this.Q.refreshSession(),this.Q.isSessionValid()&&this.X(t)}X(t){this.Ge.addEvent(this.c_(t)),this.Ge.isFull()&&this.sendEvents(),this.f.emitDebugEvents&&this.Us.emit("analysisEvent",{...t,typeName:q[t.type]})}c_(t){return t.ts=this.Oi(),t}Fl(){this.is.setQueryParams({hlm:"true"}),this.ia=!0}sendLastMessageBeacon(){this.is.setQueryParams(this.Ul.getRequestParameters()),this.is.send(this.Ge.stringifyEvents()),this.is.removeQueryParams(["hlm"]),this.ia=!1}sendEvents(){this.Ge.isEmpty()||(this.B.setQueryParams(this.Xp.getRequestParameters()),this.B.setQueryParams(this.Ul.getRequestParameters()),this.B.send(this.Ge.getEvents()),this.Ge.clearEvents())}stop(){var t,e,i,r,o,c,l;this.Be.stop(),this.Ws.stop(),this.Ji.stop(),this.Vt.stop(),this.Vl.stop(),(t=this.sa)===null||t===void 0||t.stop(),(e=this.Ss)===null||e===void 0||e.stop(),(i=this.vs)===null||i===void 0||i.stop(),(r=this.Ci)===null||r===void 0||r.stop(),this.Ge.empty(),(o=this.jl)===null||o===void 0||o.stop(),(c=this.Ii)===null||c===void 0||c.stop(),(l=this.Pi)===null||l===void 0||l.stop()}Bl(){this.ns=D.now()}Oi(){return D.now()-this.ns}Hl(){this.Be.onEvent(t=>{var e,i;t!==ne.Visible&&((e=this.Ss)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.vs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===ne.PagehideVisible?this.Fl():t===ne.PagehideHidden?(this.Fl(),this.sendLastMessageBeacon()):(!this.Ge.isEmpty()||this.ia)&&this.sendLastMessageBeacon())})}a_(t){try{(!this.Ge.isEmpty()||this.ia)&&this.Qt.save({requestParameters:t,events:this.Ge.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!Gy(t)||!xe(e))throw new Error(`Command misuse: ${Ro}`);let i={status:t,type:q.SUBMIT_COMMAND,ts:0,tgt:this.K.getElementPath(e)};i.tgt!==we.INVALID_ELEMENT&&this.qe(i)}}return s})(),Yy=(()=>{class s{constructor(t,e){this.Qt=t,this.B=e,this.Kp=()=>{document.visibilityState==="visible"&&this.Jp()}}start(){this.Jp(),this.Vc()}stop(){this.jc()}getRecoveryStorage(){return this.Qt}Jp(){let t=this.Qt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.B.send(i,e)}}Vc(){document.addEventListener("visibilitychange",this.Kp)}jc(){document.removeEventListener("visibilitychange",this.Kp)}}return s})(),Xy=(()=>{class s{constructor(t){this.Gi=t}save(t){localStorage.setItem(this.Gi,csJSON.stringify(t))}clear(){localStorage.removeItem(this.Gi)}recover(){let t=localStorage.getItem(this.Gi);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{L.error(`Invalid item in localStorage.
         (key:${this.Gi}; value:${t})`)}finally{this.clear()}return e}}return s})(),Ky=(()=>{class s{constructor(t){this.Cr=t,this.Ir=e=>this.processMetric(e),this.L=!1}onEvent(t){this.D=t}start(){this.L||(this.L=!0,this.Cr.onFCP(this.Ir),this.Cr.onCLS(this.Ir),this.Cr.onLCP(this.Ir),this.Cr.onTTFB(this.Ir),this.Cr.onINP(this.Ir))}stop(){this.L=!1}processMetric(t){if(!this.L)return;let e={type:q.PERFORMANCE,name:t.name,val:t.value,ts:0};this.D(e)}}return B([O("Performance metric handler")],s.prototype,"processMetric",null),s})(),ph=-1,si=s=>{addEventListener("pageshow",n=>{n.persisted&&(ph=n.timeStamp,s(n))},!0)},Te=(s,n,t,e)=>{let i,r;return o=>{n.value>=0&&(o||e)&&(r=n.value-(i!=null?i:0),(r||i===void 0)&&(i=n.value,n.delta=r,n.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(n.value,t),s(n)))}},wo=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},bo=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},Di=()=>{var n;let s=bo();return(n=s==null?void 0:s.activationStart)!=null?n:0},Re=(s,n=-1)=>{let t=bo(),e="navigate";return ph>=0?e="back-forward-cache":t&&(document.prerendering||Di()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:n,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},gr=new WeakMap;function Ao(s,n){return gr.get(s)||gr.set(s,new n),gr.get(s)}var Br=class{constructor(){Pe(this,"t");Pe(this,"i",0);Pe(this,"o",[])}h(n){var i;if(n.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&n.startTime-e.startTime<1e3&&n.startTime-t.startTime<5e3?(this.i+=n.value,this.o.push(n)):(this.i=n.value,this.o=[n]),(i=this.t)==null||i.call(this,n)}},Li=(s,n,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{n(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},To=s=>{let n=!1;return()=>{n||(s(),n=!0)}},Us=-1,qa=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,wn=s=>{document.visibilityState==="hidden"&&Us>-1&&(Us=s.type==="visibilitychange"?s.timeStamp:0,Jy())},Wa=()=>{addEventListener("visibilitychange",wn,!0),addEventListener("prerenderingchange",wn,!0)},Jy=()=>{removeEventListener("visibilitychange",wn,!0),removeEventListener("prerenderingchange",wn,!0)},fh=()=>{var s;if(Us<0){let n=Di(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>n)[0])==null?void 0:s.startTime;Us=t!=null?t:qa(),Wa(),si(()=>{setTimeout(()=>{Us=qa(),Wa()})})}return{get firstHiddenTime(){return Us}}},xn=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},Ya=[1800,3e3],gh=(s,n={})=>{xn(()=>{let t=fh(),e,i=Re("FCP"),r=Li("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(r.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-Di(),0),i.entries.push(c),e(!0)))});r&&(e=Te(s,i,Ya,n.reportAllChanges),si(o=>{i=Re("FCP"),e=Te(s,i,Ya,n.reportAllChanges),wo(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},Xa=[.1,.25],Qy=(s,n={})=>{gh(To(()=>{let t,e=Re("CLS",0),i=Ao(n,Br),r=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=Li("layout-shift",r);o&&(t=Te(s,e,Xa,n.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(r(o.takeRecords()),t(!0))}),si(()=>{i.i=0,e=Re("CLS",0),t=Te(s,e,Xa,n.reportAllChanges),wo(()=>t())}),setTimeout(t))}))},mh=0,mr=1/0,Zi=0,Zy=s=>{for(let n of s)n.interactionId&&(mr=Math.min(mr,n.interactionId),Zi=Math.max(Zi,n.interactionId),mh=Zi?(Zi-mr)/7+1:0)},Fr,Ka=()=>{var s;return Fr?mh:(s=performance.interactionCount)!=null?s:0},tE=()=>{"interactionCount"in performance||Fr||(Fr=Li("event",Zy,{type:"event",buffered:!0,durationThreshold:0}))},Ja=0,zr=class{constructor(){Pe(this,"u",[]);Pe(this,"l",new Map);Pe(this,"m");Pe(this,"p")}v(){Ja=Ka(),this.u.length=0,this.l.clear()}P(){let n=Math.min(this.u.length-1,Math.floor((Ka()-Ja)/50));return this.u[n]}h(n){var i,r;if((i=this.m)==null||i.call(this,n),!n.interactionId&&n.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(n.interactionId);if(e||this.u.length<10||n.duration>t.T){if(e?n.duration>e.T?(e.entries=[n],e.T=n.duration):n.duration===e.T&&n.startTime===e.entries[0].startTime&&e.entries.push(n):(e={id:n.interactionId,entries:[n],T:n.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(r=this.p)==null||r.call(this,e)}}},yh=s=>{let n=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(n(s=To(s)),document.addEventListener("visibilitychange",s,{once:!0}))},Qa=[200,500],eE=(s,n={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&xn(()=>{var c;tE();let t,e=Re("INP"),i=Ao(n,zr),r=l=>{yh(()=>{for(let p of l)i.h(p);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=Li("event",r,{durationThreshold:(c=n.durationThreshold)!=null?c:40});t=Te(s,e,Qa,n.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(r(o.takeRecords()),t(!0))}),si(()=>{i.v(),e=Re("INP"),t=Te(s,e,Qa,n.reportAllChanges)}))})},$r=class{constructor(){Pe(this,"m")}h(n){var t;(t=this.m)==null||t.call(this,n)}},Za=[2500,4e3],sE=(s,n={})=>{xn(()=>{let t=fh(),e,i=Re("LCP"),r=Ao(n,$r),o=l=>{n.reportAllChanges||(l=l.slice(-1));for(let h of l)r.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-Di(),0),i.entries=[h],e())},c=Li("largest-contentful-paint",o);if(c){e=Te(s,i,Za,n.reportAllChanges);let l=To(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>yh(l),{capture:!0,once:!0});si(h=>{i=Re("LCP"),e=Te(s,i,Za,n.reportAllChanges),wo(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},tc=[800,1800],Gr=s=>{document.prerendering?xn(()=>Gr(s)):document.readyState!=="complete"?addEventListener("load",()=>Gr(s),!0):setTimeout(s)},iE=(s,n={})=>{let t=Re("TTFB"),e=Te(s,t,tc,n.reportAllChanges);Gr(()=>{let i=bo();i&&(t.value=Math.max(i.responseStart-Di(),0),t.entries=[i],e(!0),si(()=>{t=Re("TTFB",0),e=Te(s,t,tc,n.reportAllChanges),e(!0)}))})},nE=(()=>{class s{onFCP(t){try{gh(t,{reportAllChanges:!0})}catch{et.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{Qy(t,{reportAllChanges:!0})}catch{et.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{sE(t,{reportAllChanges:!0})}catch{et.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{iE(t,{reportAllChanges:!0})}catch{et.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{eE(t,{reportAllChanges:!0})}catch{et.counters.webVitalsErrors.count("INP")}}}return s})();var Un=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),rE=(()=>{class s extends Un{constructor(){super(...arguments),this.supportedEventTypes=[q.CHANGE],this.M_=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=Pt(t);return Rn(i)&&csArray.prototype.indexOf.call(this.M_,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var Eh=(()=>{class s extends Un{constructor(t){super(),this.mt=t,this.supportedEventTypes=[q.MOUSEDOWN,q.MOUSEUP,q.CLICK,q.MOUSEOVER,q.TAP,q.DRAG,q.FLICK,q.SUBMIT,q.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.mt.getEventTargetPath(t)),e}}return s})(),ec=65535,oE=(()=>{let s;return function(n){function t(e){let i=Pt(e);if(!i||!gt(i)||!Yt(i.getBoundingClientRect)||!yt(e.pageX)||!yt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let r=i.getBoundingClientRect(),o=e.pageX-r.left-Ct.windowOffsetX(),c=e.pageY-r.top-Ct.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,r.width),h=Math.max(i.scrollHeight,r.height),p=Math.round(o/l*ec),u=Math.round(c/h*ec);return{xRel:p,yRel:u,valid:!0}}n.getRelativePosition=t}(s||(s={})),s})(),aE=(()=>{class s extends Un{constructor(t,e){super(),this.Ms=t,this.mt=e,this.supportedEventTypes=[q.MOUSEMOVE,q.CLICK],this.Jl=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:r,yRel:o}=oE.getRelativePosition(t);if(i){let c=this.mt.getEventTargetPath(t);c!==we.INVALID_ELEMENT&&(e.xRel=r,e.yRel=o,e.type===q.MOUSEMOVE&&(c!==this.Jl||this.Ms.iframesTracking?(this.Jl=c,e.tgtHM=c):e.tgtHM=""))}else e.type===q.MOUSEMOVE&&(this.Jl="");return e}}return s})(),Ht=(()=>{let s;return function(n){n[n.ANONYMIZED=0]="ANONYMIZED",n[n.CAPTURED=1]="CAPTURED",n[n.MASKED=2]="MASKED",n[n.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),sc=100,Sh=(()=>{class s extends Un{constructor(t,e,i){super(),this.f=t,this.ye=e,this.N=i,this.supportedEventTypes=[q.TAP,q.CLICK,q.SUBMIT]}k_(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),r=i.nextNode();for(;r;){if(e+=r.textContent,so(r.parentElement)||eo(r.parentElement)||this.ye.getElementSensitiveStatus(r.parentElement)!==Ht.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=sc)break;r=i.nextNode()}return!1}D_(t){let e=qs(t,"button,a");return e||(this.f.collectTargetText===Ir.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(xe(csEventtarget.apply(t))){let i=this.D_(csEventtarget.apply(t));if(i&&T(i.textContent)&&!this.k_(i)&&!this.N.hasPII(i.textContent,this.f.anonymizeDigits)){let r=ut.truncate(csString.prototype.trim.call(i.textContent),sc);r.length>0&&(e.text=r)}}return e}}return s})();function vh(s,n,t){let e=[];return s.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(e,new aE(s,n)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Sh(s,t,new Rs)),csArray.prototype.push.call(e,new rE,new Eh(n)),e}function _h(s,n,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Sh(s,t,new Rs)),csArray.prototype.push.call(e,new Eh(n)),e}var cE=50,lE=(()=>{class s{constructor(t=[]){this.Lt=t}stringifyEvents(){return csJSON.stringify(this.Lt)}addEvent(t){csArray.prototype.push.call(this.Lt,t)}eventsCount(){return this.Lt.length}clearEvents(){this.Lt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=cE}isEmpty(){return this.Lt.length===0}getEvents(){return this.Lt}}return s})(),hE="csAnalysisEventsPersisted",ic="v2/events",Ro=["submit"],uE=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,m,y){this.f=t,this.et=e,this.O=i,this.K=r,this.jt=o,this.E=c,this.Q=l,this.Vt=h,this.ht=p,this.It=u,this.it=m,this.ye=y}init(){let t=new lE,e=this.It.create(`${this.f.getTrackerUri()}/${ic}`,!0,"base64");this.aa=this.L_(e),this.Ue=this.x_(t,this.aa.getRecoveryStorage(),e),this.Ue.init(),this.it.addListener(this.Ue),this.ht.addListener(this.Ue),this.E.register(Ro,(i,r)=>{this.Ue.pushSubmitCommandEvent(i,r)})}onStartTracking(t){this.aa.start(),this.Ue.start(t)}onAfterNaturalPageView(){this.Ue.initStates()}onAfterArtificialPageView(){this.Ue.initStates(),this.Ue.collectInitialEvents()}onArtificialPageViewEnd(){this.Ue.clearStates(!0)}onBeforeSessionRenewal(){this.Ue.clearStates(),this.Ue.stop(),this.aa.stop()}onOptout(){this.Ue.stop(),this.aa.stop()}x_(t,e,i){var r;let o=new By(window),c=new qy,l=vh(this.f,this.K,this.ye),h=[];this.f.collectSubmit||csArray.prototype.push.call(h,"submit");let p=new dh(l,this.K,this.jt,h),u=_h(this.f,this.K,this.ye),m=new uh(u,this.Vt),y=new Ky(new nE),S=new Tl,C,M,b,v=new Nl(`${this.f.getTrackerUri()}/${ic}`),k=new Ri(this.et,this.O),I,R,F,G;return new Wy(this.f,p,m,c,o,t,v,k,this.Q,e,this.K,y,S,i,C,M,b,I,R,F,G)}L_(t){return new Yy(new Xy(hE),t)}}return s})(),an=(()=>{let s;return function(n){n.Artificial="a",n.Renewal="r",n.Natural="n"}(s||(s={})),s})(),dE=(()=>{class s extends Et{constructor(t,e,i,r,o){super(),this.S=t,this.it=e,this.Ql=i,this.R=r,this.Ze=o}init(){this.U_()}onStart(t){t?this.V_():this.j_()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.vf(t,e):yt(t)&&this.R.overridePath(t,e),this.isStarted||(this.it.emitTargetingRulesArtificialPageview(this.R.getUrl()),this.R.cleanupOverrideLifespan())}j_(){this.Ze.setPageViewType(an.Natural),this.S.emitBeforeNaturalPageView(),this.Ql.send(),this.R.cleanupOverrideLifespan(),this.S.emitAfterNaturalPageView()}V_(){this.Ze.setPageViewType(an.Renewal),this.S.emitBeforeNaturalPageView(),this.Ql.send(),this.S.emitAfterNaturalPageView()}vf(t,e){this.Ze.setPageViewType(an.Artificial),this.S.emitArtificialPageViewEnd(),yt(t)&&this.R.overridePath(t,e),this.S.emitBeforeArtificialPageView(),this.Ql.send(),this.R.cleanupOverrideLifespan(),this.S.emitAfterArtificialPageView()}U_(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.vf()})}}return s})(),pE=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function fE(){return{la:pE}}var gE=(()=>{class s{constructor(t,e){this.Z=t,this.ft=e,this.Zl=!1}getRequestParameters(){return{dr:this.th()}}addUrlMaskingPattern(t){this.ft.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Zl=!0}disableRemoveQueryString(){this.Zl=!1}th(){let t=this.Zl?this.Z.removeQueryString(this._f()):this._f();return this.Z.anonymizeUrl(t,{maskingPatterns:this.ft.getUrlMaskingPatterns()})}_f(){let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),mE=99999,yE=(()=>{class s{constructor(t){this.A=t,this.H_=this.B_()&&window.CSCurrentScript}F_(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.z_(e)?null:Math.round(e.responseEnd-e.fetchStart)}z_(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.H_||this.$_()!==1)return{};let t=this.F_();return t===null?{}:{dt:`${Math.min(t,mE)}`}}$_(){var t;return((t=this.A.getSession())===null||t===void 0?void 0:t.pageNumber)||null}B_(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),wh=":";function nc(s){let n=[],t=EE(s),e=csString.prototype.split.call(t,"/");for(let i of e)Ve(i,wh)?csArray.prototype.push.call(n,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(n,{key:i,value:null});return n}function EE(s){let n=s;return Ve(s,"/")&&(n=csString.prototype.substring.call(n,1)),Qs(s,"/")&&(n=csString.prototype.slice.call(n,0,-1)),n}var Co=(()=>{class s{constructor(){this.wf=new Set,this.bf=[],this.eh=new Set,this.ih=[]}addUrlMaskingPattern(t){if(this.wf.has(t))return;this.wf.add(t);let e=nc(t);csArray.prototype.push.call(this.bf,e)}getUrlMaskingPatterns(){return this.bf}resetPartialUrlMaskingPatterns(){this.eh.clear(),this.ih=[]}addPartialUrlMaskingPattern(t){if(this.eh.has(t))return;this.eh.add(t);let e=nc(t);csArray.prototype.push.call(this.ih,e)}getPartialUrlMaskingPatterns(){return this.ih}}return s})(),Vn=["trackPageview"],bn=["setPath"],An=["setQuery"],rc=["referrer:maskUrl"],SE=["referrer:removeQueryString"],vE=["referrer:keepQueryString"],_E=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,m,y,S,C,M){this.f=t,this.E=e,this.S=i,this.xe=r,this.O=o,this.A=c,this.Ee=l,this.At=h,this.Z=p,this.R=u,this.ne=m,this.Ze=y,this.it=S,this.Xs=C,this.nn=M}init(){var t;let e=new $s(this.f.getTrackerUri(),"pageview");this.rn=new dE(this.S,this.it,e,this.R,this.Ze);let i=new gE(this.Z,new Co);this.rn.init();let r=new Ri(this.xe,this.O,Ct,i,this.R,this.Ee,Zr,this.At,this.Ze,new yE(this.A),this.ne);this.Xs&&r.addProvider(this.Xs),this.nn&&r.addProvider(this.nn);let o=this.f.isCsCrosswritingHeap();if(o||this.f.isCsSideloadingHeap()||this.f.isHeapSideloadsCs()){let c=(t=this.f.heapEnvironment)===null||t===void 0?void 0:t.env_id;r.addProvider({getRequestParameters(){let l={cw:o?"1":"2"};return c&&(l.happid=c),l}})}e.setRequestParametersProviders(r),this.E.register(Vn,(c,l)=>{if(!T(c)){this.rn.triggerArtificialPageView();return}this.nh(l)?this.rn.triggerArtificialPageView(c,l):this.rn.triggerArtificialPageView(c)}),this.E.register(bn,(c,l)=>{if(!T(c))throw new Error(`Command misuse: ${bn[0]}`);this.nh(l)?this.R.overridePath(c,l):this.R.overridePath(c)}),this.E.register(An,(c,l)=>{if(!T(c))throw new Error(`Command misuse: ${An[0]}`);this.nh(l)?this.R.overrideQuery(c,l):this.R.overrideQuery(c)}),this.E.register(rc,c=>{if(!T(c))throw new Error(`Command misuse: ${rc[0]}`);i.addUrlMaskingPattern(c)}),this.E.register(SE,()=>i.enableRemoveQueryString()),this.E.register(vE,()=>i.disableRemoveQueryString())}start(t){this.rn.start(t)}onBeforeSessionRenewal(){this.rn.stop()}nh(t){return te(t)&&t!==null}}return s})(),bh=(()=>{class s{constructor(t){this.mt=t}on(t,e){return i=>{this.mt.hasValidEventTarget(i)&&this.G_(i,t)&&e(i)}}G_(t,e){let i=Pt(t);return Xt.call(i,e)}isMatchesSelectorSupported(){return!!Xt}}return s})(),Ah=(()=>{class s{constructor(){}onLoad(t){this.Hi=t}onLoadCallbackExecute(){this.Hi()}start(){let t=this.onLoadCallbackExecute.bind(this);this.q_(t)}q_(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return B([O("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),wE=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.A=i,this.ns=D.now()}resetStartTime(){this.ns=D.now()}getSessionData(){let{projectId:t}=this.f,e=this.O.getVisitor();e==null&&L.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:r}=e!=null?e:{},o=this.A.getSession();o===null&&L.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:r,pageNumber:c,relativeTimestamp:D.now()-this.ns}}}return s})(),Th=["clearSession"],Rh=["extendSession"];var bE=["getSessionData"],Ch=["session:start:newVisitor"],AE=["session:clear:visitor"],TE=(()=>{class s{constructor(t,e,i,r){this.f=t,this.O=e,this.A=i,this.E=r}init(){this.rh=new wE(this.f,this.O,this.A),this.E.register(Th,()=>this.A.removeSession()),this.E.register(Rh,()=>this.A.extendSessionPeriodically(),{disableApplyPending:!0}),this.E.register(bE,()=>this.rh.getSessionData(),{disableApplyPending:!0}),this.E.register(Ch,()=>this.O.renewVisitor()),this.E.register(AE,()=>{this.O.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.O.createOrUpdateVisitor(),this.A.createOrUpdateSession()}onBeforeArtificialPageView(){this.O.createOrUpdateVisitor(),this.A.createOrUpdateSession()}onAfterNaturalPageView(){this.rh.resetStartTime()}onAfterArtificialPageView(){this.rh.resetStartTime()}onOptout(){this.O.removeVisitor(),this.A.removeSession()}onCollectStateChange(t){this.A.updateCollectState(t)}}return s})(),RE=60*1e3,CE=30*1e3,IE=(()=>{class s{constructor(t,e){this.A=t,this.O=e,this.oh=!1,this.W_=Nn(()=>this.A.refreshSession(),CE)}onSessionExpired(t){this.Y_=t}isSessionValid(){return this.oh?!0:!(!this.A.hasValidSession()||this.A.pollCacheRefreshEvent()&&this.O.isSessionRenewed())}isCurrentPageviewValid(){let t=this.A.hasValidSession();return this.A.pollCacheRefreshEvent(!1)?!this.O.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.W_():this.X_()&&(this.Af=D.now(),this.renewSession())}renewSession(){this.oh=!0,this.Y_(),this.oh=!1}X_(){return!K(this.Af)||D.now()-this.Af>RE}}return s})();var As;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(As||(As={}));function Ih(s){return s.tagDeploymentMode===As.DualCollectionReview||s.tagDeploymentMode===As.DualCollection}function PE(s){return Ih(s)||s.tagDeploymentMode===As.LoadClicktalePtc}var oc=(()=>{let s;return function(n){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}n.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}n.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}n.triggerLogicalPageView=i;function r(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}n.sendPageEvent=r;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}n.sendEventTriggerRecording=o}(s||(s={})),s})();var OE="@ETP@",ac="@user-identifier@",NE=(()=>{class s extends Et{constructor(t,e,i,r){super(),this.f=t,this.Uw=e,this.pe=i,this.it=r,this.ch=[],this.yi=[]}onStart(){csArray.prototype.forEach.call(this.ch,t=>this.Vf(t)),this.ch=[],csArray.prototype.forEach.call(this.yi,t=>this.jf(t)),this.yi=[]}onStop(){}Vf(t){this.Vw(t)?bs.isSupported()&&this.jw(t):this.Hw(t)}trackPageEvent(t){if(!s.Hf(t))throw new Error(`Command misuse: ${jn[0]}`);this.isStarted?this.Vf(t):csArray.prototype.push.call(this.ch,t)}Vw(t){return Ve(t,ac)}async jw(t){if(!this.f.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,ac.length);if(e.length>bs.MAX_DIGEST_INPUT_SIZE){L.warn("UserIdentifier event: invalid user identifier");return}let i=await bs.digest(e);i?(this.Sn={eventName:i,isETR:!1,isCustomHashId:!0},this.fa()):L.warn("Page event: unable to compute customHashId"),this.f.encryptionEnabled&&this.it.emitUserIdentifierEvent(e)}Hw(t){this.it.emitPageEvent(t),this.Sn={eventName:t,isETR:!1,isCustomHashId:!1},this.fa(),this.f.tagDeploymentMode===As.LoadClicktalePtc&&oc.sendPageEvent(t)}jf(t){this.f.malkaEtrEnabled?this.Bw(t):this.Fw(t)}trackEventTriggerRecording(t){if(!s.Hf(t))throw new Error(`Command misuse: ${ii[0]}`);this.isStarted?this.jf(t):csArray.prototype.push.call(this.yi,t)}Bw(t){Ve(t,OE)?this.it.emitEventTriggerRecording(t,os.ETR_PAGE):this.it.emitEventTriggerRecording(t,os.ETR_SESSION),this.Sn={eventName:t,isETR:!0,isCustomHashId:!1},this.fa()}Fw(t){PE(this.f)&&(this.it.emitEventTriggerRecording(t,os.ETR_LEGACY),this.Sn={eventName:t,isETR:!0,isCustomHashId:!1},this.fa(),this.f.tagDeploymentMode===As.LoadClicktalePtc&&oc.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.pe.compressSync(this.Sn.eventName,"base64"),ct:this.pe.algorithm,isETR:`${this.Sn.isETR}`,isCustomHashId:`${this.Sn.isCustomHashId}`}}fa(){this.Uw.send()}static Hf(t){return T(t)&&!!csString.prototype.trim.call(t)}}return s})(),jn=["trackPageEvent"],ii=["trackEventTriggerRecording"],ME=(()=>{class s{constructor(t,e,i,r,o){this.f=t,this.E=e,this.pe=i,this.xe=r,this.it=o}init(){let t=new $s(this.f.getTrackerUri(),"pageEvent");this.ga=new NE(this.f,t,this.pe,this.it),t.setRequestParametersProviders(this.ga,this.xe),this.E.register(jn,e=>{this.ga.trackPageEvent(e)}),this.E.register(ii,e=>{this.ga.trackEventTriggerRecording(e)})}onStartTracking(){this.ga.start()}}return s})(),Io=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),Ph=(()=>{class s extends Io{constructor(){super(),this.W=new Wl(t=>this.errorListener(t))}onStartTracking(){this.W.observe()}onStopTracking(){this.W.disconnect()}errorListener(t){let e=this.zw(t);for(let i in this.subscriptions){let r=this.subscriptions[i];r(e)}}$w(t){return t=t!=null?t:"[NO ERROR MESSAGE]",ut.truncate(t,s.vl,ut.ELLIPSIS)}Gw(t){return!t||Zt(t)?"":ut.truncate(t,s._l,ut.ELLIPSIS)}zw(t){return{errorType:"jsError",message:this.$w(t.message),filename:this.Gw(t.filename),lineno:t.lineno,colno:t.colno}}}return s.vl=1024,s._l=150,B([O("Event handler type: error")],s.prototype,"errorListener",null),s})(),kE=(()=>{class s{constructor(t){this.E=t}init(){this.Bf(s.qw,Kc),this.Bf(s.Ww,Xc)}Bf(t,e){this.E.register([t],(i,r)=>{!T(i)||!(T(r)||as(r))||L.error(r,`${e}${i}`)})}}return s.Ww="logSnippetError",s.qw="logImplementationSnippetError",s})(),DE=(()=>{class s{constructor(t,e,i,r,o){this.f=t,this.J=e,this.Gs=i,this.ye=r,this.ht=o}init(){this.J.onChildMessage((t,e,i)=>this.ht.emitIframeEvent(t,e,i)),this.J.setSentiveStatusCallback(()=>this.ye.getSensitiveStatus()),this.J.setRecordingContextCallback(()=>this.Gs.getRecordingContext())}onStartTracking(){this.f.iframesTracking&&this.J.start()}onOptout(){this.f.iframesTracking&&this.J.stop()}onSensitiveStatusChange(){if(this.f.iframesTracking){let t=this.ye.getSensitiveStatus();this.J.onSensitiveStatusChange(t)}}onRecordingContextChange(){if(this.f.iframesTracking){let t=this.Gs.getRecordingContext();this.J.onRecordingContextChange(t)}}}return s})(),Oh=(()=>{class s extends Et{constructor(t){super(),this.f=t,this.lh=0,this.Ne=new Map,this.Ff={boundElement:window,type:"message",listener:e=>this.hh(e)}}onChildMessage(t){this.zf=t}setRecordingContextCallback(t){this.Yw=t}setSentiveStatusCallback(t){this.Xw=t}onSensitiveStatusChange(t){let e=nt.buildBaseMessage(P.SensitiveStatus,Jt.Parent,this.f.projectId);e.content=t;let i=nt.buildBaseMessage(P.SensitiveStatus,Jt.Parent,this.f.projectId);i.content={...t,started:!1,useAnonymization:!0,capturedElementSelector:""},this.Ne.forEach(r=>{if(r.port){let o=this.ma(r)?i:e;this.uh(r,o)}})}onRecordingContextChange(t){let e=nt.buildBaseMessage(P.RecordingContext,Jt.Parent,this.f.projectId);e.content=t,this.Ne.forEach(i=>{!this.ma(i)&&i.port&&this.uh(i,e)})}sendToChildren(t,e){let i=nt.buildBaseMessage(t,Jt.Parent,this.f.projectId);i.content=e,this.Kw(i)}onStart(){pt(this.Ff,!1),this.$f()}onStop(){this.Jw(),ft(this.Ff,!1),this.Qw()}$f(){let t=this.Zw();this.tb(t),csArray.prototype.forEach.call(t,e=>{if(this.eb(e)===null){let r={iframe:e};this.Ne.set(this.lh,r),this.lh+=1}}),this.sb()}Zw(){return csArray.prototype.filter.call(at.findAllElements("iframe"),t=>this.ib(t))}tb(t){this.Ne.forEach((e,i)=>{e.iframe&&csArray.prototype.indexOf.call(t,e.iframe)===-1&&this.nb(i,e)})}nb(t,e){e.port&&nt.closeChannelPort(e.port),this.Ne.delete(t)}Qw(){this.Ne.forEach(t=>{t.port&&nt.closeChannelPort(t.port)}),this.Ne.clear()}eb(t){let e=null;return this.Ne.forEach((i,r)=>{e===null&&i.iframe===t&&(e=r)}),e}ib(t){return t.id!==Cc&&(!t.src||Bt(t.src,"about:")||uo(Qc(t.src),this.f.hostnames))}Kw(t){this.Ne.forEach(e=>{this.uh(e,t)})}uh(t,e){let i=e.type===P.SensitiveStatus||e.type===P.RecordingContext;t.port&&(!i||t.initialStatusSent)&&nt.sendChannelMessage(t.port,e)}sb(){this.Ne.forEach((t,e)=>{if(t.iframe.contentWindow){let i=this.rb(e);nt.sendPostMessage(t.iframe.contentWindow,"*",i)}})}Jw(){let t=this.ob();this.Ne.forEach(e=>{e.port?nt.sendChannelMessage(e.port,t):e.iframe.contentWindow&&nt.sendPostMessage(e.iframe.contentWindow,"*",t)})}rb(t){return nt.buildBaseMessage(P.Discovery,Jt.Parent,this.f.projectId,t)}ob(){return nt.buildBaseMessage(P.Stop,Jt.Parent,this.f.projectId)}ab(t,e){let i=this.Ne.get(t);if(i===void 0){L.error(`Parent received channel messaging initialization from unknow child id : ${t} (${this.lh})`);return}i.port=e,i.port.onmessage=r=>{this.ph(r,i)}}cb(t){if(!t.port)return;let e=nt.buildBaseMessage(P.SensitiveStatus,Jt.Parent,this.f.projectId),i=this.Xw();this.ma(t)&&(i.started=!1,i.capturedElementSelector="",i.useAnonymization=!0),e.content=i,nt.sendChannelMessage(t.port,e)}lb(t){if(!t.port)return;let e=nt.buildBaseMessage(P.RecordingContext,Jt.Parent,this.f.projectId),i=this.Yw();this.ma(t)&&(i.isRecording=!1),e.content=i,nt.sendChannelMessage(t.port,e)}ph(t,e){if(e===void 0){L.error(`Parent received channelMessage from unknown child : ${csJSON.stringify(t.data)}`);return}let i=t.data.type,r=t.data.content;i===P.EndOfBufferedMessages?(this.cb(e),this.lb(e),e.initialStatusSent=!0):this.zf(e.iframe,i,r)}hh(t){if(nt.isMessageValid(t,Jt.Child,this.f.projectId,this.f.hostnames))switch(t.data.type){case P.Discovery:if(t.data.id===void 0){this.$f();return}if(t.ports&&t.ports.length===1&&this.Ne.has(t.data.id)){this.ab(t.data.id,t.ports[0]);return}L.error(`Parent received wrong channelMessage initialization : (${t.origin}) : ${csJSON.stringify(t.data)}`);break;case P.ChildLogMessage:this.zf(null,P.ChildLogMessage,t.data.content);break;default:L.warn(`Parent received unexpected postMessage type from child (${t.origin}) : ${csJSON.stringify(t.data)}`)}}ma(t){return U.isMaskedElement(t.iframe)||U.isMaskedElementChild(t.iframe)}}return s})(),LE=(()=>{class s{constructor(t){this.hb=t}buildApiErrors(t,e){let i=this.hb.collectDataPoints(t,e);if(i===null)return null;let r=this.db(t,i);if(e){let o=this.pb(t,i);return{apiError:r,detailedApiError:o}}return{apiError:r}}pb(t,e){let i=this.Gf(t);return e.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),e.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),e.collectResponseBody&&t.responseBody&&(i.responseBody=t.responseBody),Object.keys(e.standardRequestHeaders).length>0&&(i.standardRequestHeaders=e.standardRequestHeaders),Object.keys(e.standardResponseHeaders).length>0&&(i.standardResponseHeaders=e.standardResponseHeaders),Object.keys(e.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(e.customRequestHeaders)),Object.keys(e.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(e.customResponseHeaders)),Object.keys(e.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=e.plainCustomRequestHeaders),Object.keys(e.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=e.plainCustomResponseHeaders),e.plainResponseBodyAttributes&&Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=e.plainResponseBodyAttributes),e.plainRequestBodyAttributes&&Object.keys(e.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=e.plainRequestBodyAttributes),Object.keys(e.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(e.responseBodyAttributes)),Object.keys(e.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(e.requestBodyAttributes)),i}Gf(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}}db(t,e){let i=this.Gf(t);return e.matchingBodyContents.length>0&&(i.matchingBodyContents=e.matchingBodyContents),Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=e.plainResponseBodyAttributes),i}}return s})(),Nh=(()=>{class s extends Io{constructor(t,e,i){super(),this.ya=t,this.Ea=e,this.fb=i,this.fh=0,this.gb=new LE(i)}subscribe(t,e,i){i!=null&&i.detailedEvent&&(Object.defineProperty(e,"detailedEvent",{value:i.detailedEvent}),this.fh++),super.subscribe(t,e)}unsubscribe(t){var e;!((e=this.subscriptions[t])===null||e===void 0)&&e.hasOwnProperty("detailedEvent")&&this.fh--,super.unsubscribe(t)}init(){let t=this.fb.computeApiErrorCollectionOptions();this.ya.setCollectionOptions(t),this.ya.onEvent(e=>this.qf(e)),this.Ea.setCollectionOptions(t),this.Ea.onEvent(e=>this.qf(e))}onStartTracking(){this.ya.start(),this.Ea.start()}onStopTracking(){this.ya.stop(),this.Ea.stop()}qf(t){let e=this.gb.buildApiErrors(t,this.fh!==0);if(e)for(let i in this.subscriptions){let r=this.subscriptions[i];r.hasOwnProperty("detailedEvent")?e.detailedApiError&&r(e.detailedApiError):r(e.apiError)}}}return s})(),Mh=(()=>{class s{constructor(t,e,i=!1){this.ft=t,this.Z=e,this.Ur=i}addUrlMaskingPattern(t){this.ft.addUrlMaskingPattern(t)}anonymize(t){let e=this.Z.removeQueryString(t.url),i={maskingPatterns:this.ft.getUrlMaskingPatterns(),partialMaskingPatterns:this.ft.getPartialUrlMaskingPatterns(),maskNames:this.Ur};return{...t,url:this.Z.anonymizeUrl(e,i),library:t.library?this.Z.anonymizeUrl(t.library,i):void 0}}}return s})(),xE="CS_ANONYMIZED_VALUE",kh=(()=>{class s{constructor(t,e){this.N=t,this.R=e}anonymize(t){return T(t.message)&&(t.message=this.mb(t.message),t.message=this.N.anonymizePII(t.message)),T(t.filename)&&(t.filename=this.R.computeOverriddenUrl(t.filename)),t}mb(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${xE}'`)}}return s})(),Dh=(()=>{class s extends Io{constructor(t){super(),this.yb=t,this.Vs=[{boundElement:document,type:"touchstart",listener:e=>this.X(e)},{boundElement:document,type:"touchmove",listener:e=>this.X(e)},{boundElement:document,type:"touchend",listener:e=>this.X(e)}],this.Vr=new Vr,this.Vr.onGesture((e,i)=>this.Sl(e,i))}Sl(t,e){for(let i in this.subscriptions){let r=this.subscriptions[i];r(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Vs,t=>pt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Vs,t=>ft(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}X(t){this.yb.tryToExecute("process gesture event",()=>{if(this.Vr.isValidTouchEvent(t))switch(t.type){case"touchstart":this.Vr.processActionDown(t);break;case"touchmove":this.Vr.processActionMove();break;case"touchend":this.Vr.processActionUp(t);break}})()}static isSwipe(t){return t.type===Rt.FLICK||t.type===Rt.DRAG}}return s})(),UE=(()=>{class s extends Et{constructor(t,e){super(),this.B=t,this.gh=e,this.Wf=0}onStart(){L.isPerfLoggingActive()&&(this.Dr=window.csSetInterval(()=>this.Yf(),s.Eb))}onStop(){L.isPerfLoggingActive()&&(this.Yf(),csClearInterval(this.Dr))}Yf(){if(nn.isEmpty||this.Wf>=s.Sb)return;this.Wf++;let t={a:s.vb,l:s._b,...this.gh.getRequestParameters()},e=[];nn.forEach(i=>{csArray.prototype.forEach.call(i,r=>{csArray.prototype.push.call(e,{...r,...t})})}),this.B.send(e),nn.clear()}}return s.vb="uxa",s._b="perf",s.Eb=5e3,s.Sb=5,s})(),VE=(()=>{class s{constructor(t,e,i){this.f=t,this.gh=e,this.It=i}init(){this.Xf=new UE(this.It.create(this.f.getLoggerUri(),!0),this.gh)}onStartTracking(){this.Xf.start()}onOptout(){this.Xf.stop()}}return s})(),jE=(()=>{class s{constructor(t,e){this.ye=t,this.f=e,this.Kf=!1}enableRecordingContext(t,e,i){this.Kf=!0,this.Ki=t,this.A=e,this.Er=i}getRecordingContext(){var t,e,i;if(!this.Kf)return{isRecording:!1,recordingStartTimestamp:0,etrState:Gt.ETR_OFF,etrStatus:ie.ETR_DISABLED,collectState:H.ANALYTICS_ONLY};let r=this.A.getSession();return{isRecording:this.Ki.isRecording(),useAnonymization:this.ye.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Ki.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Ki.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Ki.getRecordingStartTimestamp(),10),etrState:this.f.malkaEtrEnabled?Gt.ETR_ON:Gt.ETR_OFF,etrStatus:this.Er.getEtrStatus(r),collectState:(i=r==null?void 0:r.collectState)!==null&&i!==void 0?i:H.ANALYTICS_ONLY}}}return s})(),Ys=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})(),HE=(()=>{class s extends Et{constructor(t,e,i,r){super(),this.pt=t,this.mh=e,this.et=i,this.de=r,this.Sa=[],this.xs=0}init(){this.pt.init()}initStates(){this.yh(),this.Sa=[],this.xs=0,this.Bl()}Bl(){this.ns=D.now()}Oi(){return D.now()-this.ns}onStart(){this.pt.subscribe(s.xt,t=>this.X(t))}onStop(){this.pt.unsubscribe(s.xt)}onIframeApiError(t){this.X(t)}X(t){this.isStarted&&this.xs<s.mr&&(t.relativeTime=this.Oi(),csArray.prototype.push.call(this.Sa,this.de.anonymize(t)),this.jr(),et.counters.networkRequests.count("collected"))}yh(){this.mh.removeQueryParams(),this.mh.setQueryParams(this.et.getRequestParameters())}jr(){this.mh.send({errors:this.Sa}),this.Sa=[],this.xs+=1}}return s.xt="ApiErrorsService",s.mr=20,s})(),BE="api-errors",Ci=["api-errors:maskUrl"],FE=(()=>{class s{constructor(t,e,i,r,o,c,l){this.pt=t,this.de=e,this.f=i,this.et=r,this.ht=o,this.E=c,this.It=l}init(){let t=this.It.create(`${this.f.getTrackerUri()}/${BE}`,!0);this.Mi=new HE(this.pt,t,this.et,this.de),this.Mi.init(),this.ht.addListener(this.Mi),this.gt()}gt(){this.E.register(Ci,t=>{if(!T(t))throw new Error(`Command misuse: ${Ci[0]}`);this.de.addUrlMaskingPattern(t)})}onStartTracking(){this.Mi.start()}onAfterNaturalPageView(){this.Mi.initStates()}onAfterArtificialPageView(){this.Mi.initStates()}onBeforeSessionRenewal(){this.Mi.stop()}onOptout(){this.Mi.stop()}}return s})(),zE=20,$E="Custom Error:",GE="https://cserror.com/texterror.js",qE=(()=>{class s extends Et{constructor(t,e,i,r,o,c){super(),this.As=t,this.Eh=e,this.et=i,this.ue=r,this.qs=o,this.R=c,this.va=[],this.wi=0,this.ki=[]}initStates(){this.ns=D.now(),this.Eh.removeQueryParams(),this.Eh.setQueryParams(this.et.getRequestParameters()),this.va=[],this.wi=0}onStart(){this.As.subscribe(s.xt,t=>this.X(t)),this.Sh()}onStop(){this.As.unsubscribe(s.xt)}onIframeJavascriptError(t){this.X(t)}trackCustomError(t){let e={errorType:"jsError",message:`${$E} ${t}`,lineno:1,colno:1,filename:GE};this.Hr(e)}Hr(t){if(this.isStarted){let e=this.X(t);e&&this.qs.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.ki,t)}Sh(){this.isStarted&&(csArray.prototype.forEach.call(this.ki,t=>this.Hr(t)),this.ki=[])}X(t){if(this.isStarted&&this.wi<zE){let e={...t,pageUrl:this.R.getAnonymizedUrl(),rt:this.Oi()};return this.ue.anonymize(e),csArray.prototype.push.call(this.va,e),this.jr(),e}return null}Oi(){return D.now()-this.ns}jr(){this.Eh.send({errors:this.va}),this.va=[],this.wi+=1}}return s.xt="JavaScriptErrorsService",s})(),Hn=["trackError"],WE="errors",YE=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p){this.As=t,this.ue=e,this.f=i,this.et=r,this.ht=o,this.E=c,this.qs=l,this.R=h,this.It=p}init(){let t=this.It.create(`${this.f.getTrackerUri()}/${WE}`,!0);this.Di=new qE(this.As,t,this.et,this.ue,this.qs,this.R),this.ht.addListener(this.Di),this.gt()}gt(){this.f.jsCustomErrorsEnabled&&!this.f.customErrors.enabled&&this.E.register(Hn,t=>{this.Di.trackCustomError(t)})}onStartTracking(){this.Di.start()}onAfterNaturalPageView(){this.Di.initStates()}onAfterArtificialPageView(){this.Di.initStates()}onBeforeSessionRenewal(){this.Di.stop()}onOptout(){this.Di.stop()}}return s})(),XE=(()=>{let s;return function(n){function o(h,p,u=!1){let y={message:ut.truncate(h,300,ut.ELLIPSIS),errorType:"customError"};return(u||l(p))&&(c(p),y.attributes=p),y}n.buildCustomErrorEvent=o;function c(h){for(let p in h){let u=h[p];if(typeof u=="string"&&u.length>30&&(u=ut.truncate(u,30,ut.ELLIPSIS),h[p]=u),p.length>30){let m=ut.truncate(p,30,ut.ELLIPSIS);delete h[p],h[m]=u}}}function l(h){let p=Object.keys(h).length;return p>0&&p<=5}}(s||(s={})),s})();var KE=(()=>{class s{constructor(){this._h=an.Natural}setPageViewType(t){this._h=t}getPageViewType(){return this._h}getRequestParameters(){return{pvt:this._h}}}return s})(),JE=(()=>{class s{constructor(t){this.Q=t}onAfterVisitorRenewal(){this.Q.renewSession()}}return s})();var Lh=(()=>{let s;return function(n){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,r=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",r)}n.generate=t;function e(i){let r=0;for(let o=0;o<i.length;o+=1)r=csString.prototype.charCodeAt.call(i,o)+(r<<6)+(r<<16)-r;return Math.abs(r)}}(s||(s={})),s})();var Ne;(function(s){s.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",s.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",s.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",s.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"})(Ne||(Ne={}));var me;(function(s){s.START="start",s.NOT_START="not-start",s.END="end",s.NOT_END="not-end",s.CONTAIN="contain",s.NOT_CONTAIN="not-contain",s.EXACT="exact",s.NOT_EXACT="not-exact"})(me||(me={}));var Po=(()=>{class s{constructor(t,e,i,r){this.Ee=t,this.f=e,this.R=i,this.zr=r}init(){this.jb()}shouldMaskNonTextElements(){if(this.f.anonymisationMethod!==Ne.replayRecordingMaskedUrlRegexRules)return!1;if(this.f.isSMB)return this.shouldUseAnonymization();let t=this.zr.getMatchingRules(this.R.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.Ee.isReplayUnanonymizedAllowedByConsent()){switch(this.f.anonymisationMethod){case null:case Ne.replayRecordingMaskedUrlRegex:return!!(this.f.replayRecordingMaskedUrlRegex&&this.f.replayRecordingMaskedUrlRegex.test(this.R.getAnonymizedUrl()));case Ne.replayRecordingMaskedUrlRegexRules:return this.zr.evaluateUrl(this.R.getAnonymizedUrl())}return!1}else{switch(this.f.anonymisationMethod){case null:case Ne.replayRecordingUnmaskedUrlRegex:return!(this.f.replayRecordingUnmaskedUrlRegex&&this.f.replayRecordingUnmaskedUrlRegex.test(this.R.getAnonymizedUrl()));case Ne.replayRecordingUnmaskedUrlRegexRules:return!this.zr.evaluateUrl(this.R.getAnonymizedUrl())}return!0}}jb(){this.f.anonymisationMethod===Ne.replayRecordingMaskedUrlRegexRules&&this.f.replayRecordingMaskedUrlRegexRules?this.zr.setRegexRules(this.f.replayRecordingMaskedUrlRegexRules):this.f.anonymisationMethod===Ne.replayRecordingUnmaskedUrlRegexRules&&this.f.replayRecordingUnmaskedUrlRegexRules&&this.zr.setRegexRules(this.f.replayRecordingUnmaskedUrlRegexRules)}}return s})(),ae;(function(s){s.REGEX="regex",s.START="start",s.NOT_START="not-start",s.END="end",s.NOT_END="not-end",s.CONTAIN="contain",s.NOT_CONTAIN="not-contain",s.EXACT="exact",s.NOT_EXACT="not-exact"})(ae||(ae={}));var cc;(function(s){s.REGEX="regex",s.OPERATOR="operator",s.TURN_OFF="turn-off"})(cc||(cc={}));var Bn=(()=>{class s{constructor(){this.Ch=[]}setRegexRules(t){this.Ch=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.Hb(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.Ch,e=>this.sg(t,e))}getMatchingRules(t){return csArray.prototype.filter.call(this.Ch,e=>this.sg(t,e))}sg(t,e){var i,r;let o=this.Bb(t,e);return!this.Fb(e)||!this.zb(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((r=e.regex)===null||r===void 0)&&r.test(o))}Fb(t){let e=new csDate,i=t.startDate&&t.startDate>e,r=t.endDate&&t.endDate<e;return!i&&!r}zb(t){let e=t.samplingRate!==100,i=e&&Ae.boolean(t.samplingRate);return!e||i}wa(t){return!Bt(t,"http://")&&!Bt(t,"https://")?`https://${t}`:t}Bb(t,e){let i=po(this.wa(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}ba(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}Hb(t){let e=null,i=!1;switch(t.operator){case me.NOT_START:case ae.NOT_START:i=!0;case me.START:case ae.START:e=new csRegExp(`^${t.value}`,this.ba(t));break;case me.NOT_END:case ae.NOT_END:i=!0;case me.END:case ae.END:e=new csRegExp(`${t.value}$`,this.ba(t));break;case me.NOT_CONTAIN:case ae.NOT_CONTAIN:i=!0;case me.CONTAIN:case ae.CONTAIN:case ae.REGEX:e=new csRegExp(`${t.value}`,this.ba(t));break;case me.NOT_EXACT:case ae.NOT_EXACT:i=!0;case me.EXACT:case ae.EXACT:e=new csRegExp(`^${t.value}$`,this.ba(t));break;default:L.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let r=t.startDate?this.ig(t.startDate):void 0,o=t.endDate?this.ig(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,maskMedia:t.maskMedia,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:r,endDate:o}}ig(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),xh=(()=>{class s{constructor(){this.$b=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml","text/javascript"]}setCollectionOptions(t){this.Ih=t}isValidBodyType(t){let e=t["content-type"];if(!e)return!1;let i=csString.prototype.toLocaleLowerCase.call(e);return gn(this.$b,r=>Ve(i,r))}canCollect(t,e){return this.Gb(t,e)&&this.qb(e)}Gb(t,e){return t>=400||t>=200&&t<300&&this.Ih.statusCodes.has(t)&&this.Ph(e)}Ph(t){return gn(this.Ih.urls,e=>csString.prototype.indexOf.call(t,e)!==-1)}qb(t){return ao(this.Ih.excludedDomains,e=>csString.prototype.indexOf.call(t,e)===-1)}}return s})(),QE=0,Uh=(()=>{class s extends xh{constructor(){super(),this.Wt=csSymbol("ApiCall"),this.L=!1,this.bn=null,this.An=null,this.Aa=null,this.Wb=({context:t,args:e,callerName:i})=>this.interceptOpen(t,e,i),this.Yb=({context:t,args:e})=>this.interceptSetRequestHeader(t,e),this.Xb=({context:t,args:e})=>this.interceptSend(t,e)}onEvent(t){this.D=t}start(){this.L||(this.Oh(),this.bn&&this.bn.activate(),this.An&&this.An.activate(),this.Aa&&this.Aa.activate(),this.L=!0)}stop(){this.L&&(this.bn&&this.bn.deactivate(),this.An&&this.An.deactivate(),this.L=!1)}Oh(){this.bn||(this.bn=Qt({target:XMLHttpRequest.prototype,methodName:"open",hook:this.Wb,options:{withCallerName:!0}})),this.An||(this.An=Qt({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.Yb})),this.Aa||(this.Aa=Qt({target:XMLHttpRequest.prototype,methodName:"send",hook:this.Xb}))}interceptOpen(t,e,i){if(!e[1]||!T(e[1]))return;let[r,o]=csString.prototype.split.call(e[1],"?");t[this.Wt]={library:i,requestTime:D.now(),method:e[0],url:be(r),queryParameters:o,statusCode:QE,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",()=>this.readyStateChangeListener(t))}readyStateChangeListener(t){t[this.Wt]&&t.readyState===XMLHttpRequest.DONE&&this.canCollect(t.status,t[this.Wt].url)&&(t[this.Wt].responseTime=D.now(),t[this.Wt].statusCode=t.status,t[this.Wt].responseHeaders=this.Kb(t.getAllResponseHeaders()),super.isValidBodyType(t[this.Wt].responseHeaders)&&(t.responseType===""||t.responseType==="text")&&(t[this.Wt].responseBody=t.responseText),this.D(t[this.Wt]))}interceptSetRequestHeader(t,e){if(!t[this.Wt])return;let i=e[0],r=csString.prototype.valueOf.call(new csString(e[1]));typeof i!="string"||r.length===0||(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),r=csString.prototype.trim.call(r),t[this.Wt].requestHeaders[i]?t[this.Wt].requestHeaders[i]+=`, ${r}`:t[this.Wt].requestHeaders[i]=r)}interceptSend(t,e){t[this.Wt]&&super.isValidBodyType(t[this.Wt].requestHeaders)&&typeof e[0]=="string"&&(t[this.Wt].requestBody=e[0])}Kb(t){let e={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),i=>{let[r,o]=csString.prototype.split.call(i,/:\s*/);o&&(e[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(o))}),e}}return B([O("XhrRequestTracker.interceptOpen")],s.prototype,"interceptOpen",null),B([O("XhrRequestTracker.readyStateChangeListener")],s.prototype,"readyStateChangeListener",null),B([O("XhrRequestTracker.interceptSetRequestHeader")],s.prototype,"interceptSetRequestHeader",null),B([O("XhrRequestTracker.interceptSend")],s.prototype,"interceptSend",null),s})(),Vh=(()=>{class s extends xh{constructor(){super(),this.L=!1,this.Tn=null,this.Jb=({result:t,args:e,callerName:i})=>{this.interceptFetch(t,e,i)}}onEvent(t){this.D=t}start(){this.L||this.Qb()&&(this.Zb(),this.Tn&&this.Tn.activate(),this.L=!0)}stop(){this.L&&(this.Tn&&this.Tn.deactivate(),this.L=!1)}Qb(){return!!window.fetch&&typeof window.fetch=="function"}tA(t){if(t[0]&&typeof t[0].clone=="function"){let e=Fs(t);return e[0]=t[0].clone(),e}return t}Zb(){this.Tn||(this.Tn=Qt({target:window,methodName:"fetch",hook:this.Jb,hookPrepareArgs:this.tA,options:{withCallerName:!0}}))}async interceptFetch(t,e,i){let r=e[0],o=e[1],c=new Request(r,o);if(!T(c.url))return;let l=D.now(),h;try{h=await t}catch(y){if(this.eA(y)||this.ng(y)||this.sA(y)||this.iA(y))return;throw y}let[p,u]=csString.prototype.split.call(c.url,"?"),m=be(p);if(h&&super.canCollect(h.status,m)){let y={library:i,method:c.method,url:m,queryParameters:u,requestTime:l,responseTime:D.now(),statusCode:h.status,requestBody:"",responseBody:"",requestHeaders:this.rg(c.headers),responseHeaders:this.rg(h.headers)};if(!h.bodyUsed&&super.isValidBodyType(y.responseHeaders))try{y.responseBody=await h.clone().text()}catch(S){if(this.ng(S))return}super.isValidBodyType(y.requestHeaders)&&(y.requestBody=await c.text()),this.D(y)}}eA(t){return t instanceof TypeError}ng(t){return t instanceof DOMException&&t.name==="AbortError"}iA(t){return t instanceof DOMException&&t.name==="TimeoutError"}sA(t){return t instanceof DOMException&&csArray.prototype.some.call(s.nA,e=>e===t.name)}rg(t){let e={};return t.forEach((i,r)=>{i&&(e[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(i))}),e}}return s.nA=["NoModificationAllowedError","InvalidStateError","OperationError"],B([O("FetchRequestTracker.interceptFetch")],s.prototype,"interceptFetch",null),s})(),ZE=(()=>{class s{constructor(){this.rA=64e3,this.oA=5e3,this.aA=2e3,this.og=8e3,this.Es=!!self.TextEncoder,this.Es&&(this.cA=new TextEncoder)}$r(t){return this.cA.encode(t).byteLength}ag(t,e,i){let r=0;t[e]&&(r+=this.$r(t[e]),r>this.og&&(r=0,t[e]=ut.ELLIPSIS)),t[i]&&(r+=this.$r(csJSON.stringify(t[i])),r>this.og&&(t[i]=s.truncatedObjectMarker))}lA(t){t.queryParameters&&this.$r(t.queryParameters)>this.aA&&(t.queryParameters=ut.ELLIPSIS)}hA(t){t.requestBody&&this.$r(t.requestBody)>this.rA&&(t.requestBody=ut.ELLIPSIS),t.responseBody&&this.$r(t.responseBody)>this.oA&&(t.responseBody=ut.ELLIPSIS)}truncate(t){this.Es?(this.lA(t),this.hA(t),this.ag(t,"customResponseHeaders","plainCustomResponseHeaders"),this.ag(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})}}return s.truncatedObjectMarker={[ut.ELLIPSIS]:ut.ELLIPSIS},s})(),tS=(()=>{let s;return function(n){function t(r){let o="[",c="]",l=[];for(let h=0;h<r.length;++h)if(r[h]===o)csArray.prototype.push.call(l,r[h]);else if(r[h]===c)if(csString.prototype.indexOf.call(r,o)>-1)csArray.prototype.pop.call(l);else return!1;return l.length===0}function e(r){if(!r)return!0;if(!t(r))return!1;let o=csString.prototype.split.call(r,/[\[\]]/);return csArray.prototype.every.call(o,c=>{let l=c[0],h=c[c.length-1];if((l==="'"||l==='"')&&l!==h)return!1;let p=csString.prototype.split.call(c,".");return p[0].length===0&&csArray.prototype.shift.call(p),csArray.prototype.every.call(p,u=>{let m=/^\-?\d+$/.exec(u);return m?parseInt(m[0],10)>=0:u==="$"||/\w+/.test(u)})})}n.isValidJSONPath=e;function i(r,o){if(!r)return;let c=csString.prototype.split.call(r,/[\$\[\]]/),l=[];csArray.prototype.forEach.call(c,p=>{if(p[0]==="'"||p[0]==='"'){csArray.prototype.push.call(l,csString.prototype.substring.call(p,1,p.length-1));return}csArray.prototype.push.call(l,...csArray.prototype.filter.call(csString.prototype.split.call(p,"."),u=>u.length>0))}),l[0]==="$"&&csArray.prototype.shift.call(l);let h=o;for(let p of l)if(h[p]!==void 0)h=h[p];else return;return h}n.getJSONPathValue=i}(s||(s={})),s})(),eS=(()=>{class s{constructor(){this.uA=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}isValidStandardHeader(t){return this.uA.has(t)}}return s})(),jh=(()=>{class s{constructor(){this.dA=64e3,this.pA=100,this.j={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.cg=new eS}fA(t){return t.length<=this.dA}gA(t){let e=t["content-type"];return e!==void 0&&(Bt(e,"application/json")||Bt(e,"application/graphql"))}mA(t,e){return t&&this.fA(t)&&this.gA(e)}Ta(t,e,i,r){let o=r==="request"?this.yA:this.EA;if(o!==void 0||this.mA(e,i)){if(o===void 0)try{o=csJSON.parse(e),r==="request"?this.yA=o:this.EA=o}catch{return}let c=tS.getJSONPathValue(t,o);if(c!==void 0&&(c===null||!te(c))){let l=T(c)?c:csJSON.stringify(c);return ut.truncate(l,this.pA,ut.ELLIPSIS)}}}isBodyAttributeValueFound(t,e){let i,r;return(e.type==="request-response"||e.type==="response")&&(i=this.Ta(e.path,t.responseBody,t.responseHeaders,"response")),(e.type==="request-response"||e.type==="request")&&(r=this.Ta(e.path,t.requestBody,t.requestHeaders,"request")),K(i)||K(r)}collectBodyAttribute(t,e,i){let r;(e.type==="request-response"||e.type==="response")&&(r=this.Ta(e.path,t.responseBody,t.responseHeaders,"response"),r&&(e.encrypted?this.j.responseBodyAttributes[e.path]=r:(r=i(r),this.j.plainResponseBodyAttributes[e.path]=r))),(e.type==="request-response"||e.type==="request")&&(r=this.Ta(e.path,t.requestBody,t.requestHeaders,"request"),r&&(e.encrypted?r&&(this.j.requestBodyAttributes[e.path]=r):(r=i(r),this.j.plainRequestBodyAttributes[e.path]=r)))}isBodyContentMatching(t,e){return t.responseBody?!!new csRegExp(e,"i").test(t.responseBody):!1}collectBodyContent(t){csArray.prototype.indexOf.call(this.j.matchingBodyContents,t)===-1&&csArray.prototype.push.call(this.j.matchingBodyContents,t)}collectCustomHeaders(t,e,i){let r=csString.prototype.toLocaleLowerCase.call(e.headerName);t.responseHeaders[r]&&(e.type==="request-response"||e.type==="response")&&(e.encrypted?this.j.customResponseHeaders[r]=t.responseHeaders[r]:this.j.plainCustomResponseHeaders[r]=i(t.responseHeaders[r])),t.requestHeaders[r]&&(e.type==="request-response"||e.type==="request")&&(e.encrypted?this.j.customRequestHeaders[r]=t.requestHeaders[r]:this.j.plainCustomRequestHeaders[r]=i(t.requestHeaders[r]))}collectStandardHeaders(t){if(!(Object.keys(this.j.standardRequestHeaders).length>0||Object.keys(this.j.standardResponseHeaders).length>0)){for(let[e,i]of Object.entries(t.requestHeaders))this.cg.isValidStandardHeader(e)&&(this.j.standardRequestHeaders[e]=i);for(let[e,i]of Object.entries(t.responseHeaders))this.cg.isValidStandardHeader(e)&&(this.j.standardResponseHeaders[e]=i)}}setCollectQueryParam(t){t&&(this.j.collectQueryParam=!0)}setCollectResponseBody(t){t&&(this.j.collectResponseBody=!0)}setCollectRequestBody(t){t&&(this.j.collectRequestBody=!0)}getCollectedDataPoints(){return this.j}}return s})(),De=(()=>{let s;return function(n){n.CONTENTSQUARE="contentsquare.net",n.CLICKTALE="clicktale.net",n.FAKE_TRACKER="fake-tracker.content-square.fr"}(s||(s={})),s})(),Hh=(()=>{class s{computeApiErrorCollectionOptions(){let t=new Set,e=[];if(this.rules)for(let r of this.rules)r.statusCode!==void 0&&t.add(r.statusCode),r.url!==void 0&&csArray.prototype.indexOf.call(e,r.url)===-1&&csArray.prototype.push.call(e,r.url);let i=[De.CONTENTSQUARE,De.CLICKTALE];return csArray.prototype.push.call(i,De.FAKE_TRACKER),{statusCodes:t,urls:e,excludedDomains:i}}}return s})(),Bh=(()=>{class s extends Hh{constructor(t,e){super(),this.Pt=t,this.N=e,this.rules=t.collectionRules}collectDataPoints(t,e){this.j=new jh;let i=!1;if(this.Pt.collectionRules)for(let r of this.Pt.collectionRules)this.SA(r,t)&&this.vA(r,t)&&this._A(r,t)&&(i=!0,this.wA(t,r,e));return i||(i=this.bA(t)),i&&e&&this.Pt.collectStandardHeaders&&this.j.collectStandardHeaders(t),i?this.j.getCollectedDataPoints():null}computeApiErrorCollectionOptions(){let t=this.Pt.collectionRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let r=[De.CONTENTSQUARE,De.CLICKTALE];return csArray.prototype.push.call(r,De.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:r}}SA(t,e){return(!t.statusCode&&e.statusCode>=400||t.statusCode!==void 0&&t.statusCode===e.statusCode)&&(!t.url||csString.prototype.indexOf.call(e.url,t.url)!==-1)}vA(t,e){return t.bodyContent?this.j.isBodyContentMatching(e,t.bodyContent):!0}_A(t,e){let i=csArray.prototype.find.call(t.bodyAttributePaths,r=>r.primary);return i===void 0?!0:this.j.isBodyAttributeValueFound(e,i)}bA(t){return t.statusCode>=400}wA(t,e,i){e.bodyContent&&this.j.collectBodyContent(e.bodyContent);let r=ve(e.bodyAttributePaths,o=>o.primary===1);if(r&&this.j.collectBodyAttribute(t,r,o=>this.N.anonymizePII(o)),i){this.j.setCollectQueryParam(e.collectQueryParam),this.j.setCollectResponseBody(e.collectResponseBody),this.j.setCollectRequestBody(e.collectRequestBody);for(let c of e.customHeaders)this.j.collectCustomHeaders(t,c,l=>this.N.anonymizePII(l));let o=Ai(e.bodyAttributePaths,c=>!c.primary);for(let c of o)this.j.collectBodyAttribute(t,c,l=>this.N.anonymizePII(l))}}}return s})(),Fh=(()=>{class s extends Hh{constructor(t,e){super(),this.Pt=t,this.N=e,this.rules=t.configurableApiErrorRules}collectDataPoints(t,e){this.j=new jh;let i=this.AA(t,this.Pt.configurableApiErrorRules);return i.isMatching?(i.matchingBodyContents.length>0&&this.j.collectBodyContent(i.matchingBodyContents[0]),e&&this.TA(t),this.j.getCollectedDataPoints()):null}computeApiErrorCollectionOptions(){let t=this.Pt.configurableApiErrorRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let r=[De.CONTENTSQUARE,De.CLICKTALE];return csArray.prototype.push.call(r,De.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:r}}AA(t,e){if(t.statusCode>=400)return{isMatching:!0,matchingBodyContents:[]};if(e){for(let i of e)if(this.RA(t,i))return{isMatching:!0,matchingBodyContents:i.bodyContent?[i.bodyContent]:[]}}return{isMatching:!1,matchingBodyContents:[]}}RA(t,e){return!!(t.statusCode===e.statusCode&&csString.prototype.indexOf.call(t.url,e.url)!==-1&&(!e.bodyContent||this.j.isBodyContentMatching(t,e.bodyContent)))}TA(t){this.Pt.collectStandardHeaders&&this.j.collectStandardHeaders(t),this.Pt.validCustomHeaders&&this.lg(t,this.Pt.validCustomHeaders,1),this.Pt.plainCustomHeaders&&this.lg(t,this.Pt.plainCustomHeaders,0),this.Ph(t.url,this.Pt.validUrls)&&(this.Pt.collectQueryParam&&this.j.setCollectQueryParam(Number(this.Pt.collectQueryParam)),this.Pt.collectResponseBody&&this.j.setCollectResponseBody(Number(this.Pt.collectResponseBody)),this.Pt.collectRequestBody&&this.j.setCollectRequestBody(Number(this.Pt.collectRequestBody)))}lg(t,e,i){for(let r of e)this.j.collectCustomHeaders(t,{headerName:r,encrypted:i,type:"request-response"},o=>this.N.anonymizePII(o))}Ph(t,e){return e?csArray.prototype.some.call(e,i=>csString.prototype.indexOf.call(t,i)!==-1):!1}}return s})();function sS(s){return Y.traverse(s,n=>{if(n.nodeType===11){let t=Y.getProperty(n,"styles");t&&(n.adoptedStyleSheets=t)}}),s}function iS(s){if(s!=null&&s.length)return he(s,n=>rS(n))}function nS(){qt(document).visitAll(s=>{var n;if(Bs(s)&&((n=s.adoptedStyleSheets)===null||n===void 0?void 0:n.length)>0){let t=iS(s.adoptedStyleSheets);Y.setProperty(s,"styles",t)}})}function rS(s){let n=[];try{n=he(s.cssRules,t=>t.cssText)}catch{}return{cssRules:n,disabled:s.disabled}}var zh=(()=>{class s extends Ce{constructor(t){super(),this.F=null,this.Ra=null,this.M=null,this.Fs=null,this.hg=["value","checked","src","data","alt"],this.Ca={state:U.MaskedElementState.Child},this.IA=e=>{for(let i of e){if(U.isMaskedElement(i.target)||U.isMaskedElementChild(i.target))for(let r=0;r<i.addedNodes.length;r+=1){let o=i.addedNodes[r];U.isMaskedElement(o)||U.isMaskedElementChild(o)||gt(o)&&this.ug(o)}for(let r=0;r<i.removedNodes.length;r+=1){let o=i.removedNodes[r];at.isConnected(o)||this.dg(o)}}},this.PA=t}setMaskedElementSettings(t){this.Rs=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,r;this.Rs||(mt.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.Rs={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.Rs;(t=this.Fs)!==null&&t!==void 0||(this.Fs=this.OA()),o.length!==0&&((e=this.F)!==null&&e!==void 0||(this.F=this.NA()),this.F.observe(o)),c.length!==0&&((i=this.Ra)!==null&&i!==void 0||(this.Ra=this.MA(l)),this.Ra.observe(c)),(r=this.M)!==null&&r!==void 0||(this.M=new de(this.IA,(h,p)=>p==="added"&&this.kA(h))),this.M.observe(),csSetTimeout(this.PA)}onStop(){var t,e,i;this.F&&(this.dg(document),this.F.disconnect()),(t=this.Ra)===null||t===void 0||t.disconnect(),(e=this.M)===null||e===void 0||e.disconnect(),(i=this.Fs)===null||i===void 0||i.disconnect()}OA(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}NA(){return new ue(t=>{csArray.prototype.forEach.call(t,e=>{this.DA(e)?this.ug(e):(this.LA(e),this.xA(e))})})}MA(t){return new ue(e=>{csArray.prototype.forEach.call(e,i=>this.UA(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=U.getMaskedElementDetails(t.target);if(i.state!==U.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let r={state:U.MaskedElementState.Parent,width:e.width,height:e.height};U.setMaskedElementProperty(t.target,r),this.produceEvent({type:"ResizeMaskedElement",target:ot(t.target),width:e.width,height:e.height})}xA(t){!this.Fs||!gt(t)||Cn(t)||this.Fs.observe(t)}DA(t){let e=csNodeparentNode.apply(t);return e?U.isMaskedElement(e)||U.isMaskedElementChild(e):Bs(t)?U.isMaskedElement(t.host)||U.isMaskedElementChild(t.host):!1}kA(t){(U.isMaskedElement(t.host)||U.isMaskedElementChild(t.host))&&U.setMaskedElementProperty(t,this.Ca)}dg(t){qt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{U.unsetMaskedElementProperty(i)})}LA(t){let e=t.getBoundingClientRect(),i={state:U.MaskedElementState.Parent,width:e.width,height:e.height};U.setMaskedElementProperty(t,i),this.VA(t),qt(t).visitAll(r=>r!=t&&U.setMaskedElementProperty(r,this.Ca))}ug(t){U.setMaskedElementProperty(t,this.Ca),qt(t).visitAll(e=>e!=t&&U.setMaskedElementProperty(e,this.Ca))}VA(t){var e;let i=(e=Y.getProperty(t,U.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let r=0;r<this.hg.length;r+=1){let o=this.hg[r];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&U.setMaskedAttributeProperty(t,i)}UA(t,e){var i;let r=(i=Y.getProperty(t,U.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(r.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Xt.call(t,l.selector))&&csArray.prototype.push.call(r.attributes,c)}r.attributes.length!==0&&U.setMaskedAttributeProperty(t,r)}}return je([O()],s.prototype,"resizeObserverCallback",null),s})(),$h=(()=>{class s{constructor(){this.Nh=0,this.L=!1,this.pg="data-cs-capture",this.Js=t=>{for(let e of t){if(Se.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];Se.isWhitelistedElement(r)||gt(r)&&this.fg(r)}for(let i=0;i<e.removedNodes.length;i+=1){let r=e.removedNodes[i];at.isConnected(r)||this.gg(r)}}}}start(){this.Nh++,!this.L&&(this.L=!0,this.jA())}jA(){this.F||(this.F=new ue(e=>W(e,i=>this.fg(i))));let t=this.Mh?`[${this.pg}], ${this.Mh}`:`[${this.pg}]`;this.F.observe(t),this.M||(this.M=new de(this.Js,(e,i)=>i==="added"&&this.HA(e))),this.M.observe()}stop(){this.L&&(this.Nh--,this.Nh===0&&(this.L=!1,this.BA()))}BA(){this.F&&(this.gg(document),this.F.disconnect()),this.M&&this.M.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Nt(t))this.Mh=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Mh}fg(t){qt(t).visitAll(e=>{Se.whitelistElement(e)})}HA(t){Se.isWhitelistedElement(t.host)&&Se.whitelistElement(t)}gg(t){qt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{Se.removeWhitelistElement(i)})}}return s})(),Gh=(()=>{class s{constructor(){this.F=null,this.M=null,this.L=!1,this.Js=t=>{for(let e of t)if(ke.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];if(!ke.isEditableNode(r)){if(hn(r)||pp(r)){ke.markEditableNode(r);continue}gt(r)&&this.mg(r)}}}}start(){this.L||(this.L=!0,this.F=new ue(t=>W(t,e=>{this.mg(e)})),this.F.observe("[contenteditable]"),this.M=new de(this.Js,(t,e)=>e==="added"&&this.FA(t)),this.M.observe())}stop(){var t,e;this.L&&(this.L=!1,(t=this.F)===null||t===void 0||t.disconnect(),this.F=null,(e=this.M)===null||e===void 0||e.disconnect(),this.M=null)}mg(t){qt(t).visitAll(e=>{ke.markEditableNode(e)})}FA(t){ke.isEditableNode(t.host)&&ke.markEditableNode(t)}}return s})();var oS=s=>{let n=s*60*1e3;return`${Math.floor(csDate.now()/n)}`},aS=5e3,cS=(()=>{class s extends zc{constructor(t,e,i){super(t,e),this.Rn=null,this.$A=(i==null?void 0:i.type)||"json",this.Eg=i==null?void 0:i.cacheMinutes,this.zn=i==null?void 0:i.timeout}onLoad(t){this.Hi=t}onError(t){this.Fn=t}onTimeout(t,e){this.li=t,this.zn=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,r=>r());let t=this.retrieveParameters();this.ic(t);let e=Ti.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.th(i,this.$A)}abort(){this.Rn&&(this.Rn.abort(),this.Rn=null)}isInProgress(){return this.Rn!==null}th(t,e){var i;let r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onerror=()=>{var o;return(o=this.Fn)===null||o===void 0?void 0:o.call(this,r)},r.ontimeout=()=>{var o;return(o=this.li)===null||o===void 0?void 0:o.call(this,r)},r.onload=()=>{var o,c;r.status>=200&&r.status<400?((o=this.Hi)===null||o===void 0||o.call(this,this.GA(r,e)?r.response:r.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Fn)===null||c===void 0||c.call(this,r)},r.onloadend=()=>{this.Rn=null},r.timeout=(i=this.zn)!==null&&i!==void 0?i:aS,this.Rn=r,r.send()}GA(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}ic(t){let e;this.Eg?e=`${oS(this.Eg)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})();var lS=["identify"],hS=["getIdentity"],uS=["resetIdentity"];var dS=(()=>{class s{constructor(t,e,i,r,o){this.lt=t,this.vt=e,this.ve=i,this.Dt=r,this.nt=o}getSensitiveStatus(){var t,e;return{started:this.ve.isStarted,useAnonymization:this.lt.shouldUseAnonymization(),capturedElementSelector:this.Dt.getWhitelistedElementsSelector(),maskedElementSettings:this.vt.getMaskedElementSettings((t=this.lt)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.nt)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.ve.isStarted,i=this.lt.shouldUseAnonymization();return e?U.isMaskedElement(t)||U.isMaskedElementChild(t)?Ht.MASKED:Ll.shouldEncrypt(t)?Ht.ENCRYPTED:ke.isEditableNode(t)?Ht.ANONYMIZED:i?Se.isWhitelistedElement(t)?Ht.CAPTURED:Ht.ANONYMIZED:Ht.CAPTURED:Ht.ANONYMIZED}}return s})(),Oo=["setEncryptionSelectors"],xi=["setPIISelectors"],Fn=["setCapturedElementsSelector"],pS=(()=>{class s{constructor(t,e,i,r,o,c,l){this.S=t,this.E=e,this.vt=i,this.ve=r,this.Dt=o,this.nt=c,this.Pn=l}init(){var t,e;this.Pn&&this.nt&&((t=this.Pn)===null||t===void 0||t.addSelector((e=this.nt)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.gt()}onStartTracking(t){this.ve.start(),this.S.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.ve.stop(),this.S.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.ve.start(),this.S.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.ve.stop(),this.S.emitSensitiveStatusChange()}onOptout(){this.ve.stop(),this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.S.emitSensitiveStatusChange()}gt(){this.E.register(xi,t=>{this.vt.setMaskedElementSettingsFromCommand(t),this.S.emitSensitiveStatusChange()}),this.E.register(Fn,t=>{this.Dt.setWhitelistedElementsSelector(t),this.S.emitSensitiveStatusChange()}),this.E.register(Oo,t=>{var e,i;(e=this.nt)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.Pn)===null||i===void 0||i.addSelector(t)})}}return s})(),No=(()=>{class s extends Et{constructor(t,e,i,r,o,c){super(),this.$t=t,this.vt=e,this.Dt=i,this.Pn=r,this.On=o,this.lt=c}onStart(){var t,e,i;this.Dt.start(),this.$t.setMaskedElementSettings(this.vt.getMaskedElementSettings((t=this.lt)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.$t.startIdentifier(),(e=this.Pn)===null||e===void 0||e.start(),(i=this.On)===null||i===void 0||i.start()}onStop(){var t,e;this.Dt.stop(),this.$t.stopIdentifier(),(t=this.Pn)===null||t===void 0||t.stop(),(e=this.On)===null||e===void 0||e.stop()}}return s})(),zn=["networkRequest:maskUrls"],Mo=["networkRequest:maskUrls:reset"],fS=(()=>{class s{constructor(t,e){this.wg=t,this.ft=e}init(){this.wg.register(zn,t=>{if(T(t)){this.ft.addPartialUrlMaskingPattern(t);return}if(csArray.isArray(t))for(let e of t)T(e)&&this.ft.addPartialUrlMaskingPattern(e)}),this.wg.register(Mo,()=>this.ft.resetPartialUrlMaskingPatterns())}}return s})(),gS=/(\b["']?key["']?\s*[=:]\s*["'](?:first|last|user|profile|primary|primary[ _-]?last)[ _-]?name["']\s*,?\s*["']?value["']?\s*[=:]\s*["'])(.+?)(["']|$)|(\b["']?(?:first|last|user|profile|primary|primary[ _-]?last)[\s_-]?name["']?\s*[=:]\s*["'])(.+?)(["']|$)/gi,mS="$1$4CS_ANONYMIZED_NAME$3$6",yS=/(?:\(\d{3}\) \d{3}[- ]\d{4}\b)|(?:\b\d{3}([-\. ])\d{3}\1\d{4}\b)|(?:\b\d{2} \d{2} \d{2} \d{2} \d{2}\b)|(?:\b\d{4} \d{3} \d{3}\b)|(?:\b\d{2}([-\. ])\d{4}\2\d{4}\b)|(?:\b\d{3}([- ])\d{4}\3\d{4}\b)|(?:\+\d{1,3} \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \(\d{3}\) \d{3}-\d{4}\b)|(?:\+\d{1,3}([- ])\d{4}\4\d{3}\4\d{3}\b)|(?:\+\d{1,3} \d \d{4} \d{4}\b)|(?:\+\d{1,3} \d \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \d \d{2} \d{2} \d{2} \d{2}\b)|(?:\+\d{7,15}\b)|(?:\+\d{1,3} \d{6,12}\b)|(?:\+\d{1,3}([- ])\d{4}\5\d{3}\5\d{3}\b)/g,ES="CS_ANONYMIZED_PHONE",SS=(()=>{class s{constructor(t,e){this.N=t,this.Z=e}anonymize(t){return this.Z?csArray.prototype.join.call(csArray.prototype.map.call(kg(t),({content:e,isUrl:i})=>{var r;return i?(r=this.Z)===null||r===void 0?void 0:r.anonymizeUrl(e,{maskNames:!0}):this.bg(e)}),""):this.bg(t)}bg(t){t=this.N.anonymizePII(t);let e=t;t=this.Ur(t),t!==e&&(et.counters.redactedPII.count("name"),et.counters.redactedPII.count("name-in-custom-error"));let i=t;return t=this.nT(t),t!==i&&(et.counters.redactedPII.count("phone"),et.counters.redactedPII.count("phone-in-custom-error")),t}Ur(t){return csString.prototype.replace.call(t,gS,mS)}nT(t){return csString.prototype.replace.call(t,yS,ES)}}return s})(),lc=(()=>{let s;return function(n){function t(u,m){for(let y of u)if(i(y,m))return!0;return!1}n.isUrlMatching=t;function e(u,m){if(T(m)){for(let y of u)if(i(y,m))return!0}else if(Tr(m)){for(let y of u)if(i(y,csString(m)))return!0}return!1}n.isMatching=e;function i(u,m){let y=r(u,m);return u.negate?!y:y}function r(u,m){switch(u.rule_type==="date"&&(u.match_operation==="less_than"||u.match_operation==="greater_than")&&(m=(new csDate(m).valueOf()/1e3).toFixed(0)),u.match_operation){case"exact":switch(u.rule_type){case"string":return T(u.pattern)?csString.prototype.toLowerCase.call(m)===csString.prototype.toLowerCase.call(u.pattern):!1;case"boolean":return m===u.pattern||m===csString(u.pattern);case"number":return yt(m)?Number(m)===Number(u.pattern):!1;default:return m===u.pattern}case"starts_with":return T(u.pattern)?csString.prototype.indexOf.call(m,u.pattern)===0:!1;case"ends_with":return T(u.pattern)?Qs(m,u.pattern):!1;case"contains":return T(u.pattern)?csString.prototype.indexOf.call(m,u.pattern)!==-1:!1;case"regex":if(!T(u.pattern))return!1;try{return new csRegExp(u.pattern).test(m)}catch(y){return L.warn(`targeting.matchOperation.regex invalid ${y==null?void 0:y.message}`),!1}case"simple":return T(u.pattern)?p(m)===p(u.pattern):!1;case"greater_than":return Number(m)>Number(u.pattern);case"less_than":return Number(m)<Number(u.pattern);case"exact_date":{let y=Number(u.pattern);if(!Ot(y))return!1;let S=new csDate(y*1e3);return new csDate(m).toDateString()===S.toDateString()}case"exact_days_ago":return o(u,m);case"more_than_days_ago":return c(u,m);case"less_than_days_ago":return l(u,m);case"unknown":return h(m);default:return L.warn(`targeting.matchOperation.regex not managed operation ${u.match_operation}`),!1}}function o(u,m){let y=new csDate,S=y.setDate(y.getDate()-Number(u.pattern)),C=new csDate(S);return new csDate(m).toDateString()===C.toDateString()}function c(u,m){let y=Number(u.pattern);if(!Ot(y))return!1;let S=Number(y)+1,C=new csDate,M=new csDate(C);return M.setDate(C.getDate()-S),new csDate(m).getTime()<=M.getTime()}function l(u,m){let y=Number(u.pattern);if(!Ot(y))return!1;if(y===0)return o(u,m);let S=new csDate,C=new csDate(S);return C.setDate(S.getDate()-y),new csDate(m).getTime()>=C.getTime()}function h(u){return yt(u)?T(u)?csString.prototype.trim.call(u)==="":Tr(u)?u===!0:Ot(u)?u!==0:!1:!0}function p(u){let m=Bt(u,"http://")||Bt(u,"https://")?u:`https://${u}`,y=po(m);return y!==null?csString.prototype.replace.call(y.host,/^www./,""):u}}(s||(s={})),s})(),vS=(()=>{class s{constructor(){this.Ag=[],this.Tg=[]}setTargetingRules(t){for(let e of t)e.component==="url"?csArray.prototype.push.call(this.Ag,e):e.component==="trigger"&&csArray.prototype.push.call(this.Tg,e)}matchUrl(t){return lc.isUrlMatching(this.Ag,t)}matchTrigger(t){return lc.isMatching(this.Tg,t)}}return s})(),_S=(()=>{class s extends Et{constructor(t,e,i){super(),this.Pa=t,this.jh=e,this.R=i}init(){this.Hh=new vS,this.Pa&&this.Hh.setTargetingRules(this.Pa)}onStart(){}checkInitialUrlTargetingRules(){let t=this.R.getAnonymizedUrl();this.Bh(t,"url")&&this.jh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Bh(t,"url")&&this.jh()}onExternalEvent(t){this.isStarted&&this.Bh(t.name,"trigger")&&this.jh()}Bh(t,e){var i,r;return e==="url"&&T(t)&&(!((i=this.Hh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((r=this.Hh)===null||r===void 0)&&r.matchTrigger(t)))}}return s})(),wS=(()=>{class s{constructor(t,e,i,r,o,c){this.Pa=t,this.rT=e,this.S=i,this.ut=r,this.it=o,this.R=c}init(){this.Gr=new _S(this.Pa,this.rT,this.R),this.it.addListener(this.Gr),this.Gr.init()}start(){this.Gr.start()}stop(){this.Gr.stop()}checkInitialUrlTargetingRules(){this.Gr.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this.ut.getInitialCollectState();t===H.ANALYTICS_ONLY?this.S.emitCollectStateChange(H.ANALYTICS_ONLY_RULES_TARGETING,Gt.ETR_OFF):t===H.RECORDING_GLOBAL_SAMPLING&&this.S.emitCollectStateChange(H.RECORDING_RULES_TARGETING,Gt.ETR_OFF)}}return s})();var bS=["addUserProperties"];var AS=(()=>{let s;return function(n){n.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),TS=(()=>{class s{constructor(){}static init(t){(!this.Fh||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Fh=new Map,i){let r=csString.prototype.split.call(i,".");for(let o=0;o<r.length;o++){let[c,l]=csString.prototype.split.call(r[o],"=");this.Fh.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Fh)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(AS.COMPRESSION_DISABLED)}static Log(t){return(e,i,r)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=r.value;RS(s.getString("debugLog"),t)&&(r.value=function(...p){return console.log(l,...p),h.bind(this)(...p)})}}}return s})();function RS(s,n){var t;return s==null?!1:s===n||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+n+")(,|$)")))===null||t===void 0)&&t.length)}function hc(){function i(a){let f=a.length;for(;--f>=0;)a[f]=0}let r=0,o=1,c=2,l=3,h=258,p=29,u=256,m=u+1+p,y=30,S=19,C=2*m+1,M=15,b=16,v=7,k=256,I=16,R=17,F=18,G=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),rt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),At=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),vt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_=512,x=new Array((m+2)*2);i(x);let j=new Array(y*2);i(j);let z=new Array(_);i(z);let it=new Array(h-l+1);i(it);let St=new Array(p);i(St);let xt=new Array(y);i(xt);function He(a,f,g,E,d){this.static_tree=a,this.extra_bits=f,this.extra_base=g,this.elems=E,this.max_length=d,this.has_stree=a&&a.length}let hs,Ps,Be;function us(a,f){this.dyn_tree=a,this.max_code=0,this.stat_desc=f}let ds=a=>a<256?z[a]:z[256+(a>>>7)],Ie=(a,f)=>{a.pending_buf[a.pending++]=f&255,a.pending_buf[a.pending++]=f>>>8&255},It=(a,f,g)=>{a.bi_valid>b-g?(a.bi_buf|=f<<a.bi_valid&65535,Ie(a,a.bi_buf),a.bi_buf=f>>b-a.bi_valid,a.bi_valid+=g-b):(a.bi_buf|=f<<a.bi_valid&65535,a.bi_valid+=g)},Ft=(a,f,g)=>{It(a,g[f*2],g[f*2+1])},ni=(a,f)=>{let g=0;do g|=a&1,a>>>=1,g<<=1;while(--f>0);return g>>>1},qn=a=>{a.bi_valid===16?(Ie(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},Wn=(a,f)=>{let g=f.dyn_tree,E=f.max_code,d=f.stat_desc.static_tree,A=f.stat_desc.has_stree,w=f.stat_desc.extra_bits,N=f.stat_desc.extra_base,Z=f.stat_desc.max_length,$,Kt,Ke,lt,ys,Ms,Wi=0;for(lt=0;lt<=M;lt++)a.bl_count[lt]=0;for(g[a.heap[a.heap_max]*2+1]=0,$=a.heap_max+1;$<C;$++)Kt=a.heap[$],lt=g[g[Kt*2+1]*2+1]+1,lt>Z&&(lt=Z,Wi++),g[Kt*2+1]=lt,!(Kt>E)&&(a.bl_count[lt]++,ys=0,Kt>=N&&(ys=w[Kt-N]),Ms=g[Kt*2],a.opt_len+=Ms*(lt+ys),A&&(a.static_len+=Ms*(d[Kt*2+1]+ys)));if(Wi!==0){do{for(lt=Z-1;a.bl_count[lt]===0;)lt--;a.bl_count[lt]--,a.bl_count[lt+1]+=2,a.bl_count[Z]--,Wi-=2}while(Wi>0);for(lt=Z;lt!==0;lt--)for(Kt=a.bl_count[lt];Kt!==0;)Ke=a.heap[--$],!(Ke>E)&&(g[Ke*2+1]!==lt&&(a.opt_len+=(lt-g[Ke*2+1])*g[Ke*2],g[Ke*2+1]=lt),Kt--)}},ri=(a,f,g)=>{let E=new Array(M+1),d=0,A,w;for(A=1;A<=M;A++)E[A]=d=d+g[A-1]<<1;for(w=0;w<=f;w++){let N=a[w*2+1];N!==0&&(a[w*2]=ni(E[N]++,N))}},jo=()=>{let a,f,g,E,d,A=new Array(M+1);for(g=0,E=0;E<p-1;E++)for(St[E]=g,a=0;a<1<<G[E];a++)it[g++]=E;for(it[g-1]=E,d=0,E=0;E<16;E++)for(xt[E]=d,a=0;a<1<<rt[E];a++)z[d++]=E;for(d>>=7;E<y;E++)for(xt[E]=d<<7,a=0;a<1<<rt[E]-7;a++)z[256+d++]=E;for(f=0;f<=M;f++)A[f]=0;for(a=0;a<=143;)x[a*2+1]=8,a++,A[8]++;for(;a<=255;)x[a*2+1]=9,a++,A[9]++;for(;a<=279;)x[a*2+1]=7,a++,A[7]++;for(;a<=287;)x[a*2+1]=8,a++,A[8]++;for(ri(x,m+1,A),a=0;a<y;a++)j[a*2+1]=5,j[a*2]=ni(a,5);hs=new He(x,G,u+1,m,M),Ps=new He(j,rt,0,y,M),Be=new He(new Array(0),At,0,S,v)},Ho=a=>{let f;for(f=0;f<m;f++)a.dyn_ltree[f*2]=0;for(f=0;f<y;f++)a.dyn_dtree[f*2]=0;for(f=0;f<S;f++)a.bl_tree[f*2]=0;a.dyn_ltree[k*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Bo=a=>{a.bi_valid>8?Ie(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},Mu=(a,f,g,E)=>{Bo(a),E&&(Ie(a,g),Ie(a,~g)),a.pending_buf.set(a.window.subarray(f,f+g),a.pending),a.pending+=g},Fo=(a,f,g,E)=>{let d=f*2,A=g*2;return a[d]<a[A]||a[d]===a[A]&&E[f]<=E[g]},Yn=(a,f,g)=>{let E=a.heap[g],d=g<<1;for(;d<=a.heap_len&&(d<a.heap_len&&Fo(f,a.heap[d+1],a.heap[d],a.depth)&&d++,!Fo(f,E,a.heap[d],a.depth));)a.heap[g]=a.heap[d],g=d,d<<=1;a.heap[g]=E},zo=(a,f,g)=>{let E,d,A=0,w,N;if(a.last_lit!==0)do E=a.pending_buf[a.d_buf+A*2]<<8|a.pending_buf[a.d_buf+A*2+1],d=a.pending_buf[a.l_buf+A],A++,E===0?Ft(a,d,f):(w=it[d],Ft(a,w+u+1,f),N=G[w],N!==0&&(d-=St[w],It(a,d,N)),E--,w=ds(E),Ft(a,w,g),N=rt[w],N!==0&&(E-=xt[w],It(a,E,N)));while(A<a.last_lit);Ft(a,k,f)},Xn=(a,f)=>{let g=f.dyn_tree,E=f.stat_desc.static_tree,d=f.stat_desc.has_stree,A=f.stat_desc.elems,w,N,Z=-1,$;for(a.heap_len=0,a.heap_max=C,w=0;w<A;w++)g[w*2]!==0?(a.heap[++a.heap_len]=Z=w,a.depth[w]=0):g[w*2+1]=0;for(;a.heap_len<2;)$=a.heap[++a.heap_len]=Z<2?++Z:0,g[$*2]=1,a.depth[$]=0,a.opt_len--,d&&(a.static_len-=E[$*2+1]);for(f.max_code=Z,w=a.heap_len>>1;w>=1;w--)Yn(a,g,w);$=A;do w=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Yn(a,g,1),N=a.heap[1],a.heap[--a.heap_max]=w,a.heap[--a.heap_max]=N,g[$*2]=g[w*2]+g[N*2],a.depth[$]=(a.depth[w]>=a.depth[N]?a.depth[w]:a.depth[N])+1,g[w*2+1]=g[N*2+1]=$,a.heap[1]=$++,Yn(a,g,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],Wn(a,f),ri(g,Z,a.bl_count)},$o=(a,f,g)=>{let E,d=-1,A,w=f[0*2+1],N=0,Z=7,$=4;for(w===0&&(Z=138,$=3),f[(g+1)*2+1]=65535,E=0;E<=g;E++)A=w,w=f[(E+1)*2+1],!(++N<Z&&A===w)&&(N<$?a.bl_tree[A*2]+=N:A!==0?(A!==d&&a.bl_tree[A*2]++,a.bl_tree[I*2]++):N<=10?a.bl_tree[R*2]++:a.bl_tree[F*2]++,N=0,d=A,w===0?(Z=138,$=3):A===w?(Z=6,$=3):(Z=7,$=4))},Go=(a,f,g)=>{let E,d=-1,A,w=f[0*2+1],N=0,Z=7,$=4;for(w===0&&(Z=138,$=3),E=0;E<=g;E++)if(A=w,w=f[(E+1)*2+1],!(++N<Z&&A===w)){if(N<$)do Ft(a,A,a.bl_tree);while(--N!==0);else A!==0?(A!==d&&(Ft(a,A,a.bl_tree),N--),Ft(a,I,a.bl_tree),It(a,N-3,2)):N<=10?(Ft(a,R,a.bl_tree),It(a,N-3,3)):(Ft(a,F,a.bl_tree),It(a,N-11,7));N=0,d=A,w===0?(Z=138,$=3):A===w?(Z=6,$=3):(Z=7,$=4)}},ku=a=>{let f;for($o(a,a.dyn_ltree,a.l_desc.max_code),$o(a,a.dyn_dtree,a.d_desc.max_code),Xn(a,a.bl_desc),f=S-1;f>=3&&a.bl_tree[vt[f]*2+1]===0;f--);return a.opt_len+=3*(f+1)+5+5+4,f},Du=(a,f,g,E)=>{let d;for(It(a,f-257,5),It(a,g-1,5),It(a,E-4,4),d=0;d<E;d++)It(a,a.bl_tree[vt[d]*2+1],3);Go(a,a.dyn_ltree,f-1),Go(a,a.dyn_dtree,g-1)},Lu=a=>{let f=4093624447,g;for(g=0;g<=31;g++,f>>>=1)if(f&1&&a.dyn_ltree[g*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(g=32;g<u;g++)if(a.dyn_ltree[g*2]!==0)return 1;return 0},qo=!1,xu=a=>{qo||(jo(),qo=!0),a.l_desc=new us(a.dyn_ltree,hs),a.d_desc=new us(a.dyn_dtree,Ps),a.bl_desc=new us(a.bl_tree,Be),a.bi_buf=0,a.bi_valid=0,Ho(a)},Wo=(a,f,g,E)=>{It(a,(r<<1)+(E?1:0),3),Mu(a,f,g,!0)},Uu=a=>{It(a,o<<1,3),Ft(a,k,x),qn(a)},Vu=(a,f,g,E)=>{let d,A,w=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=Lu(a)),Xn(a,a.l_desc),Xn(a,a.d_desc),w=ku(a),d=a.opt_len+3+7>>>3,A=a.static_len+3+7>>>3,A<=d&&(d=A)):d=A=g+5,g+4<=d&&f!==-1?Wo(a,f,g,E):a.strategy===4||A===d?(It(a,(o<<1)+(E?1:0),3),zo(a,x,j)):(It(a,(c<<1)+(E?1:0),3),Du(a,a.l_desc.max_code+1,a.d_desc.max_code+1,w+1),zo(a,a.dyn_ltree,a.dyn_dtree)),Ho(a),E&&Bo(a)},ju=(a,f,g)=>(a.pending_buf[a.d_buf+a.last_lit*2]=f>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=f&255,a.pending_buf[a.l_buf+a.last_lit]=g&255,a.last_lit++,f===0?a.dyn_ltree[g*2]++:(a.matches++,f--,a.dyn_ltree[(it[g]+u+1)*2]++,a.dyn_dtree[ds(f)*2]++),a.last_lit===a.lit_bufsize-1);var Hu=xu,Bu=Wo,Fu=Vu,zu=ju,$u=Uu,Gu={_tr_init:Hu,_tr_stored_block:Bu,_tr_flush_block:Fu,_tr_tally:zu,_tr_align:$u},Yo=(a,f,g,E)=>{let d=a&65535|0,A=a>>>16&65535|0,w=0;for(;g!==0;){w=g>2e3?2e3:g,g-=w;do d=d+f[E++]|0,A=A+d|0;while(--w);d%=65521,A%=65521}return d|A<<16|0};let qu=()=>{let a,f=[];for(var g=0;g<256;g++){a=g;for(var E=0;E<8;E++)a=a&1?3988292384^a>>>1:a>>>1;f[g]=a}return f},Wu=new Uint32Array(qu());var Fe=(a,f,g,E)=>{let d=Wu,A=E+g;a^=-1;for(let w=E;w<A;w++)a=a>>>8^d[(a^f[w])&255];return a^-1},Vi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Xo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:Yu,_tr_stored_block:Xu,_tr_flush_block:Ku,_tr_tally:ze,_tr_align:Ju}=Gu,{Z_NO_FLUSH:ps,Z_PARTIAL_FLUSH:Qu,Z_FULL_FLUSH:Zu,Z_FINISH:$e,Z_BLOCK:Ko,Z_OK:pe,Z_STREAM_END:Jo,Z_STREAM_ERROR:se,Z_DATA_ERROR:td,Z_BUF_ERROR:Kn,Z_DEFAULT_COMPRESSION:ed,Z_FILTERED:sd,Z_HUFFMAN_ONLY:ji,Z_RLE:id,Z_FIXED:nd,Z_DEFAULT_STRATEGY:rd,Z_UNKNOWN:od,Z_DEFLATED:Hi}=Xo,ad=9,cd=15,ld=8,Jn=256+1+29,hd=30,ud=19,dd=2*Jn+1,pd=15,Q=3,Ge=258,re=Ge+Q+1,fd=32,Bi=42,Qn=69,Fi=73,zi=91,$i=103,fs=113,oi=666,Tt=1,ai=2,gs=3,Os=4,gd=3,qe=(a,f)=>(a.msg=Vi[f],f),Qo=a=>(a<<1)-(a>4?9:0),We=a=>{let f=a.length;for(;--f>=0;)a[f]=0},Ye=(a,f,g)=>(f<<a.hash_shift^g)&a.hash_mask,Xe=a=>{let f=a.state,g=f.pending;g>a.avail_out&&(g=a.avail_out),g!==0&&(a.output.set(f.pending_buf.subarray(f.pending_out,f.pending_out+g),a.next_out),a.next_out+=g,f.pending_out+=g,a.total_out+=g,a.avail_out-=g,f.pending-=g,f.pending===0&&(f.pending_out=0))},kt=(a,f)=>{Ku(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,f),a.block_start=a.strstart,Xe(a.strm)},st=(a,f)=>{a.pending_buf[a.pending++]=f},ci=(a,f)=>{a.pending_buf[a.pending++]=f>>>8&255,a.pending_buf[a.pending++]=f&255},md=(a,f,g,E)=>{let d=a.avail_in;return d>E&&(d=E),d===0?0:(a.avail_in-=d,f.set(a.input.subarray(a.next_in,a.next_in+d),g),a.state.wrap===1?a.adler=Yo(a.adler,f,d,g):a.state.wrap===2&&(a.adler=Fe(a.adler,f,d,g)),a.next_in+=d,a.total_in+=d,d)},Zo=(a,f)=>{let g=a.max_chain_length,E=a.strstart,d,A,w=a.prev_length,N=a.nice_match,Z=a.strstart>a.w_size-re?a.strstart-(a.w_size-re):0,$=a.window,Kt=a.w_mask,Ke=a.prev,lt=a.strstart+Ge,ys=$[E+w-1],Ms=$[E+w];a.prev_length>=a.good_match&&(g>>=2),N>a.lookahead&&(N=a.lookahead);do if(d=f,!($[d+w]!==Ms||$[d+w-1]!==ys||$[d]!==$[E]||$[++d]!==$[E+1])){E+=2,d++;do;while($[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&E<lt);if(A=Ge-(lt-E),E=lt-Ge,A>w){if(a.match_start=f,w=A,A>=N)break;ys=$[E+w-1],Ms=$[E+w]}}while((f=Ke[f&Kt])>Z&&--g!==0);return w<=a.lookahead?w:a.lookahead},ms=a=>{let f=a.w_size,g,E,d,A,w;do{if(A=a.window_size-a.lookahead-a.strstart,a.strstart>=f+(f-re)){a.window.set(a.window.subarray(f,f+f),0),a.match_start-=f,a.strstart-=f,a.block_start-=f,E=a.hash_size,g=E;do d=a.head[--g],a.head[g]=d>=f?d-f:0;while(--E);E=f,g=E;do d=a.prev[--g],a.prev[g]=d>=f?d-f:0;while(--E);A+=f}if(a.strm.avail_in===0)break;if(E=md(a.strm,a.window,a.strstart+a.lookahead,A),a.lookahead+=E,a.lookahead+a.insert>=Q)for(w=a.strstart-a.insert,a.ins_h=a.window[w],a.ins_h=Ye(a,a.ins_h,a.window[w+1]);a.insert&&(a.ins_h=Ye(a,a.ins_h,a.window[w+Q-1]),a.prev[w&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=w,w++,a.insert--,!(a.lookahead+a.insert<Q)););}while(a.lookahead<re&&a.strm.avail_in!==0)},yd=(a,f)=>{let g=65535;for(g>a.pending_buf_size-5&&(g=a.pending_buf_size-5);;){if(a.lookahead<=1){if(ms(a),a.lookahead===0&&f===ps)return Tt;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let E=a.block_start+g;if((a.strstart===0||a.strstart>=E)&&(a.lookahead=a.strstart-E,a.strstart=E,kt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-re&&(kt(a,!1),a.strm.avail_out===0))return Tt}return a.insert=0,f===$e?(kt(a,!0),a.strm.avail_out===0?gs:Os):(a.strstart>a.block_start&&(kt(a,!1),a.strm.avail_out===0),Tt)},Zn=(a,f)=>{let g,E;for(;;){if(a.lookahead<re){if(ms(a),a.lookahead<re&&f===ps)return Tt;if(a.lookahead===0)break}if(g=0,a.lookahead>=Q&&(a.ins_h=Ye(a,a.ins_h,a.window[a.strstart+Q-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),g!==0&&a.strstart-g<=a.w_size-re&&(a.match_length=Zo(a,g)),a.match_length>=Q)if(E=ze(a,a.strstart-a.match_start,a.match_length-Q),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=Q){a.match_length--;do a.strstart++,a.ins_h=Ye(a,a.ins_h,a.window[a.strstart+Q-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=Ye(a,a.ins_h,a.window[a.strstart+1]);else E=ze(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(E&&(kt(a,!1),a.strm.avail_out===0))return Tt}return a.insert=a.strstart<Q-1?a.strstart:Q-1,f===$e?(kt(a,!0),a.strm.avail_out===0?gs:Os):a.last_lit&&(kt(a,!1),a.strm.avail_out===0)?Tt:ai},Ns=(a,f)=>{let g,E,d;for(;;){if(a.lookahead<re){if(ms(a),a.lookahead<re&&f===ps)return Tt;if(a.lookahead===0)break}if(g=0,a.lookahead>=Q&&(a.ins_h=Ye(a,a.ins_h,a.window[a.strstart+Q-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=Q-1,g!==0&&a.prev_length<a.max_lazy_match&&a.strstart-g<=a.w_size-re&&(a.match_length=Zo(a,g),a.match_length<=5&&(a.strategy===sd||a.match_length===Q&&a.strstart-a.match_start>4096)&&(a.match_length=Q-1)),a.prev_length>=Q&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-Q,E=ze(a,a.strstart-1-a.prev_match,a.prev_length-Q),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=Ye(a,a.ins_h,a.window[a.strstart+Q-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=Q-1,a.strstart++,E&&(kt(a,!1),a.strm.avail_out===0))return Tt}else if(a.match_available){if(E=ze(a,0,a.window[a.strstart-1]),E&&kt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return Tt}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(E=ze(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<Q-1?a.strstart:Q-1,f===$e?(kt(a,!0),a.strm.avail_out===0?gs:Os):a.last_lit&&(kt(a,!1),a.strm.avail_out===0)?Tt:ai},Ed=(a,f)=>{let g,E,d,A,w=a.window;for(;;){if(a.lookahead<=Ge){if(ms(a),a.lookahead<=Ge&&f===ps)return Tt;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=Q&&a.strstart>0&&(d=a.strstart-1,E=w[d],E===w[++d]&&E===w[++d]&&E===w[++d])){A=a.strstart+Ge;do;while(E===w[++d]&&E===w[++d]&&E===w[++d]&&E===w[++d]&&E===w[++d]&&E===w[++d]&&E===w[++d]&&E===w[++d]&&d<A);a.match_length=Ge-(A-d),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=Q?(g=ze(a,1,a.match_length-Q),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(g=ze(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),g&&(kt(a,!1),a.strm.avail_out===0))return Tt}return a.insert=0,f===$e?(kt(a,!0),a.strm.avail_out===0?gs:Os):a.last_lit&&(kt(a,!1),a.strm.avail_out===0)?Tt:ai},Sd=(a,f)=>{let g;for(;;){if(a.lookahead===0&&(ms(a),a.lookahead===0)){if(f===ps)return Tt;break}if(a.match_length=0,g=ze(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,g&&(kt(a,!1),a.strm.avail_out===0))return Tt}return a.insert=0,f===$e?(kt(a,!0),a.strm.avail_out===0?gs:Os):a.last_lit&&(kt(a,!1),a.strm.avail_out===0)?Tt:ai};function fe(a,f,g,E,d){this.good_length=a,this.max_lazy=f,this.nice_length=g,this.max_chain=E,this.func=d}let li=[new fe(0,0,0,0,yd),new fe(4,4,8,4,Zn),new fe(4,5,16,8,Zn),new fe(4,6,32,32,Zn),new fe(4,4,16,16,Ns),new fe(8,16,32,32,Ns),new fe(8,16,128,128,Ns),new fe(8,32,128,256,Ns),new fe(32,128,258,1024,Ns),new fe(32,258,258,4096,Ns)],vd=a=>{a.window_size=2*a.w_size,We(a.head),a.max_lazy_match=li[a.level].max_lazy,a.good_match=li[a.level].good_length,a.nice_match=li[a.level].nice_length,a.max_chain_length=li[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=Q-1,a.match_available=0,a.ins_h=0};function _d(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Hi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(dd*2),this.dyn_dtree=new Uint16Array((2*hd+1)*2),this.bl_tree=new Uint16Array((2*ud+1)*2),We(this.dyn_ltree),We(this.dyn_dtree),We(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(pd+1),this.heap=new Uint16Array(2*Jn+1),We(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Jn+1),We(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let ta=a=>{if(!a||!a.state)return qe(a,se);a.total_in=a.total_out=0,a.data_type=od;let f=a.state;return f.pending=0,f.pending_out=0,f.wrap<0&&(f.wrap=-f.wrap),f.status=f.wrap?Bi:fs,a.adler=f.wrap===2?0:1,f.last_flush=ps,Yu(f),pe},ea=a=>{let f=ta(a);return f===pe&&vd(a.state),f},wd=(a,f)=>!a||!a.state||a.state.wrap!==2?se:(a.state.gzhead=f,pe),sa=(a,f,g,E,d,A)=>{if(!a)return se;let w=1;if(f===ed&&(f=6),E<0?(w=0,E=-E):E>15&&(w=2,E-=16),d<1||d>ad||g!==Hi||E<8||E>15||f<0||f>9||A<0||A>nd)return qe(a,se);E===8&&(E=9);let N=new _d;return a.state=N,N.strm=a,N.wrap=w,N.gzhead=null,N.w_bits=E,N.w_size=1<<N.w_bits,N.w_mask=N.w_size-1,N.hash_bits=d+7,N.hash_size=1<<N.hash_bits,N.hash_mask=N.hash_size-1,N.hash_shift=~~((N.hash_bits+Q-1)/Q),N.window=new Uint8Array(N.w_size*2),N.head=new Uint16Array(N.hash_size),N.prev=new Uint16Array(N.w_size),N.lit_bufsize=1<<d+6,N.pending_buf_size=N.lit_bufsize*4,N.pending_buf=new Uint8Array(N.pending_buf_size),N.d_buf=1*N.lit_bufsize,N.l_buf=3*N.lit_bufsize,N.level=f,N.strategy=A,N.method=g,ea(a)},bd=(a,f)=>sa(a,f,Hi,cd,ld,rd),Ad=(a,f)=>{let g,E;if(!a||!a.state||f>Ko||f<0)return a?qe(a,se):se;let d=a.state;if(!a.output||!a.input&&a.avail_in!==0||d.status===oi&&f!==$e)return qe(a,a.avail_out===0?Kn:se);d.strm=a;let A=d.last_flush;if(d.last_flush=f,d.status===Bi)if(d.wrap===2)a.adler=0,st(d,31),st(d,139),st(d,8),d.gzhead?(st(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),st(d,d.gzhead.time&255),st(d,d.gzhead.time>>8&255),st(d,d.gzhead.time>>16&255),st(d,d.gzhead.time>>24&255),st(d,d.level===9?2:d.strategy>=ji||d.level<2?4:0),st(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(st(d,d.gzhead.extra.length&255),st(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(a.adler=Fe(a.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=Qn):(st(d,0),st(d,0),st(d,0),st(d,0),st(d,0),st(d,d.level===9?2:d.strategy>=ji||d.level<2?4:0),st(d,gd),d.status=fs);else{let w=Hi+(d.w_bits-8<<4)<<8,N=-1;d.strategy>=ji||d.level<2?N=0:d.level<6?N=1:d.level===6?N=2:N=3,w|=N<<6,d.strstart!==0&&(w|=fd),w+=31-w%31,d.status=fs,ci(d,w),d.strstart!==0&&(ci(d,a.adler>>>16),ci(d,a.adler&65535)),a.adler=1}if(d.status===Qn)if(d.gzhead.extra){for(g=d.pending;d.gzindex<(d.gzhead.extra.length&65535)&&!(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=Fe(a.adler,d.pending_buf,d.pending-g,g)),Xe(a),g=d.pending,d.pending===d.pending_buf_size));)st(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>g&&(a.adler=Fe(a.adler,d.pending_buf,d.pending-g,g)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=Fi)}else d.status=Fi;if(d.status===Fi)if(d.gzhead.name){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=Fe(a.adler,d.pending_buf,d.pending-g,g)),Xe(a),g=d.pending,d.pending===d.pending_buf_size)){E=1;break}d.gzindex<d.gzhead.name.length?E=d.gzhead.name.charCodeAt(d.gzindex++)&255:E=0,st(d,E)}while(E!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=Fe(a.adler,d.pending_buf,d.pending-g,g)),E===0&&(d.gzindex=0,d.status=zi)}else d.status=zi;if(d.status===zi)if(d.gzhead.comment){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=Fe(a.adler,d.pending_buf,d.pending-g,g)),Xe(a),g=d.pending,d.pending===d.pending_buf_size)){E=1;break}d.gzindex<d.gzhead.comment.length?E=d.gzhead.comment.charCodeAt(d.gzindex++)&255:E=0,st(d,E)}while(E!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=Fe(a.adler,d.pending_buf,d.pending-g,g)),E===0&&(d.status=$i)}else d.status=$i;if(d.status===$i&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&Xe(a),d.pending+2<=d.pending_buf_size&&(st(d,a.adler&255),st(d,a.adler>>8&255),a.adler=0,d.status=fs)):d.status=fs),d.pending!==0){if(Xe(a),a.avail_out===0)return d.last_flush=-1,pe}else if(a.avail_in===0&&Qo(f)<=Qo(A)&&f!==$e)return qe(a,Kn);if(d.status===oi&&a.avail_in!==0)return qe(a,Kn);if(a.avail_in!==0||d.lookahead!==0||f!==ps&&d.status!==oi){let w=d.strategy===ji?Sd(d,f):d.strategy===id?Ed(d,f):li[d.level].func(d,f);if((w===gs||w===Os)&&(d.status=oi),w===Tt||w===gs)return a.avail_out===0&&(d.last_flush=-1),pe;if(w===ai&&(f===Qu?Ju(d):f!==Ko&&(Xu(d,0,0,!1),f===Zu&&(We(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),Xe(a),a.avail_out===0))return d.last_flush=-1,pe}return f!==$e?pe:d.wrap<=0?Jo:(d.wrap===2?(st(d,a.adler&255),st(d,a.adler>>8&255),st(d,a.adler>>16&255),st(d,a.adler>>24&255),st(d,a.total_in&255),st(d,a.total_in>>8&255),st(d,a.total_in>>16&255),st(d,a.total_in>>24&255)):(ci(d,a.adler>>>16),ci(d,a.adler&65535)),Xe(a),d.wrap>0&&(d.wrap=-d.wrap),d.pending!==0?pe:Jo)},Td=a=>{if(!a||!a.state)return se;let f=a.state.status;return f!==Bi&&f!==Qn&&f!==Fi&&f!==zi&&f!==$i&&f!==fs&&f!==oi?qe(a,se):(a.state=null,f===fs?qe(a,td):pe)},Rd=(a,f)=>{let g=f.length;if(!a||!a.state)return se;let E=a.state,d=E.wrap;if(d===2||d===1&&E.status!==Bi||E.lookahead)return se;if(d===1&&(a.adler=Yo(a.adler,f,g,0)),E.wrap=0,g>=E.w_size){d===0&&(We(E.head),E.strstart=0,E.block_start=0,E.insert=0);let Z=new Uint8Array(E.w_size);Z.set(f.subarray(g-E.w_size,g),0),f=Z,g=E.w_size}let A=a.avail_in,w=a.next_in,N=a.input;for(a.avail_in=g,a.next_in=0,a.input=f,ms(E);E.lookahead>=Q;){let Z=E.strstart,$=E.lookahead-(Q-1);do E.ins_h=Ye(E,E.ins_h,E.window[Z+Q-1]),E.prev[Z&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=Z,Z++;while(--$);E.strstart=Z,E.lookahead=Q-1,ms(E)}return E.strstart+=E.lookahead,E.block_start=E.strstart,E.insert=E.lookahead,E.lookahead=0,E.match_length=E.prev_length=Q-1,E.match_available=0,a.next_in=w,a.input=N,a.avail_in=A,E.wrap=d,pe};var Cd=bd,Id=sa,Pd=ea,Od=ta,Nd=wd,Md=Ad,kd=Td,Dd=Rd,Ld="pako deflate (from Nodeca project)",hi={deflateInit:Cd,deflateInit2:Id,deflateReset:Pd,deflateResetKeep:Od,deflateSetHeader:Nd,deflate:Md,deflateEnd:kd,deflateSetDictionary:Dd,deflateInfo:Ld};let xd=(a,f)=>Object.prototype.hasOwnProperty.call(a,f);var Ud=function(a){let f=Array.prototype.slice.call(arguments,1);for(;f.length;){let g=f.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(let E in g)xd(g,E)&&(a[E]=g[E])}}return a},Vd=a=>{let f=0;for(let E=0,d=a.length;E<d;E++)f+=a[E].length;let g=new Uint8Array(f);for(let E=0,d=0,A=a.length;E<A;E++){let w=a[E];g.set(w,d),d+=w.length}return g},ia={assign:Ud,flattenChunks:Vd};let na=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{na=!1}let ui=new Uint8Array(256);for(let a=0;a<256;a++)ui[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;ui[254]=ui[254]=1;var jd=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let f,g,E,d,A,w=a.length,N=0;for(d=0;d<w;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<w&&(E=a.charCodeAt(d+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),d++)),N+=g<128?1:g<2048?2:g<65536?3:4;for(f=new Uint8Array(N),A=0,d=0;A<N;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<w&&(E=a.charCodeAt(d+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),d++)),g<128?f[A++]=g:g<2048?(f[A++]=192|g>>>6,f[A++]=128|g&63):g<65536?(f[A++]=224|g>>>12,f[A++]=128|g>>>6&63,f[A++]=128|g&63):(f[A++]=240|g>>>18,f[A++]=128|g>>>12&63,f[A++]=128|g>>>6&63,f[A++]=128|g&63);return f};let ra=(a,f=a.length)=>{if(f<65534&&a.subarray&&na)return String.fromCharCode.apply(null,a.length===f?a:a.subarray(0,f));let g="";for(let E=0;E<f;E++)g+=String.fromCharCode(a[E]);return g};var Hd=(a,f)=>{let g=f||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,f));let E,d,A=new Array(g*2);for(d=0,E=0;E<g;){let w=a[E++];if(w<128){A[d++]=w;continue}let N=ui[w];if(N>4){A[d++]=65533,E+=N-1;continue}for(w&=N===2?31:N===3?15:7;N>1&&E<g;)w=w<<6|a[E++]&63,N--;if(N>1){A[d++]=65533;continue}w<65536?A[d++]=w:(w-=65536,A[d++]=55296|w>>10&1023,A[d++]=56320|w&1023)}return ra(A,d)},Bd=(a,f)=>{f=f||a.length,f>a.length&&(f=a.length);let g=f-1;for(;g>=0&&(a[g]&192)===128;)g--;return g<0||g===0?f:g+ui[a[g]]>f?g:f},oa={string2buf:jd,buf2string:Hd,utf8border:Bd};function Fd(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zd=Fd;let aa=Object.prototype.toString,{Z_NO_FLUSH:$d,Z_SYNC_FLUSH:Gd,Z_FULL_FLUSH:qd,Z_FINISH:Wd,Z_OK:Gi,Z_STREAM_END:Yd,Z_DEFAULT_COMPRESSION:Xd,Z_DEFAULT_STRATEGY:Kd,Z_DEFLATED:Jd}=Xo;function qi(a){this.options=ia.assign({level:Xd,method:Jd,chunkSize:16384,windowBits:15,memLevel:8,strategy:Kd},a||{});let f=this.options;f.raw&&f.windowBits>0?f.windowBits=-f.windowBits:f.gzip&&f.windowBits>0&&f.windowBits<16&&(f.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zd,this.strm.avail_out=0;let g=hi.deflateInit2(this.strm,f.level,f.method,f.windowBits,f.memLevel,f.strategy);if(g!==Gi)throw new Error(Vi[g]);if(f.header&&hi.deflateSetHeader(this.strm,f.header),f.dictionary){let E;if(typeof f.dictionary=="string"?E=oa.string2buf(f.dictionary):aa.call(f.dictionary)==="[object ArrayBuffer]"?E=new Uint8Array(f.dictionary):E=f.dictionary,g=hi.deflateSetDictionary(this.strm,E),g!==Gi)throw new Error(Vi[g]);this._dict_set=!0}}qi.prototype.push=function(a,f){let g=this.strm,E=this.options.chunkSize,d,A;if(this.ended)return!1;for(f===~~f?A=f:A=f===!0?Wd:$d,typeof a=="string"?g.input=oa.string2buf(a):aa.call(a)==="[object ArrayBuffer]"?g.input=new Uint8Array(a):g.input=a,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(E),g.next_out=0,g.avail_out=E),(A===Gd||A===qd)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(d=hi.deflate(g,A),d===Yd)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),d=hi.deflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===Gi;if(g.avail_out===0){this.onData(g.output);continue}if(A>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},qi.prototype.onData=function(a){this.chunks.push(a)},qi.prototype.onEnd=function(a){a===Gi&&(this.result=ia.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function Qd(a,f){f=f||{};let g=new qi(f);if(g.push(a,!0),g.err)throw g.msg||Vi[g.err];return g.result}function Zd(a,f){return f=f||{},f.gzip=!0,Qd(a,f)}return(a,f,g)=>{let E=Zd(a);return f==="base64"?E=btoa(ra(E)):E=E.buffer,g&&g(E),E}}var CS=(()=>{class s extends Zc{constructor(t){super(t),this.algorithm=Pn.GZIP,this.Ig=hc(),this.aT=(i,r,o)=>{let c=this.Ig(i,r);o(c)},this.compress=uc(),typeof CompressionStream!="undefined"&&vg||(this.compress=this.aT,this.getCompressorSourceCode=()=>hc.toString())}compressSync(t,e){return this.Ig(t,e)}getCompressorSourceCode(){return uc.toString()}}return s})();function uc(){let s=n=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([n]))});return(n,t,e)=>{let i=new Response(n).body.pipeThrough(new CompressionStream("gzip")),r=new Response(i).arrayBuffer();if(t==="base64"){r.then(o=>s(o)).then(o=>e(o));return}r.then(o=>e(o))}}var IS=(()=>{class s extends Zc{constructor(){super(...arguments),this.algorithm=Pn.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),qh=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!TS.isCompressionEnabled()?new IS(t):this.instance=new CS(t)}}return s})();var PS=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,m,y,S,C,M,b,v,k,I,R,F,G,rt,At,vt,_,x,j,z){this.et=t,this.pe=e,this.O=i,this.A=r,this.S=o,this.E=c,this.$h=l,this.f=h,this.Gh=p,this.Zs=u,this.Wr=m,this.Ee=y,this.N=S,this.K=C,this.Z=M,this.R=b,this.pT=v,this.it=k,this.ht=I,this.At=R,this.Og=F,this.ne=G,this.fT=rt,this.I=At,this.It=vt,this.U=_,this.qt=x,this.ut=j,this.vt=z,this.gT=(it=!1)=>{let St=this.A.getSession();St===null?(this.Nn=new wS(this.f.recordTargetingRules,this.Ng,this.S,this.ut,this.it,this.R),this.Nn.init(),this.Nn.start()):(St.collectState===H.RECORDING_RULES_TARGETING||St.collectState===H.ANALYTICS_ONLY_RULES_TARGETING)&&this.Ng(it)},this.Ng=(it=!1)=>{this.Mn.onLoad(()=>{var St,xt;(St=this.Nn)===null||St===void 0||St.emitTargetingCollectState(),(xt=this.Nn)===null||xt===void 0||xt.stop(),this.S.emitStartTracking(it)}),this.ka(it)},this.ka=(it=!1)=>{this.Zs.isActive()||(this.vt.init(),this.qh.start(it),this.Mn.start())},this.mT=()=>{this.S.emitBeforeSessionRenewal(),this.kn(!0),this.S.emitAfterSessionRenewal()},this.yT=()=>{this.S.emitBeforeSessionRenewal(),this.ut.refreshQuota(),this.ut.onQuotaReady(it=>{it!==H.QUOTA_REACHED&&(this.kn(!0),this.S.emitAfterSessionRenewal())})}}start(){var t;if(this.Gh.init(),this.Zs.init(),this.Zs.isActive())return;let e,i,r,o,c,l,h,p,u,m,y,S,C,M,b,v,k,I,R,F;this.I.schedule(()=>{C=new IE(this.A,this.O),v=new JE(C),S=new bh(this.K),M=new zh(()=>{}),k=new $h,F=new Gh;let G=new No(M,this.vt,k,R,F,this.Wh());b=new dS(this.Wh(),this.vt,G,k,I);let rt=new pS(this.S,this.E,this.vt,G,k,I,R);rt.init(),this.S.addListener(rt),e=new uE(this.f,this.et,this.O,this.K,S,this.E,C,new Dh(L),this.ht,this.It,this.it,b),i=new xy(this.E,this.A,this.f,this.et,this.pe,this.N),y=new jE(b,this.f);let At=new Oh(this.f);m=new DE(this.f,At,y,b,this.ht),m.init();let vt=new KE;r=new Oy(this.O,this.A,this.E,this.ht,At,this.f,vt,y),o=new Hy(this.f,this.et,this.O,this.E,this.N,C,this.R);let _;this.qh=new _E(this.f,this.E,this.S,this.et,this.O,this.A,this.Ee,this.At,this.Z,this.R,this.ne,vt,this.it,this.Xs,_),this.Mg=new TE(this.f,this.O,this.A,this.E),h=new ME(this.f,this.E,this.pe,this.et,this.it),p=new kE(this.E),u=new VE(this.f,new Yc(this.f,this.N),this.It),this.Mn=new Ah}),this.f.apiErrors.enabled&&this.I.schedule(()=>{this.ft=new Co,this.ET=new fS(this.E,this.ft),this.ET.init()}),this.f.apiErrors.enabled&&this.I.schedule(()=>{var G,rt,At;let vt;!((G=this.f.apiErrors.collectionRules)===null||G===void 0)&&G.length?vt=new Bh(this.f.apiErrors,this.N):vt=new Fh(this.f.apiErrors,this.N),this.pt=new Nh(new Uh,new Vh,vt),this.de=new Mh(this.ft,this.Z,!!(!((At=(rt=this.f)===null||rt===void 0?void 0:rt.experimental)===null||At===void 0)&&At.anonymizeNameInUrls)),this.zi=new ZE;let _=new FE(this.pt,this.de,this.f,this.et,this.ht,this.E,this.It);_.init(),this.S.addListener(_)}),this.f.jsErrorsEnabled&&this.I.schedule(()=>{this.As=new Ph,this.ue=new kh(this.N,this.R);let G=new YE(this.As,this.ue,this.f,this.et,this.ht,this.E,this.it,this.R,this.It);G.init(),this.S.addListener(G)}),this.I.schedule(()=>{this.Wr.init()}),this.I.schedule(()=>{r.init()}),this.I.schedule(()=>{i.init()}),this.I.schedule(()=>{o.init()}),this.I.schedule(()=>{this.Og.init()}),this.I.schedule(()=>{this.qh.init()}),this.I.schedule(()=>{this.Mg.init()}),this.I.schedule(()=>{h.init()}),this.I.schedule(()=>{this.pT.init()}),this.I.schedule(()=>{p.init()}),this.I.schedule(()=>{u.init()}),this.I.schedule(()=>{this.fT.init()}),this.I.schedule(()=>{this.S.addListener(this.Mg),this.S.addListener(this.$h),this.S.addListener(e),this.S.addListener(this.Wr),this.S.addListener(r),this.S.addListener(o),this.S.addListener(this.Og),this.S.addListener(this.qh),this.S.addListener(h),this.S.addListener(i),this.S.addListener(m),this.S.addListener(u),this.S.addListener(v)}),Ys.isRecordingSupported()&&this.I.schedule(()=>{let G=new Ay(y,this.A,this.f,this.et,this.E,this.N,C,M,this.ue,this.pt,this.de,this.ft,this.S,this.it,this.ht,this.ne,this.It,this.Z,this.zi,this.Wh(),this.vn,I);G.init(),this.S.addListener(G),r.setRecordingService(G.recordingService)}),this.I.schedule(()=>{e.init()}),this.I.schedule(()=>{this.f.isQuotaEnabled()?C.onSessionExpired(()=>{this.yT()}):C.onSessionExpired(()=>{this.mT()}),this.kn()})}kn(t=!1){var e;if(this.f.hasTargetingRules()){this.gT(t),this.E.start(),this.Nn&&this.Nn.checkInitialUrlTargetingRules();return}this.E.start(),this.Mn.onLoad(()=>{this.S.emitStartTracking(t)}),(!Ih(this.f)||t)&&this.ka(t)}Wh(){if(this.lt)return this.lt;let t=new Bn;return this.lt=new Po(this.Ee,this.f,this.R,t),this.lt.init(),this.lt.shouldUseAnonymization()&&et.counters.pageAnonymisation.count("anonymized-on-start"),this.lt}}return s})(),OS=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.f=t,this.O=e,this.Xe=i,this.kg=r,this.ST=o,this.vT=c,this._T=l,this.Yh=h}compute(t){var e,i;this.f.crossDomainTracking&&!this.f.cookielessTrackingEnabled?this.f.crossDomainSingleIframeTracking?(e=this._T)===null||e===void 0||e.start(()=>this.Xh(t)):(i=this.vT)===null||i===void 0||i.applyUpToDate(()=>this.Xh(t)):this.Xh(t)}Xh(t){this.ST.handle(),this.kg.clear(),this.wT()?(this.kg.restoreClearedVisitor(),t(!0)):(this.Xe.exclude(this.f),t(!1))}wT(){let t=Ae.boolean(this.f.sampleRate);return this.Yh.isForceIncluded()||!this.Xe.isExcluded()&&this.O.doesVisitorExist()||!this.Xe.isExcluded()&&t}}return s})(),NS=(()=>{class s{constructor(t,e,i,r){this.f=t,this.ot=e,this.S=i,this.A=r,this.bT=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.AT(),(t=this.A)===null||t===void 0||t.removeSession()),this.TT(e),this.setVisitor(e)}AT(){return{id:Lh.generate(),visitsCount:0,appliedTrackingDraw:this.f.lastTrackingDraw,creationTimestamp:ga(),lastVisitTimestamp:0,hitTimestamp:0,expires:D.now()+this.f.visitorCookieTimeout,allowSubdomains:this.f.allowSubdomains,identityPrint:null}}TT(t){let e=ga();this.A&&!this.A.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.f.lastTrackingDraw,this.Dg=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.ot.get()}setVisitor(t){this.ot.set(t)}doesVisitorExist(){return this.ot.get()!==null}resetVisitor(){this.Lg(),this.S.emitAfterVisitorCleared()}removeVisitor(){this.ot.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.f.allowSubdomains:!1}handleSubdomainChange(){this.ot.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.Dg===void 0?!1:t.visitsCount!==this.Dg}RT(){return!K(this.xg)||D.now()-this.xg>this.bT}renewVisitor(){this.RT()?(this.xg=D.now(),this.Lg(),this.S.emitAfterVisitorRenewal()):L.warn("session:start:newVisitor is trying to renew visitor under time limit")}Lg(){this.S.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),oe="_cs_s",cn=18e5,yr=".",MS=13,tn=(()=>{let s;return function(n){n[n.NOT_FOUND=0]="NOT_FOUND",n[n.EXPIRED=1]="EXPIRED",n[n.FOUND=2]="FOUND"}(s||(s={})),s})(),kS=(()=>{class s{constructor(t,e,i){this.f=t,this.U=e,this.Zt=i,this.se=null,this.Kh=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?al(e):null}getRawSession(t){if(t){let p=this.Jh();return Mr(p)}let{sessionString:e,status:i}=this.CT(),r=Mr(e);if(i!==tn.EXPIRED)return r;if(this.f.cookielessTrackingEnabled)return null;let o=this.Jh();if(!o)return null;let c=csString.prototype.split.call(o,yr);if(!s.Ug(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.IT(h),r}onCookieToSet(t){this.hi=t}onCookieToRemove(t){this.pi=t}set(t,e=cn){var i;let r=D.now()+e,o=Jf(t);o+=`${yr}${r}`,this.PT(o,r),this.f.cookielessTrackingEnabled?this.Zt.setItem(oe,o):(this.U.set(oe,o,e),(i=this.hi)===null||i===void 0||i.call(this,oe,o,e))}remove(){var t;this.f.cookielessTrackingEnabled?this.Zt.removeItem(oe):(this.U.delete(oe),(t=this.pi)===null||t===void 0||t.call(this,oe)),this.OT()}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.f.allowSubdomains?this.U.delete(oe,In.CURRENT_DOMAIN):this.U.delete(oe,this.U.getRootDomain()),this.set(t))}isValid(t){return t!==null&&On(t)}PT(t,e){this.se={sessionString:t,expires:e}}CT(){return this.se?this.se&&D.now()<=this.se.expires?{sessionString:this.se.sessionString,status:tn.FOUND}:{sessionString:this.se.sessionString,status:tn.EXPIRED}:{sessionString:this.Jh(),status:tn.NOT_FOUND}}OT(){this.se=null}IT(t){this.se&&(this.se.expires=t,this.Kh=!0)}isCacheRefreshed(){return this.Kh}resetCacheRefreshed(){this.Kh=!1}Jh(){if(this.f.cookielessTrackingEnabled){let e=this.Zt.getItem(oe);return!e||this.Vg(e)?null:e}let t=this.U.get(oe);return!t||this.Vg(t)?null:t}Vg(t){let e=csString.prototype.split.call(t,yr);if(!s.Ug(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&D.now()>i}static Ug(t){return t[t.length-1].length===MS}}return s})(),ko=60*1e3,DS=60*ko,LS=4*DS-ko,Ls=(()=>{let s;return function(n){n[n.NO=0]="NO",n[n.WITHDRAWN=1]="WITHDRAWN",n[n.GRANTED=2]="GRANTED"}(s||(s={})),s})(),xS=(()=>{class s{constructor(t,e,i,r){this._e=t,this.ut=e,this.NT=i,this.MT=r,this.Yr=null,this.Qh=0,this.Xr=Ls.NO}setDynamicVariablesService(t){this.kT=t}createOrUpdateSession(){this.Zh(),this.DT=D.now(),this.Qh=0;let t=this.jg();t===null?(t=this.LT(),this.Hg(t),this.Da(t)):(t=this.ut.sanitizeSessionCollectState(t),this.Hg(t),t.collectState=this.ut.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.ut.getInitialCollectState(),t.collectState=this.ut.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.Xr=Ls.GRANTED}withdrawnReplayRecording(t){t.collectState=this.ut.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.Xr=Ls.WITHDRAWN}Da(t){this.Xr===Ls.WITHDRAWN?(t.collectState=this.ut.getRecordingConsentWithdrawn(),this.setSession(t)):this.Xr===Ls.GRANTED?t.collectState=this.ut.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.ut.computeInitialCollectState(t),this.Xr=Ls.NO}LT(){return{pageNumber:0,collectState:this.ut.getInitialCollectState(),replayConsent:this.NT?Nr.NOT_EXPRESSED:Nr.UNNECESSARY,etrStatus:ie.ETR_NOT_SAVED_SESSION}}Hg(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.ut.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===H.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this._e.get()}jg(){return this._e.get(!0)}doesSessionExist(){return this._e.get()!==null}setSession(t){this._e.set(t)}refreshSession(){let t=this.jg();t&&this.setSession(t)}removeSession(){this._e.remove()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==H.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===H.RECORDING_RULES_TARGETING?H.RECORDING_GLOBAL_SAMPLING:t.collectState),this.MT&&csArray.prototype.push.call(e,H.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this._e.getRawSession();return this._e.isValid(t)}handleSubdomainChange(){this._e.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this._e.isCacheRefreshed();return e&&t&&this._e.resetCacheRefreshed(),e}extendSessionPeriodically(){this.Yr||this.Bg()}extendSession(){let t=this.getSession();return t===null?(L.warn("extendSession is trying to extend an expired session"),this.Zh(),!1):(this._e.set(t,cn),!0)}Bg(){if(this.xT()){this.Zh();return}this.extendSession()&&(this.UT(),this.VT())}VT(){this.Yr=window.csSetTimeout(()=>{this.Bg()},cn-ko)}xT(){return LS-(D.now()+cn-this.DT)<0}Zh(){this.Yr&&(window.csClearTimeout(this.Yr),this.Yr=null)}UT(){this.Qh+=1,this.kT.trackDynamicVariable("session_expiry_update",this.Qh)}}return s})(),US=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.Xe=i}clear(){this.jT()&&(this.Fg=this.O.getVisitor(),this.O.removeVisitor()),this.HT()&&this.Xe.removeExclusion()}jT(){return this.O.doesVisitorExist()&&this.O.getVisitor().appliedTrackingDraw!==this.f.lastTrackingDraw}HT(){return this.Xe.getAppliedTrackingDraw()!==this.f.lastTrackingDraw}restoreClearedVisitor(){this.Fg&&this.O.setVisitor(this.Fg)}}return s})(),VS=(()=>{class s{constructor(t,e,i){this.O=t,this.A=e,this.BT=i}handle(){this.O.hasAllowSubdomainsChanged()&&(this.O.handleSubdomainChange(),this.A.handleSubdomainChange(),this.BT.handleSubdomainChange())}}return s})(),ss="_cs_c",Ss=(()=>{let s;return function(n){n[n.NOT_REQUIRED=0]="NOT_REQUIRED",n[n.NOT_EXPRESSED=1]="NOT_EXPRESSED",n[n.GRANTED=2]="GRANTED",n[n.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),jS=(()=>{class s{constructor(t,e,i){this.f=t,this.U=e,this.qt=i}get(){let t;return this.f.cookielessTrackingEnabled?t=this.qt.getItem(ss):t=this.U.get(ss),t===null?t:Number(t)}set(t){this.f.cookielessTrackingEnabled?this.qt.setItem(ss,csString(t)):this.U.set(ss,csString(t),co)}remove(){this.f.cookielessTrackingEnabled?this.qt.removeItem(ss):this.U.delete(ss)}handleSubdomainChange(){this.f.cookielessTrackingEnabled||(this.f.allowSubdomains?this.U.delete(ss,In.CURRENT_DOMAIN):this.U.delete(ss,this.U.getRootDomain()))}}return s})(),HS=(()=>{class s{constructor(t,e,i){this.f=t,this.A=e,this.S=i}grantReplayConsent(){if(!rs.isReplayConsentNeeded(this.f))return;let t=this.A.getSession();if(!t){this.A.grantReplayRecordingBeforeSessionStart();return}rs.isRecordingBlockedByConsent(t)&&(this.A.grantReplayRecording(t),this.S.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!rs.isReplayConsentNeeded(this.f))return;let t=this.A.getSession();if(!t){this.A.withdrawnReplayRecordingBeforeSessionStart();return}rs.isRecordingWithDrawn(t)||(this.A.withdrawnReplayRecording(t),this.S.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),Wh=["replay:consent:unanonymized:granted","trackConsentGranted"],Yh=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],Xh=["replay:consent:startForSession:granted"],Kh=["replay:consent:startForSession:withdrawn"],BS=(()=>{class s{constructor(t,e,i,r,o){this.f=t,this.E=e,this.Ee=i,this.A=r,this.S=o}init(){this.zg=new HS(this.f,this.A,this.S),this.Ee.setInitialConsent(),this.gt()}gt(){this.E.register(Wh,()=>{this.Ee.grantReplayAnonymizationConsent()}),this.E.register(Yh,()=>{this.Ee.withdrawReplayAnonymizationConsent()}),this.E.register(Xh,()=>{this.zg.grantReplayConsent()}),this.E.register(Kh,()=>{this.zg.withdrawReplayConsent()})}onOptout(){this.Ee.removeAllConsents()}onBeforeVisitorRenewal(){this.Ee.removeAllConsents()}onAfterVisitorRenewal(){this.Ee.setInitialConsent()}onAfterVisitorCleared(){this.Ee.setInitialConsent()}}return s})(),FS=(()=>{class s{constructor(t,e,i){this.f=t,this.ot=e,this.S=i}setInitialConsent(){let t=this.ot.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.f.consentRequired;return e&&t===Ss.NOT_REQUIRED||!e&&t!==Ss.NOT_REQUIRED}handleSubdomainChange(){this.ot.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.f.consentRequired?Ss.NOT_EXPRESSED:Ss.NOT_REQUIRED;this.ot.set(t)}grantReplayAnonymizationConsent(){this.f.consentRequired&&(this.ot.set(Ss.GRANTED),this.S.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.f.consentRequired&&(this.ot.set(Ss.WITHDRAWN),this.S.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.ot.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.f.consentRequired||this.ot.get()===Ss.GRANTED}getRequestParameters(){return{uc:`${this.ot.get()}`}}}return s})(),zS=(()=>{class s{constructor(t,e,i,r,o,c,l){this.S=t,this.E=e,this.$h=i,this.Gh=r,this.Zs=o,this.FT=c,this.Wr=l}start(){this.S.addListener(this.FT),this.S.addListener(this.Wr),this.S.addListener(this.$h),this.Wr.init(),this.Gh.init(),this.Zs.init(),!this.Zs.isActive()&&this.E.start()}}return s})(),$S=(()=>{class s{constructor(t,e){this.Ot=t,this.ot=e}exclude(t){this.ot.set(csString(t.lastTrackingDraw))}removeExclusion(){this.ot.remove()}isExcluded(){return this.zT()||this.$T()}zT(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.ot.get()}$T(){return csString.prototype.indexOf.call(this.Ot.href,Oe)>0}}return s})(),GS=(()=>{class s{constructor(t){this.es=t}onOptout(){this.es.removeExclusion()}}return s})(),Er=(()=>{let s;return function(n){n.SessionReplay="SR",n.None=""}(s||(s={})),s})(),qS=".^",Jh=".*",Qh=(()=>{class s{constructor(t){this.R=t,this.tu=new csRegExp(`${qS}`)}setExcludeUrlForSessionReplay(t){try{this.tu=new csRegExp(t)}catch{L.warn(`excludeURLforReplay - invalid regex '${t}'`),this.tu=new csRegExp(`${Jh}`)}}$g(){return this.tu.test(this.R.getAnonymizedUrl())?Er.SessionReplay:Er.None}isUrlExcludedForSessionReplay(){return this.$g()===Er.SessionReplay}getRequestParameters(){return{ex:this.$g()}}}return s})(),Zh=["excludeURLforReplay"],tu=(()=>{class s{constructor(t,e){this.es=t,this.E=e}init(){this.E.register(Zh,t=>{if(T(t))this.es.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay")})}}return s})(),Sr="_cs_inc",WS=(()=>{class s{constructor(t,e){this.Ot=t,this.U=e}isForceIncluded(){return this.GT()||this.qT()}isForceReplayRecorded(){return this.WT(H.RECORDING_GLOBAL_SAMPLING)}GT(){return this.U.get(Sr)!==null}WT(t){return this.U.get(Sr)===t}qT(){return csString.prototype.indexOf.call(this.Ot.href,Sr)>0}}return s})(),mi="_cs_optout",YS=(()=>{class s{constructor(t,e,i){this.f=t,this.U=e,this.qt=i}get(){return this.f.cookielessTrackingEnabled?this.qt.getItem(mi):this.U.get(mi)}set(t){this.f.cookielessTrackingEnabled?this.qt.setItem(mi,t):this.U.set(mi,t,co)}}return s})(),dc="1",XS=(()=>{class s{constructor(t,e,i){this.S=t,this.Ot=e,this.ot=i}init(){!this.isActive()&&this.YT()&&this.activate()}isActive(){return this.ot.get()===dc}activate(){this.S.emitOptout(),this.ot.set(dc)}YT(){return csString.prototype.indexOf.call(this.Ot.href,mi)>0}}return s})(),Do=["optout"],eu=["optin"],KS=(()=>{class s{constructor(t,e){this.E=t,this.Zs=e}init(){this.E.register(Do,()=>{this.Zs.activate()})}}return s})(),JS=(()=>{let s;return function(n){function t(e,i){let r=QS(e,i),o=ZS(e,i);return r||o}n.select=t}(s||(s={})),s})();function QS(s,n){return csArray.prototype.filter.call(s,t=>t.exclusion===n)[0]}function ZS(s,n){return csArray.prototype.sort.call(csArray.prototype.filter.call(s,t=>tv(t,n)),ev)[0]}function tv(s,n){return s.visitor&&s.visitor.appliedTrackingDraw===n}function ev(s,n){return n.visitor.visitsCount!==s.visitor.visitsCount?n.visitor.visitsCount-s.visitor.visitsCount:s.session?n.session?n.session.pageNumber-s.session.pageNumber:-1:1}var sv=(()=>{class s{constructor(t,e){this.E=t,this.ht=e}init(){this.ht.addListener(this.E)}onOptout(){this.E.stop()}onBeforeSessionRenewal(){this.E.stop()}}return s})();var qr=(()=>{let s;return function(n){n.UXA="_uxa",n.WVT="cs_wvt"}(s||(s={})),s})(),su=(()=>{class s extends Et{constructor(t){super(),this.eu=t,this.hs={}}register(t,e,i){for(let r of t){let o=(...c)=>{try{let l=e(...c);return et.counters.commandApplied.count(r),l}catch(l){et.counters.commandMisuse.count(r),L.warn(`Misused Command: ${r}; Args: ${csJSON.stringify(c)}; Error: ${as(l)?l.stack:l}`)}};this.hs[r]={callback:o,configuration:i},this.hs}}onStart(){this.KT(),this.JT()}onStop(){for(let t of this.eu)window[t]=[]}applyFromIntegration(t,e,i){this.Gg(t,e,`Commands.apply.from.integration: ${i}`),et.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.Gg(t,e,`Commands.apply.from.implementation: ${i}`),et.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.QT(e.name,e.params,t.iframePath),et.counters.commandsFromIframe.count(e.name)}Gg(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}L.tryToExecute(i,()=>{if(this.hs[t])return this.hs[t].callback(...e)})()}QT(t,e,i){L.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.hs[t])return this.hs[t].callback(...e)})()}KT(){for(let t of this.eu)window[t].forEach(([e,...i])=>this.qg(e,i,!1))}JT(){for(let t of this.eu)window[t]={push:([e,...i])=>this.qg(e,i,!0)}}qg(t,e,i){var r,o;if(this.hs[t]){if(((r=this.hs[t].configuration)===null||r===void 0?void 0:r.disableApplyPending)&&!i||((o=this.hs[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.hs[t].callback(...e)}catch(l){et.counters.commandError.count(t),L.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})(),pc="contentsquare.net",fc=(()=>{let s;return function(n){n.Set="set",n.Remove="remove"}(s||(s={})),s})(),iv=(()=>{class s{constructor(t,e,i,r,o,c){this.f=t,this.U=e,this._e=i,this.Wg=r,this.Yg=o,this.Xg=c,this.Kg=le.None,this.su=!1,this.ti=[],this.ei=[]}init(){this.Kg=this.U.isSameSiteSupported()?le.None:le.NotSet,this.ZT()}setStates(t,e){this.Kr=t,this.Jg=e}start(t){this.Jg.init(this.Qg(),(e,i)=>{let r=[this.Kr.get()];i&&csArray.prototype.push.call(r,e);let o=JS.select(r,this.f.lastTrackingDraw);this.su=!0,this.Kr.apply(o),t()}),this.Zg=this.Jg.openIframe()}setCookie(t,e,i){if(this.su){let r=this.Kg,o=Ee.Yes,c={name:t,value:e,samesite:r,secure:o};i&&(c.expires=wt.toExpireDate(i).getTime()),this.tR(c)}}removeCookie(t){this.su&&this.eR(t)}eR(t){this.ei=csArray.prototype.filter.call(this.ei,e=>e!==t),this.ti=csArray.prototype.filter.call(this.ti,e=>e.name!==t),csArray.prototype.push.call(this.ei,t),this.setBatchReadyCall()}tR(t){this.ei=csArray.prototype.filter.call(this.ei,e=>e!==t.name),this.ti=csArray.prototype.filter.call(this.ti,e=>e.name!==t.name),csArray.prototype.push.call(this.ti,t),this.setBatchReadyCall()}setBatchReadyCall(){this.sR()}sR(){if(this.ti.length>0){let t=this.tm(fc.Set,this.ti);this.La(t),this.ti=[]}if(this.ei.length>0){let t=this.tm(fc.Remove,this.ei);this.La(t),this.ei=[]}}tm(t,e){return{command:t,cookies:e,domain:null,pid:this.f.projectId}}La(t){var e;let i=`https://${this.Qg()}`;!((e=this.Zg)===null||e===void 0)&&e.contentWindow&&this.Zg.contentWindow.postMessage(t,i)}Qg(){return this.f.dualCollectionTagDomain&&this.f.dualCollectionTagDomain!==pc?`cdnssl.${this.f.dualCollectionTagDomain}`:`csxd.${pc}`}ZT(){this._e.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.Wg.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.Yg.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.Xg.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this._e.onCookieToRemove(t=>{this.removeCookie(t)}),this.Wg.onCookieToRemove(t=>{this.removeCookie(t)}),this.Yg.onCookieToRemove(t=>{this.removeCookie(t)}),this.Xg.onCookieToRemove(t=>{this.removeCookie(t)})}}return B([Cs({wait:0,mode:"trailing"}),O("send xdframe-single-iframe batch")],s.prototype,"setBatchReadyCall",null),s})(),nv="1.2.0",rv=(()=>{class s{constructor(t,e){this.f=t,this.be=e}init(t,e){this.iu=`https://${t}`,this.w=e}openIframe(){this.be.onMessage(e=>{this.gc(e)}),this.be.onTimeout(()=>{this.mc()}),this.be.start();let t=this.em(this.iu);return this.be.open(t)}gc(t){if(this.yc(t)){let e=t.data,i=!0;if(this.iR(t)){L.warn(`Error xdframe single domain: ${csJSON.stringify(t.data)} from ${t.origin}`);return}if(!kr.isRawDomainState(e)){L.warn(`Unknown message format from xdframe single domain: ${csJSON.stringify(t.data)} from ${t.origin}`);return}kr.isValid(e)||(L.warn(`Invalid xdframe single domain state: ${csJSON.stringify(t.data)} from ${t.origin}`),i=!1),this.be.stop(),this.w(i?cl.fromRaw(e):{},i)}}mc(){L.warn(`xdframe single domain: timeout: ${this.em(this.iu)}`),this.be.stop(),this.w({},!1)}yc(t){return t.origin===this.iu&&te(t.data)}iR(t){return!!t.data.error}em(t){let e=this.f.projectId;return`${t}/uxa/xdframe-single-domain-${nv}.html?pid=${e}`}}return s})(),ov=(()=>{class s{constructor(t,e,i,r){this.f=t,this.O=e,this.A=i,this.sm=r}getRequestParameters(){var t;let e={...lo(),...this.f.getRequestParameters()},i=this.A.getSession();i&&(e.pn=`${i.pageNumber}`);let r=this.O.getVisitor();if(r&&(e.sn=`${r.visitsCount}`,e.uu=`${r.id}`),!((t=this.sm)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.sm.getSubProjectId()}`),window.heap)try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}}return s})(),av=(()=>{class s{constructor(t,e){this.E=t,this.Ms=e}init(){this.E.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Ms.updateDynamicFields("emitDebugEvents",t)})}}return s})();function gc(s,n,t){if(!K(n)&&!K(t))return s.href;let e=K(n)?iu(n):s.pathname,i=K(t)?nu(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function iu(s){return Ve(s,"/")?s:`/${s}`}function nu(s){return Ve(s,"?")||s===""?s:`?${s}`}var vr=(()=>{let s;return function(n){n[n.page=1]="page",n[n.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),ru=(()=>{class s{constructor(t,e){this.Ot=t,this.Z=e,this.nR=10}overridePath(t,e){if(t===""){this.Dn=void 0;return}let i=this.im(e);i&&(this.nu=i),this.Dn=e?this.nm(t,e):t}overrideQuery(t,e){let i=this.im(e);i&&(this.ru=i),this.Jr=e?this.nm(t,e):t}computeOverriddenUrl(t){return this.rR(t)?this.getAnonymizedUrl():t}oR(t){return(typeof t=="string"||typeof t=="number")&&t in vr}rR(t){let e=this.wa(this.Ot.href);return this.wa(t)===e}wa(t){return Bc(t,"/")?csString.prototype.slice.call(t,0,-1):t}im(t){return K(t==null?void 0:t.lifespan)&&this.oR(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}aR(){return this.nu&&this.nu in vr}cR(){return this.ru&&this.ru in vr}cleanupOverrideLifespan(){this.aR()&&(this.Dn=void 0,this.nu=void 0),this.cR()&&(this.Jr=void 0,this.ru=void 0)}getAnonymizedUrl(){let t=gc(this.Ot,this.Dn,this.Jr);return this.Z.anonymizeUrl(t)}getUrl(){return gc(this.Ot,this.Dn,this.Jr)}getAnonymizedPathAndQuery(){let t=K(this.Dn)?iu(this.Dn):this.Ot.pathname,e=K(this.Jr)?nu(this.Jr):this.Ot.search;return this.Z.anonymizeUrl(t+e)}getUrlProtocol(){return this.Ot.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}nm(t,e){return this.lR(e)?this.hR(t):this.uR(e)?this.dR(t):t}uR(t){return!!t.decodeURI}dR(t){return this.rm(t,1,!1)}lR(t){return!!t.decodeURIDeep}hR(t){return this.rm(t,this.nR,!0)}rm(t,e,i){let r=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(r);if(c===r)return r;r=c}catch{return r}return i&&L.warn(`decodeURIDeep limit reached: ${r}`),r}}return s})(),$n=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),cv=(()=>{class s extends $n{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:q.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),bi="|iframe|",ou=(()=>{class s extends $n{constructor(t,e,i,r){super(),this.pR=t,this.fR=e,this.gR=i,this.mR=r}emitIframeEvent(t,e,i){if(this.yR(e)&&t===null){L.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case P.ChildLogMessage:this.ER(i);break;case P.AnalysisEvent:{let r=i,o=this.pR.transformEvent(t,r);o.isUserEvent?this.SR(o.event):this.vR(o.event);break}case P.RecordingEvent:{let r=i,o=this.mR.transformEvents(t,r);if(o.events.length===0)return;o.containsUserEvent?this._R(o.events):this.wR(o.events);break}case P.JavascriptError:this.bR(i);break;case P.ApiError:this.AR(i);break;case P.DetailedApiError:this.TR(i);break;case P.CustomError:this.RR(i);break;case P.EmerchandisingMessage:{let r=this.gR.transformEvent(t,i);this.CR(r);break}case P.Commands:{let r=this.fR.transformEvent(t,i);this.IR(r);break}case P.IntegrationCallback:this.PR(i);break;case P.StaticResource:this.NR(i);break;case P.TrackingContextRequestMessage:this.MR(i);break;default:L.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}yR(t){let e=[P.AnalysisEvent,P.RecordingEvent,P.EmerchandisingMessage,P.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}ER(t){let{message:e,errorCode:i,level:r}=t;switch(r){case ct.debug:L.debug(e,i);break;case ct.warn:L.warn(e,!0,i);break;case ct.implementation:L.implementation(e,i);break;case ct.error:L.error(e,i);break;case ct.critical:L.critical(e,i);break}}SR(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}vR(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}_R(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}wR(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}bR(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}AR(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}TR(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}CR(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}IR(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}PR(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}NR(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}MR(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}RR(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),lv=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),hv=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),Gn=["setCustomVariable"],uv=(()=>{class s{constructor(t,e){this.E=t,this.At=e}init(){this.E.register(Gn,(t,e,i,r)=>{this.At.set(t,e,i,r)})}onAfterArtificialPageView(){this.At.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.At.deleteNextPageOnlyCustomVariables()}onOptout(){this.At.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.At.removeCustomVariablesSession(),this.At.removeCustomVariablesPage()}}return s})(),mc=512,yc=255,_r={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},dv=(()=>{class s{constructor(t,e){this.N=t,this.ot=e,this.Yt={},this.Ve={}}set(t,e,i,r){let o,c;if((Ot(t)||T(t))&&Number(t)>0&&yt(e)&&yt(i)&&!Yt(e)&&!Yt(i)&&this.kR(r)){let l=this.N.anonymizePII(csString(e)),h=this.N.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,mc),csString.prototype.slice.call(h,0,yc)],c=i!=="",!K(r)||csArray.prototype.indexOf.call(_r.SESSION,r)>=0){let p=this.getCustomVariablesSession();c?p[t]=o:delete p[t],this.setCustomVariableSession(p)}(!K(r)||csArray.prototype.indexOf.call(_r.PAGE,r)>=0)&&(c?this.Yt[t]=o:delete this.Yt[t]),K(r)&&csArray.prototype.indexOf.call(_r.NEXT_PAGE_ONLY,r)>=0&&(c?this.Ve[t]=o:delete this.Ve[t])}else throw new Error(`Command misuse: ${Gn[0]}`)}getCustomVariablesSession(){let t=this.ot.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&te(e)?e:{}}setCustomVariableSession(t){this.ot.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.ot.remove()}removeCustomVariablesPage(){this.Yt={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.Ve)this.Ve.hasOwnProperty(i)&&(this.Yt[i]=this.Ve[i]);for(let i in this.Yt)this.Yt.hasOwnProperty(i)&&(t[i]=this.Yt[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.om(t)};return this.Yt&&window.csJSON.stringify(this.Yt).length>2&&(e.cvarp=this.om(this.Yt)),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.Ve).length>0)for(let t in this.Ve)this.Ve[t]===this.Yt[t]&&(delete this.Yt[t],delete this.Ve[t])}am(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),r=t[e],o=r[0],c=r[1];(!hp(i,1,20)||o.length>mc||c.length>yc)&&delete t[e]}}om(t){this.am(t);let e=up(t)?[]:t;return window.csJSON.stringify(e)}kR(t){return!K(t)||T(t)||Ot(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.Ve)this.Ve.hasOwnProperty(e)&&(this.Yt[e]=this.Ve[e]);for(let e in this.Yt)this.Yt.hasOwnProperty(e)&&(t[e]=this.Yt[e]);return this.am(t),t}}return s})(),ge="_cs_id",pv=(()=>{class s{constructor(t,e,i){this.f=t,this.U=e,this.Zt=i}onCookieToSet(t){this.hi=t}onCookieToRemove(t){this.pi=t}get(){let t;return this.f.cookielessTrackingEnabled?t=this.Zt.getItem(ge):t=this.U.get(ge),t?(il(t)||L.warn(`Invalid visitor string: ${t}`),sl(t)):null}set(t){var e;let i=qf(t);if(this.f.cookielessTrackingEnabled)this.Zt.setItem(ge,i);else{let r=new csDate(t.expires);this.U.set(ge,i,r),(e=this.hi)===null||e===void 0||e.call(this,ge,i,r)}}remove(){var t;this.f.cookielessTrackingEnabled?this.Zt.removeItem(ge):(this.U.delete(ge),(t=this.pi)===null||t===void 0||t.call(this,ge))}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.f.allowSubdomains,this.f.allowSubdomains?this.U.delete(ge,In.CURRENT_DOMAIN):this.U.delete(ge,this.U.getRootDomain()),this.set(t))}}return s})(),fv=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,gv="$1CS_ANONYMIZED_NAME",au=(()=>{class s{constructor(t){this.N=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],r=e.partialMaskingPatterns||[],o=this.N.anonymizePII(t);if(o=this.N.anonymizeJwt(o),e.maskNames){let h=o;o=this.Ur(o),o!==h&&(et.counters.redactedPII.count("name"),et.counters.redactedPII.count("name-in-url"))}let c=this.DR(o,i);if(c!==o)return et.counters.redactedPII.count("url"),c;let l=this.LR(o,r);return l!==o&&et.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.ou(t);return i!==""?`${e}?`:e}ou(t){let e=csString.prototype.indexOf.call(t,"?"),i,r="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),r=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:r}}DR(t,e){if(e.length===0)return t;let{path:i,queryString:r}=this.ou(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.xR(o,c);if(l!==null)return`${l}${r}`}return t}xR(t,e){if(t.length<e.length)return null;let i=[];for(let r=0;r<t.length;r++){let o=t[r];if(r>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[r].key;if(this.cm(c)){let l=e[r].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}LR(t,e){if(e.length===0)return t;let{path:i,queryString:r}=this.ou(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.UR(o,c);return`${csArray.prototype.join.call(o,"/")}${r}`}UR(t,e){let i=[],r=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],p=e[r].key;if(this.cm(p)&&l>=c){let u=e[r].value;csArray.prototype.push.call(i,h.length>0?u:""),r++,r===e.length&&(r=0);continue}if(h===p){csArray.prototype.push.call(i,h),r++,r===e.length&&(r=0);continue}for(let u=0;u<r;u++){let m=l-r+u;i[m]=t[m]}r=0,csArray.prototype.push.call(i,h)}for(let l=0;l<r;l++){let h=t.length-r+l;i[h]=t[h]}return i}cm(t){return Ve(t,wh)}Ur(t){return csString.prototype.replace.call(t,fv,gv)}}return s})(),mv=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],yv=1024,Ev=1024,cu=(()=>{class s{constructor(t,e){this.mt=t,this.f=e}getEventTargetPathAndHierarchy(t,e){let i=Pt(t),r={isNodeSensitive(o){return U.isMaskedElement(o)||U.isMaskedElementChild(o)},isAttributeSensitive(o,c){return U.isMaskedAttribute(o,c)},allWhitelistedAttributes:kl(this.f.whitelistedAttributes),attributeIgnoreTokens:mv,useAnonymization:e,attrMaxLength:Ev,hierarchyMaxLength:yv};return this.mt.getElementPathAndHierarchy(i,r,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPath(t){let e=Pt(t);return this.mt.getElementPath(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=Pt(t),{path:i,firstAnchorParent:r}=this.mt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules}),o=this.VR(r)?r.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=Pt(t);return this.mt.isValidElement(e)}getElementPath(t){return this.mt.getElementPath(t,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}VR(t){var e;return t!==null&&t.hasAttribute("href")&&!Ve((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),lu=(()=>{class s{constructor(t){this.K=t}transformEvent(t,e){this.jR(t,e.event);let i=this.K.getElementPath(t);return this.HR(i,e.event),e}jR(t,e){if($y(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+Ct.windowOffsetX()),e.y=Math.round(i.top+e.y+Ct.windowOffsetY())}}HR(t,e){hh(e)&&(e.tgt=`${t}${bi}${e.tgt}`),Fy(e)&&(e.tgtHM=`${t}${bi}${e.tgtHM}`),zy(e)&&(e.tgtLk=`${t}${bi}${e.tgtLk}`)}}return s})(),hu=(()=>{class s{constructor(t){this.K=t}transformEvent(t,e){let i=this.K.getElementPath(t);return{iframePath:e.iframePath?`${i}${bi}${e.iframePath}`:i,commands:e.commands}}}return s})(),uu=(()=>{class s{constructor(t){this.K=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.K.getElementPath(t),r=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${bi}${o.targetPath}`}));return{...e,products:r}}}return s})(),du=(()=>{class s{constructor(){this.BR={clientX:2,clientY:3},this.FR={clientX:1,clientY:2},this.zR=[V.POINTER_DOWN,V.POINTER_MOVE,V.POINTER_UP],this.$R=[V.TOUCH_START,V.TOUCH_MOVE,V.TOUCH_END]}transformEvents(t,e){if(!at.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==V.VISIBILITY_CHANGE),e.events.length===0||(L.warn(`IframeRecordingEventsTransformer received event ${P.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=ot(t),r=null;csArray.prototype.some.call(e.events,c=>this.lm(c)||this.hm(c))&&(r=t.getBoundingClientRect());for(let c of e.events)this.lm(c)?this.GR(r,c):this.hm(c)&&this.qR(r,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}qR(t,e){this.um(this.FR,t,e)}GR(t,e){this.um(this.BR,t,e)}um(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}lm(t){return csArray.prototype.indexOf.call(this.zR,t.type)!==-1}hm(t){return csArray.prototype.indexOf.call(this.$R,t.type)!==-1}}return s})(),Sv=(()=>{class s{constructor(t){this.au=t}start(){this.au.onEvent(t=>this.X(t)),this.au.start()}stop(){this.au.stop()}X(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;L.warn(e)}}return s})(),vv=(()=>{class s{constructor(){this.Ft={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)},csArray.prototype.push.call(s.lu,"localhost"),csArray.prototype.push.call(s.lu,"fake-tracker.content-square.fr")}start(){pt(this.Ft)}stop(){ft(this.Ft)}onEvent(t){this.D=t}WR(t){if(!t)return!1;let e=t.disposition;return T(t.sourceFile)&&csArray.prototype.some.call(s.lu,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.WR(t)&&this.D({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.lu=["contentsquare","cdnssl.clicktale.net"],B([O("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),_v=(()=>{class s{init(){this.dm=new Sv(new vv),this.dm.start()}onOptout(){this.dm.stop()}}return s})();var Ec=1/0,{toString:wv}=Object.prototype;function bv(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":wv.call(s)}var Lo=s=>typeof s=="symbol"||typeof s=="object"&&s!=null&&bv(s)==="[object Symbol]";function pu(s){if(typeof s=="string"||Lo(s))return s;let n=`${s}`;return typeof s=="number"?n==="0"&&1/s===-Ec?"-0":n:s instanceof Number&&n==="0"&&1/s.valueOf()===-Ec?"-0":n}var Av=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tv=/^\w*$/;function Rv(s,n){return csArray.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||Lo(s)?!0:Tv.test(s)||!Av.test(s)||n!=null&&s in Object(n)}function xo(s,n){if(typeof s!="function"||n!=null&&typeof n!="function")throw new TypeError("Expected a function");let t=function(...e){let i=n?n.apply(this,e):e[0],{cache:r}=t;if(r.has(i))return r.get(i);let o=s.apply(this,e);return t.cache=r.set(i,o)||r,o};return t.cache=new(xo.Cache||Map),t}xo.Cache=Map;var Cv=500;function Iv(s){let n=xo(s,t=>{let{cache:e}=n;return e.size===Cv&&e.clear(),t});return n}var Pv=46,Ov=/\\(\\)?/g,Nv=csRegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),fu=Iv(s=>{let n=[];return csString.prototype.charCodeAt.call(s,0)===Pv&&csArray.prototype.push.call(n,""),csString.prototype.replace.call(s,Nv,(t,e,i,r)=>{let o=t;return i?o=csString.prototype.replace.call(r,Ov,"$1"):e&&(o=csString.prototype.trim.call(e)),csArray.prototype.push.call(n,o),t}),n});function Mv(s,n){return csArray.isArray(s)?s:Rv(s,n)?[s]:fu(s)}function kv(s,n){let t=Mv(n,s),e=s,i=0,{length:r}=t;for(;e!=null&&i<r;){let o=pu(t[i]);e=e[o],i+=1}return i&&i===r?e:void 0}function Dv(s){return"iterable"in s}function gu(s){return K(s.iterable)?T(s.iterable)||s.iterable===null:!0}function mu(s,n,t){let e=s==null?void 0:kv(s,n);return e===void 0?t:e}var Lv=/\b__p \+= '';/g,xv=/\b(__p \+=) '' \+/g,Uv=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Vv=/['\n\r\u2028\u2029\\]/g,yu=/[&<>"']/g,jv=csRegExp(yu.source),Hv=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,en=/($^)/,Bv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Fv=/[()=,{}[\]/\s]/,zv=/<%-([\s\S]+?)%>/g,$v=/<%([\s\S]+?)%>/g,Eu=/<%=([\s\S]+?)%>/g,{hasOwnProperty:Sc}=Object.prototype,Gv="Invalid `variable` option passed into `_.template`";function qv(s){return`\\${Bv[s]}`}var Wv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Yv={escape:zv,evaluate:$v,interpolate:Eu,variable:"",imports:{_:{template:ln,escape(s){return s&&jv.test(s)?csString.prototype.replace.call(s,yu,n=>Wv[n]):s!=null?s:""}}}};function ln(s,n){let t={...Yv,...n},e=Object.keys(t.imports||{}),i=csArray.prototype.map.call(e,S=>t==null?void 0:t.imports[S]),r,o,c=0,l=t.interpolate||en,h="__p += '",p=csRegExp(`${(t.escape||en).source}|${l.source}|${(l===Eu?Hv:en).source}|${(t.evaluate||en).source}|$`,"g"),u=`//# sourceURL=${Sc.call(t,"sourceURL")?csString.prototype.replace.call(`${t.sourceURL}`,/\s/g," "):void 0}
`;s==null||csString.prototype.replace.call(s,p,(S,C,M,b,v,k)=>{let I=M||b;return h+=csString.prototype.replace.call(csString.prototype.slice.call(s,c,k),Vv,qv),C&&(r=!0,h+=`' +
__e(${C}) +
'`),v&&(o=!0,h+=`';
${v};
__p += '`),I&&(h+=`' +
((__t = (${I})) == null ? '' : __t) +
'`),c=k+S.length,S}),h+=`';
`;let m=Sc.call(t,"variable")&&t.variable;if(!m)h=`with (obj) {
${h}
}
`;else if(Fv.test(m))throw new Error(Gv);h=csString.prototype.replace.call(csString.prototype.replace.call(o?csString.prototype.replace.call(h,Lv,""):h,xv,"$1"),Uv,"$1;"),h=`function(${m||"obj"}) {
${m?"":`obj || (obj = {});
`}var __t, __p = ''${r?", __e = _.escape":""}${o?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`}${h}return __p
}`;let y;try{y=Function(...e,`${u}return ${h}`)(...i)}catch(S){y=S}if(y.source=h,y instanceof Error)throw y;return y}var Xv=/^(\s*("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\s*,?)+$/,Kv=/<%[\s\S]+?%>|<%-[\s\S]+?%>|<%=[\s\S]+?%>|\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/,Jv=/^document\.querySelector\(("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\)\.(textContent|value)$/;function vc(s){if(!Xv.test(s)||Kv.test(s))throw new Error("whitelisted function is wrongly used")}var _c={"window.location.hash.replace(":(s,n)=>{let t=csString.prototype.substring.call(s,29,s.length-1);return vc(t),ln(`\${${s}}`)(n)},"window.sessionStorage.getItem(":(s,n)=>{let t=csString.prototype.substring.call(s,30,s.length-1);return vc(t),ln(`\${${s}}`)(n)},"document.querySelector(":(s,n)=>{if(Jv.test(s))return ln(`\${${s}}`)(n)},"new Date().getTime()":(s,n)=>new csDate().getTime().toString()};function Qv(s){let n=ve(Object.keys(_c),t=>Bt(s,t));if(n)return _c[n]}function Zv(s){return Bt(s,"'")&&Qs(s,"'")}var t_=/\$\{([\s\S]+?)\}/g,e_=s=>(n,t,e)=>{let i="";return csArray.prototype.forEach.call(csString.prototype.split.call(t,"+"),r=>{let o=csString.prototype.trim.call(r),c=mu(s,o);if(c===void 0)if(Zv(o))c=csString.prototype.substring.call(o,1,o.length-1);else{let l=Qv(o);if(l&&(c=l(o,s)),c===void 0)throw new Error("undefined not allowed")}i+=c}),i};function Xs(s,n){try{return csString.prototype.replace.call(s,t_,e_(n))}catch{return null}}function Wr(s,n){let t={};for(let e of Object.keys(s)){let i=s[e];if(T(i)){let r=Xs(i,n);if(r===null)return null;t[e]=r}else t[e]=i}return t}function Yr(s,n){let t=csArray.prototype.join.call(csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(s,","),e=>Xs(e,n)),e=>e!==null&&Nt(e)),",");return Nt(t)?t:null}function s_(s){return csArray.isArray(s)?csArray.prototype.map.call(s,pu):Lo(s)?[s]:csArray.from(fu(s))}function i_(s,n){try{let e=/^values\(([a-zA-Z0-9_$[\].]+)\)\[\?([a-zA-Z0-9_$]+)\]$/.exec(s);if(!e)return null;let i=e[1],r=e[2],o=mu(n,s_(i));if(typeof o!="object"||o===null)return null;let c=[];return csArray.prototype.forEach.call(Object.keys(o),l=>{let h=o[l];typeof h=="object"&&h!==null&&!csArray.isArray(h)&&r in h&&csArray.prototype.push.call(c,h)}),c}catch{return null}}function n_(s,n){let e=/^\[([0-9]+):([0-9+])\]$/.exec(s);if(!e)return null;let i=parseInt(e[1],10),r=parseInt(e[2],10);return r<=i||r>n.length?null:csArray.prototype.slice.call(n,i,r)}function r_(s,n){let t=csString.prototype.split.call(s,"|");if(t.length>2)return null;let e=i_(csString.prototype.trim.call(t[0]),n);return t.length===2?e===null?null:n_(csString.prototype.trim.call(t[1]),e):e}var wr=(()=>{let s;return function(n){n.AND="AND",n.OR="OR"}(s||(s={})),s})(),ce=(()=>{let s;return function(n){n.STARTS_WITH="startsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.MATCHES="matches",n.NOT_MATCHES="notMatches",n.EXIST="exist",n.NOT_EXIST="notExist"}(s||(s={})),s})();function Su(s,n){return o_(s.operator,h_(s.args,n))}function o_(s,n){switch(s){case ce.EXIST:case ce.NOT_EXIST:return a_(s,n);default:return c_(s,n)}}function a_(s,n){let[t]=n;if(!Nt(t))return!1;switch(s){case ce.EXIST:return window.csquerySelector[document.nodeType].call(document,t)!==null;case ce.NOT_EXIST:return window.csquerySelector[document.nodeType].call(document,t)===null;default:return!1}}function c_(s,n){let[t,e]=n;if(!(s in wr)&&!(T(t)&&T(e)))return!1;switch(s){case wr.AND:return!!csArray.prototype.reduce.call(n,(r,o)=>r&&o);case wr.OR:return!!csArray.prototype.reduce.call(n,(r,o)=>r||o);case ce.STARTS_WITH:return Bt(t,e);case ce.EQUALS:return t===e;case ce.NOT_EQUALS:return t!==e;case ce.CONTAINS:return csString.prototype.indexOf.call(t,e)>-1;case ce.NOT_CONTAINS:return csString.prototype.indexOf.call(t,e)===-1;case ce.MATCHES:{let r=wc(e);return r!==null&&r.test(t)}case ce.NOT_MATCHES:{let r=wc(e);return r!==null&&!r.test(t)}default:return!1}}function l_(s){return!!(s&&s.operator&&s.args)}function h_(s,n){return csArray.prototype.map.call(s,t=>l_(t)?Su(t,n):T(t)?Xs(t,n):t)}function wc(s){let n=/^\/(.*)\/([gimy]*)$/.exec(s),t=null;if(n){let[,e,i]=n;try{t=new csRegExp(e,i)}catch{}}else try{t=new csRegExp(s)}catch{}return t}function Uo(s){switch(s){case"no decoding":return null;case"decode once":return{decodeURI:!0};case"decode multiple times":return{decodeURIDeep:!0};default:return null}}function Vo(s){switch(s==null?void 0:s[0]){case"on next pageview only":return{lifespan:"onNextPageviewOnly"};default:return null}}var bt=(()=>{class s{constructor(t,e){this.commandsService=t,this.args=e}}return s})(),Ui=(()=>{class s extends bt{}return s})(),vu=(()=>{class s extends bt{validateArgs(t){if(J(t)){let e=K(t.path)?T(t.path):!0,i=K(t.decodeURI)?T(t.decodeURI):!0,r=K(t.lifespan)?csArray.isArray(t.lifespan):!0;return e&&i&&r}return!1}execute(t){if(!t.path)this.Qr([]);else{let e=[t.path],i=Uo(t.decodeURI),r=Vo(t.lifespan),o={...i,...r};Object.keys(o).length&&e.push(o),this.Qr(e)}}Qr(t){this.commandsService.applyFromImplementation(Vn[0],t,"ArtificialPageviewTemplate")}}return s})(),u_=(()=>{class s extends Ui{validateArgs(t){return J(t)?T(t.message)&&csArray.isArray(t.attributes):!1}execute(t,e){let i=Xs(t.message,e);if(!i)return;let r={};for(let o of t.attributes){let c=Xs(o.value,e);c!==null&&(r[o.key]=c)}this.commandsService.applyFromImplementation(Hn[0],[i,r],"CustomErrorTemplate")}}return s})(),d_=(()=>{class s extends bt{validateArgs(t){if(J(t)){let e=gu(t),i=csArray.isArray(t.scope)?ao(t.scope,r=>T(r)):!0;return e&&i&&Ot(t.index)&&T(t.name)&&T(t.value)}return!1}execute(t){this.commandsService.applyFromImplementation(Gn[0],[t.index,t.name,t.value,t.scope[0]],"CustomVariableTemplate")}}return s})(),p_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.selector):!1}execute(t){this.commandsService.applyFromImplementation(Oo[0],[t.selector],"DataCsEncryptTemplate")}}return s})(),f_="data-cs-override-id",g_=(()=>{class s extends bt{validateArgs(t){if(J(t)){let e=yt(t.value)?T(t.value):!0;return T(t.selector)&&e}return!1}execute(t){var e;if(!Nt(t.selector))return;let i=window.csquerySelector[document.nodeType].call(document,t.selector);i&&i.setAttribute(f_,(e=t.value)!==null&&e!==void 0?e:"")}}return s})(),m_=20,y_=(()=>{class s extends Ui{validateArgs(t){return J(t)?gu(t)&&T(t.key)&&T(t.value)&&T(t.type):!1}execute(t,e){let i=Wr(t,e);i!==null?this.Qr(i):this.XR(t,e)()}XR(t,e){return()=>{let i=0,r=window.csSetInterval(()=>{i+=1;let o=Wr(t,e);if(o!==null){window.csClearInterval(r),r=void 0,i=0,this.Qr(o);return}i>=m_&&(window.csClearInterval(r),r=void 0,i=0)},100)}}Qr(t){let e=t.value;if(t.type==="Integer"){let i=Number.parseInt(t.value,10);Number.isNaN(i)||(e=i)}this.commandsService.applyFromImplementation(Ni[0],[{key:t.key,value:e}],"DynamicVariableTemplate")}}return s})(),E_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.transactionId)&&Ot(t.revenue)&&T(t.currency)&&T(t.name)&&T(t.sku)&&T(t.category)&&Ot(t.price)&&Ot(t.quantity):!1}execute(t){this.KR({id:t.transactionId,revenue:t.revenue,currency:t.currency}),this.JR({id:t.transactionId,name:t.name,sku:t.sku,category:t.category,price:t.price,quantity:t.quantity}),this.xa()}KR(t){this.commandsService.applyFromImplementation(Mi[0],[t],"EcTransactionAllTemplate")}JR(t){this.commandsService.applyFromImplementation(ei[0],[t],"EcTransactionAllTemplate")}xa(){this.commandsService.applyFromImplementation(ki[0],[],"EcTransactionAllTemplate")}}return s})(),S_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.id)&&Ot(t.revenue)&&T(t.currency):!1}execute(t){this.commandsService.applyFromImplementation(Mi[0],[t],"EcTransactionCreateTemplate")}}return s})(),v_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.id)&&T(t.name)&&T(t.sku)&&T(t.category)&&Ot(t.price)&&Ot(t.quantity):!1}execute(t){this.commandsService.applyFromImplementation(ei[0],[t],"EcTransactionItemsAddTemplate")}}return s})(),__=(()=>{class s extends bt{validateArgs(t){return!!J(t)}execute(){this.commandsService.applyFromImplementation(ki[0],[],"EcTransactionSendTemplate")}}return s})(),w_=(()=>{class s extends Ui{validateArgs(t){return J(t)?yt(t)&&T(t.selector):!1}execute(t,e){if(!yt(t)||!T(t==null?void 0:t.selector))return;let i=Yr(t.selector,e);i!==null&&this.commandsService.applyFromImplementation(Fn[0],[i],"ElementUnmaskingTemplate")}}return s})(),b_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(ii[0],[`@ETP@${t.eventName}`],"EventTriggerRecordingPageTemplate")}}return s})(),A_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(ii[0],[`@ETS@${t.eventName}`],"EventTriggerRecordingSessionTemplate")}}return s})(),T_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(jn[0],[t.eventName],"PageEventTemplate")}}return s})(),R_=(()=>{class s extends Ui{validateArgs(t){if(J(t)){let e=csArray.isArray(t.cssSelectors),i=csArray.isArray(t.attributes);return e&&i}return!1}execute(t,e){let i=csArray.prototype.filter.call(csArray.prototype.map.call(t.cssSelectors,c=>Yr(c,e)),c=>!!c),r=csArray.prototype.filter.call(csArray.prototype.map.call(t.attributes,c=>{let l=Xs(c.attrName,e),h=Yr(c.selector,e);return{attrName:l,selector:h}}),c=>!!c.attrName&&!!c.selector),o={PIISelectors:[...i],Attributes:[...r]};this.commandsService.applyFromImplementation(xi[0],[o],"PIIMaskingTemplate")}}return s})(),C_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(ii[0],[`${t.eventName}`],"RecordingEventTriggerTemplate")}}return s})(),I_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.path):!1}execute(t){let e=[t.path],i=Uo(t.decodeURI),r=Vo(t.lifespan),o={...i,...r};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(bn[0],e,"SetPathTemplate")}}return s})(),P_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.query):!1}execute(t){let e=[t.query],i=Uo(t.decodeURI),r=Vo(t.lifespan),o={...i,...r};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(An[0],e,"SetQueryTemplate")}}return s})(),O_=(()=>{class s extends bt{validateArgs(t){return!!J(t)}execute(){this.commandsService.applyFromImplementation(_o[0],[],"SrmOnlineAssetsTemplate")}}return s})(),N_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.status)&&T(t.selector):!1}execute(t){if(!Nt(t.selector))return;let e=window.csquerySelector[document.nodeType].call(document,t.selector);e&&this.commandsService.applyFromImplementation(Ro[0],[t.status,e],"SubmitTemplate")}}return s})(),ee=(()=>{class s{onEvent(t){this.onEventCallback=t}constructor(t,e,i){this.commandsService=t,this.condition=i,this.isStarted=!1,this.pm=!1,this.args=e}start(){this.pm||(this.onInit(),this.pm=!0),this.isStarted||(this.onStart(),this.isStarted=!0)}stop(){this.isStarted&&(this.onStop(),this.isStarted=!1)}}return B([O()],s.prototype,"start",null),B([O()],s.prototype,"stop",null),s})(),bc="once per pageview",M_="always",k_=(()=>{class s extends ee{constructor(){super(...arguments),this.St=!0}validateArgs(t){if(J(t)){let e=T(t.selector),i=t.frequency?t.frequency===bc||t.frequency===M_:!0;return e&&i}return!1}onInit(){if(!Nt(this.args.selector)){this.St=!1;return}this.Zr=this.args.frequency?this.args.frequency===bc:!0,this.W=new ue((t,e)=>this.w(t,e))}onStart(){this.St&&this.W.observe(this.args.selector)}onStop(){this.St&&(this.W.processPendingMutations(),this.W.disconnect())}w(t,e){e==="added"&&(this.Zr?(this.stop(),this.onEventCallback({element:t[0]})):new Set(t).forEach(i=>this.onEventCallback({element:i})))}}return s})(),D_=(()=>{class s extends ee{constructor(){super(...arguments),this.St=!0,this.fm=!1}validateArgs(t){return J(t)?T(t.selector):!1}onInit(){if(!Nt(this.args.selector)){this.St=!1;return}this.W=new ue((t,e)=>{this.w(t,e)})}onStart(){this.St&&(this.W.observe(this.args.selector),this.fm=!0)}onStop(){this.St&&(this.W.processPendingMutations(),this.W.disconnect())}w(t,e){this.fm?e==="added"&&new Set(t).forEach(i=>this.onEventCallback({element:i})):this.onEventCallback({element:t[0]})}}return s})(),L_=(()=>{class s extends ee{constructor(){super(...arguments),this.St=!0}validateArgs(t){return J(t)?T(t.selector):!1}onInit(){if(!Nt(this.args.selector)){this.St=!1;return}this.F=new ue(t=>this.QR(t)),this.M=new de(t=>this.ZR(t))}onStart(){this.St&&(this.Ua=csSymbol("MatchingElement"),this.F.observe(this.args.selector),this.M.observe())}onStop(){this.St&&(this.F.processPendingMutations(),this.F.disconnect(),this.M.disconnect())}QR(t){new Set(t).forEach(e=>this.t0(e))}ZR(t){let e=oo(t,r=>r.removedNodes),i=[];for(let r of e)csArray.prototype.push.call(i,...this.e0(r));new Set(i).forEach(r=>this.onEventCallback({element:r}))}t0(t){t[this.Ua]=!0}e0(t){let e=[];return qt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{i[this.Ua]&&(at.isConnected(i)?Xt.call(i,this.args.selector)||delete i[this.Ua]:delete i[this.Ua],csArray.prototype.push.call(e,i))}),e}}return s})(),x_=(()=>{class s{static readyStateChangeListener(t){csArray.prototype.forEach.call(ls(s.callbacks),e=>e(t))}static ml(t){s.callbacks.has(t)||(s.callbacks.add(t),s.callbacks.size===1&&pt(s.eventHandler,!1))}static yl(t){s.callbacks.delete(t),s.callbacks.size===0&&ft(s.eventHandler,!1)}constructor(t){this.w=t}observe(){s.ml(this.w)}disconnect(){s.yl(this.w)}}return s.callbacks=new Set,s.eventHandler={boundElement:ht.document,type:"readystatechange",listener:s.readyStateChangeListener},tt([O("readyStateChangeListener"),dt()],s,"readyStateChangeListener",null),s})(),U_=(()=>{class s extends ee{constructor(){super(...arguments),this.du={state:"Any"}}validateArgs(t){var e;return J(t)&&T(t.state)||(L.implementation(`PageStateTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.state}, fallback to default config.`),this.args=this.du),!0}onInit(){this.Tt=this.args.state.toLowerCase(),this.W=new x_(()=>{this.gm(this.Tt,document.readyState)&&(this.onEventCallback(),this.W.disconnect())})}onStart(){this.gm(this.Tt,document.readyState)?this.onEventCallback():this.W.observe()}onStop(){this.W.disconnect()}gm(t,e){let i=s.mm[e];return s.mm[t]<=i}}return s.mm={complete:3,interactive:2,loading:1,any:0},s})(),V_=(()=>{class s extends ee{validateArgs(t){return!!J(t)}s0(){this.isStarted&&this.onEventCallback()}onInit(){this.commandsService.applyFromImplementation(Ln[0],[()=>this.s0()],"AfterPageViewTrigger")}onStart(){}onStop(){}}return s})(),j_=(()=>{class s extends ee{constructor(){super(...arguments),this.pu=!1,this.St=!0,this.$s=!0,this.si={boundElement:document,type:"click",listener:t=>{if(this.pu){this.pu=!1;return}this.onClickOrTap(t)}},this.i0=(t,e)=>{t.type===Rt.TAP&&(this.pu=!0,this.onClickOrTap(e))}}validateArgs(t){return J(t)?T(t.selector):!1}onClickOrTap({target:t}){if(yt(t)&&xe(t)){let e=qs(t,this.args.selector);e&&this.onEventCallback({element:e})}}onInit(){if(!Nt(this.args.selector)){this.St=!1;return}this.pr=new Gl(this.i0)}onStart(){var t;this.St&&(pt(this.si,this.$s),(t=this.pr)===null||t===void 0||t.observe())}onStop(){var t;this.St&&(ft(this.si,this.$s),(t=this.pr)===null||t===void 0||t.disconnect())}}return B([O("onClickOrTap"),dt()],s.prototype,"onClickOrTap",null),s})(),H_=(()=>{class s{static n0(){var t,e,i,r;if("history"in window){let o=Object.getOwnPropertyDescriptors(history);if(!((t=o.pushState)===null||t===void 0)&&t.writable&&(!((e=o.replaceState)===null||e===void 0)&&e.writable))return history}if(History.prototype){let o=Object.getOwnPropertyDescriptors(History.prototype);if(!((i=o.pushState)===null||i===void 0)&&i.writable&&(!((r=o.replaceState)===null||r===void 0)&&r.writable))return History.prototype}mt.warn("Unable to override pushState, replaceState",!0,"HistoryChangeObserver")}static Oh(){let t=s.n0();s.to===null&&Yt(t==null?void 0:t.pushState)&&(s.to=Qt({target:t,methodName:"pushState",hook:({args:e})=>{s.ym("pushstate",e)}})),s.eo===null&&Yt(t==null?void 0:t.replaceState)&&(s.eo=Qt({target:t,methodName:"replaceState",hook:({args:e})=>{s.ym("replacestate",e)}}))}static $n(t){var e,i;s.Ae.add(t),s.Ae.size===1&&((s.to===null||s.eo===null)&&s.Oh(),(e=s.to)===null||e===void 0||e.activate(),(i=s.eo)===null||i===void 0||i.activate(),pt(s.Em),pt(s.Sm))}static qn(t){var e,i;s.Ae.delete(t),s.Ae.size===0&&((e=s.to)===null||e===void 0||e.deactivate(),(i=s.eo)===null||i===void 0||i.deactivate(),ft(s.Em),ft(s.Sm))}static ym(t,e){let i={type:t,state:e[0]};T(e[2])&&(i.url=e[2]),s.Wi(i)}static popstateListener(t){s.Wi({type:"popstate",state:t.state})}static hashchangeListener(t){s.Wi({type:"hashchange",state:null,url:t.newURL})}static Wi(t){csArray.prototype.forEach.call(ls(s.Ae),e=>{e(t)})}constructor(t){this.w=t}observe(){s.$n(this.w)}disconnect(){s.qn(this.w)}}return s.to=null,s.eo=null,s.Em={boundElement:ht,type:"popstate",listener:n=>s.popstateListener(n)},s.Sm={boundElement:ht,type:"hashchange",listener:n=>s.hashchangeListener(n)},s.Ae=new Set,tt([O("popstateListener"),dt()],s,"popstateListener",null),tt([O("hashchangeListener"),dt()],s,"hashchangeListener",null),s})(),B_=(()=>{class s extends ee{validateArgs(t){if(J(t)){let e=T(t.useDebounce),i=t.useDebounce==="yes"?Ot(t==null?void 0:t.window):!0,r=T(t.listeners);return e&&i&&r}return!1}onInit(){this.args.useDebounce==="yes"?this.ee=_n(()=>{this.onEventCallback()},this.args.window):this.ee=this.onEventCallback,this.W=new H_(t=>this.fu(t))}vm(){return window.location.href}fu(t){let e=t.type==="replacestate"&&this.args.listeners.indexOf("replaceState")===-1,i=t.type==="hashchange"&&this.args.listeners.indexOf("hashchange")===-1;if(e||i)return;let r=this.vm();this._m!==r&&(this._m=r,this.ee())}onStart(){this._m=this.vm(),this.W.observe()}onStop(){this.W.disconnect()}}return s})(),F_=(()=>{class s extends ee{constructor(){super(...arguments),this.St=!0,this.$s=!0,this.si={boundElement:document,type:"submit",listener:t=>this.submitListener(t)}}validateArgs(t){return J(t)?T(t.selector):!1}submitListener({target:t}){yt(t)&&xe(t)&&Xt.call(t,this.args.selector)&&this.onEventCallback({element:t})}onInit(){Nt(this.args.selector)||(this.St=!1)}onStart(){this.St&&pt(this.si,this.$s)}onStop(){this.St&&ft(this.si,this.$s)}}return B([O("submitListener"),dt()],s.prototype,"submitListener",null),s})(),z_=(()=>{class s extends ee{constructor(){super(...arguments),this.St=!0,this.wm={boundElement:document,type:"mouseover",listener:t=>this.mouseoverListener(t)},this.bm={boundElement:document,type:"mouseleave",listener:t=>this.mouseleaveListener(t)}}validateArgs(t){return J(t)?T(t.selector):!1}onInit(){Nt(this.args.selector)||(this.St=!1)}mouseleaveListener({target:t}){yt(t)&&xe(t)&&t[this.Va]&&delete t[this.Va]}mouseoverListener({target:t}){if(yt(t)&&xe(t)){let e=qs(t,this.args.selector);e!==null&&!e[this.Va]&&(e[this.Va]=!0,this.onEventCallback({element:e}))}}onStart(){this.St&&(this.Va=csSymbol("Hovered"),pt(this.bm,!0),pt(this.wm,!0))}onStop(){this.St&&(ft(this.wm),ft(this.bm))}}return B([O("mouseleaveListener"),dt()],s.prototype,"mouseleaveListener",null),B([O("mouseoverListener"),dt()],s.prototype,"mouseoverListener",null),s})(),$_=(()=>{class s extends ee{constructor(){super(...arguments),this.si={boundElement:window,type:"hashchange",listener:t=>this.hashChangedListener(t)}}validateArgs(t){return!!J(t)}hashChangedListener(t){t.newURL&&t.newURL===t.oldURL||this.onEventCallback()}onInit(){}onStart(){pt(this.si)}onStop(){ft(this.si)}}return B([O("hashChangedListener"),dt()],s.prototype,"hashChangedListener",null),s})(),G_=(()=>{class s extends ee{constructor(){super(...arguments),this.ja=!0}validateArgs(t){return J(t)?T(t.selector):!1}onInit(){if(!Nt(this.args.selector)||!vn.isSupported()){this.ja=!1;return}this.Rt=new vn({delay:0,trackOnce:!0,reobserve:!0}),this.F=new ue(t=>this.gu(t),{closest:!0})}gu(t){for(let e of t)this.Rt.observe(e)}mu(t,e){if(this.isStarted&&e===_i.VisibleInViewPort){let i=qs(t,this.args.selector);i&&(this.onEventCallback({element:i}),this.stop(),this.ja=!1)}}onStart(){this.ja&&(this.Rt.start((t,e)=>this.mu(t,e)),this.F.observe(this.args.selector))}onStop(){this.ja&&(this.Rt.stop(),this.F.disconnect())}}return s})(),q_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.url):!1}execute(t){this.commandsService.applyFromImplementation(Ci[0],[t.url],"ApiErrorsMaskUrlTemplate")}}return s})(),W_=(()=>{class s extends bt{validateArgs(t){return J(t)?T(t.maskingPattern):!1}execute(t){this.commandsService.applyFromImplementation(zn[0],[t.maskingPattern],"NetworkRequestMaskUrlTemplate")}}return s})(),Ac="once per pageview",Y_="always",X_=(()=>{class s extends ee{constructor(){super(...arguments),this.yu=!1,this.ze=!1,this.Zr=!0}validateArgs(t){if(J(t)){let e=T(t.selector),i=t.frequency?t.frequency===Ac||t.frequency===Y_:!0;return e&&i}return!1}onInit(){vn.isSupported()&&(this.ze=!0,this.Zr=this.args.frequency?this.args.frequency===Ac:!0,this.F=new ue((t,e)=>{if(e==="initial")for(let i of t)at.isVisibleInViewportInForeground(i)&&(i[this.Eu]=!0);this.gu(t)},{closest:!0}),this.Rt=new vn({delay:0,trackOnce:!1,reobserve:!0,allowSameMatch:!0}))}onStart(){!this.ze||this.isStarted||(this.Eu=csSymbol("skipElement"),this.yu=!1,this.Rt.start((t,e)=>this.mu(t,e)),this.F.observe(this.args.selector))}onStop(){!this.ze||!this.isStarted||(this.F.disconnect(),this.Rt.stop())}mu(t,e){if(this.isStarted&&e===_i.VisibleInViewPort){let i=t.closest(this.args.selector);if(i){if(i[this.Eu]){delete i[this.Eu];return}this.Zr&&this.stop(),(!this.Zr||!this.yu)&&(this.yu=!0,this.onEventCallback({element:i}))}}}gu(t){for(let e of t)this.Rt.observe(e)}}return s})(),Xr=(()=>{class s extends ee{constructor(){super(...arguments),this.du={pageviewTypes:["natural","artificial"]}}validateArgs(t){var e;return J(t)&&te(t)&&csArray.isArray(t.pageviewTypes)&&ao(t.pageviewTypes,r=>T(r))||(L.implementation(`BeforePageViewTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.pageviewTypes}, fallback to default config.`),this.args=this.du),!0}onInit(){this.r0=this.args.pageviewTypes}onPageView(t){this.isStarted&&csArray.prototype.indexOf.call(this.r0,t)!==-1&&this.onEventCallback()}onStart(){}onStop(){}}return s})(),K_=(()=>{class s extends bt{constructor(){super(...arguments),this.Su=!1}validateArgs(t){return J(t)&&T(t.type)&&T(t.urls)&&(t.type==="allow"||t.type==="block")&&csString.prototype.trim.call(t.urls).length>0?(this.Su=!1,!0):(L.implementation(`BlockAllowListForSRTemplate has wrong argument: ${t}, fallback to default config.`),this.Su=!0,!0)}execute(t){let e="";this.Su?e=Jh:e=this.o0(t.urls,t.type),this.commandsService.applyFromImplementation(Zh[0],[e],"BlockAllowListForSRTemplate")}o0(t,e){let i=e==="allow"?"?!":"";return i+=csArray.prototype.join.call(csArray.prototype.map.call(csString.prototype.split.call(t,","),r=>`.*${csString.prototype.trim.call(r)}`),"|"),`^(${i}).*?`}}return s})(),J_=(()=>{class s{constructor(t){this.E=t,this.a0={ApiErrorsMaskUrl:q_,NetworkRequestMaskUrls:W_,ArtificialPageview:vu,BlockAllowListForSr:K_,CustomError:u_,CustomVariable:d_,DataCsEncrypt:p_,DataCsOverride:g_,DynamicVariable:y_,EcTransactionAll:E_,EcTransactionCreate:S_,EcTransactionItemsAdd:v_,EcTransactionSend:__,ElementUnmasking:w_,EventTriggerRecordingPage:b_,EventTriggerRecordingSession:A_,PageEvent:T_,PiiMasking:R_,RecordingEventTrigger:C_,SetPath:I_,SetQuery:P_,SrmOnlineAssets:O_,Submit:N_},this.Ln={AfterPageView:V_,ElementAdded:k_,ElementBecomesVisible:X_,ElementExist:D_,ElementRemoved:L_,ElementVisibility:G_,ElementClick:j_,FormSubmit:F_,HashChange:$_,HistoryChange:B_,Mouseover:z_,PageState:U_,BeforePageView:Xr}}c0(t){let e=this.a0[t.name];return e?new e(this.E,t.args):(L.error(`Implementations: template ${t.name} does not exist`),null)}l0(t){let e=this.Ln[t.name];return e?new e(this.E,t.args,t.condition):(L.error(`Implementations: trigger ${t.name} does not exist`),null)}parse(t){let e=[];for(let{triggers:i,template:r}of t){let o=this.c0(r);if(!o)continue;if(!o.validateArgs(o.args)){L.implementation(`${r.name} has wrong argument.`);continue}for(let l of i){let h=this.l0(l);if(!h)continue;if(!h.validateArgs(h.args)){L.implementation(`${l.name} has wrong argument.`);continue}csArray.prototype.push.call(e,{name:`${l.name}_${r.name}`,trigger:h,template:o})}}return e}}return s})(),Q_=(()=>{class s{constructor(t,e,i){this.h0=t,this.I=i,this.Re={window,document,location,cookies:{}},this.Ln=new Set,this.u0=new J_(e)}init(){Object.defineProperty(this.Re,"cookies",{get:()=>this.d0()});let t=this.u0.parse(this.h0);for(let{name:e,trigger:i,template:r}of t)i instanceof Xr&&r instanceof vu||(this.Ln.add(i),i.onEvent(o=>{this.onTriggerEvent(o,r),et.counters.CSTCSnippetUsed.count(e)}))}start(t=!1){this.Ln.forEach(e=>{e.condition&&!Su(e.condition,this.Re)||(t?this.I.schedule(()=>{e.start()}):e.start())})}stop(){this.Ln.forEach(t=>{t.stop()})}onBeforePageView(t){this.Ln.forEach(e=>{if(e instanceof Xr){e.onPageView(t);return}})}onTriggerEvent(t,e){let i=this.p0(t),r={...this.Re,...i},o=[];if(Dv(e.args)&&T(e.args.iterable)&&e.args.iterable.length>0){let c=r_(e.args.iterable,r);if(yt(c)){let l=csArray.prototype.map.call(c,h=>({...r,$:h}));csArray.prototype.push.call(o,...l)}}else csArray.prototype.push.call(o,r);if(e instanceof Ui){for(let c of o)e.execute(e.args,c);return}for(let c of o){let l=Wr(e.args,c);l&&e.execute(l)}}d0(){let t;try{t=document.cookie}catch{t=""}return csArray.prototype.reduce.call(csString.prototype.split.call(t,"; "),(e,i)=>{let[r,o]=csString.prototype.split.call(i,"=");return o!==void 0&&(e[r]=o),e},{})}p0(t){let e={...t};for(let i in e)gt(e[i])&&(U.isMaskedElement(e[i])||U.isMaskedElementChild(e[i]))&&delete e[i];return e}}return B([Mt("implementationsService.start")],s.prototype,"start",null),B([O()],s.prototype,"onTriggerEvent",null),s})(),_u=(()=>{class s{constructor(t,e,i){this.Cs=new Q_(t,e,i)}init(){this.Cs.init()}onInitTracking(){this.Cs.start(!0)}onOptout(){this.Cs.stop()}onBeforeSessionRenewal(){this.Cs.stop(),this.Cs.start()}onBeforeArtificialPageView(){this.Cs.stop(),this.Cs.start(),this.Cs.onBeforePageView("artificial")}onBeforeNaturalPageView(){this.Cs.onBeforePageView("natural")}}return s})(),wu=(()=>{class s{constructor(t){this.configuration=t}}return s})(),Z_=(()=>{class s extends wu{constructor(t,e,i){super(t),this.configuration=t,this.so=e,this.S=i,this.f0=H.RECORDING_GLOBAL_SAMPLING}refreshQuota(){this.io=void 0,this.g0()}onQuotaReady(t){this.Am=t}init(){this.m0()}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==H.QUOTA_REACHED}computeInitialCollectState(t){return this.io?(this.S.emitCollectStateChange(this.io,this.configuration.malkaEtrEnabled?Gt.ETR_ON:Gt.ETR_OFF),this.io):(L.warn("Quota file error computeInitialCollectState() called before quota answered"),H.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===H.QUOTA_REACHED?H.QUOTA_REACHED:!Ys.isRecordingSupported()&&this.isReplayRecorded(t)?H.ANALYTICS_ONLY:t.collectState===H.RECORDING_RULES_TARGETING?H.RECORDING_RULES_TARGETING:t.collectState===H.ANALYTICS_ONLY_RULES_TARGETING?H.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===H.RECORDING_GLOBAL_SAMPLING?H.RECORDING_GLOBAL_SAMPLING:H.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===H.RECORDING_GLOBAL_SAMPLING||t.collectState===H.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.io||H.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return H.ANALYTICS_ONLY}no(t){this.io=t,this.Am&&this.Am(t)}m0(){this.so.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.so.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.so.onLoad(t=>this.quotaFileHandler(t))}g0(){this.so.isInProgress()||this.so.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.y0(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;L.warn(e),this.no(this.f0)}y0(t){let e=!1,i=!1;for(let r of t.quotas)r.quotaType==="ANALYTICS"&&r.value?e=!0:r.quotaType==="RECORDING"&&r.value&&Ae.boolean(Math.round(r.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?Ys.isRecordingSupported()?this.no(H.RECORDING_GLOBAL_SAMPLING):this.no(H.ANALYTICS_ONLY):e&&!i?this.no(H.ANALYTICS_ONLY):this.no(H.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return H.ANALYTICS_ONLY}}return B([O("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),B([O("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),tw=(()=>{class s extends wu{constructor(t,e,i,r,o){super(t),this.configuration=t,this.S=e,this.Yh=i,this.R=r,this.vu=o,this._u=!1}refreshQuota(){}onQuotaReady(t){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this._u=!0,this.vu.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===H.QUOTA_REACHED||t.collectState===H.RECORDING_RULES_TARGETING||t.collectState===H.RECORDING_TEMPORARILY)&&(t.collectState=H.ANALYTICS_ONLY),t}computeInitialCollectState(){return rs.isReplayConsentNeeded(this.configuration)?H.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Da()}computeInitialCollectStateFromRecordingConsentGranted(){return this.Da()}Da(){if(!Ys.isRecordingSupported())return H.ANALYTICS_ONLY;let t=H.ANALYTICS_ONLY,e=Gt.ETR_OFF;return Ae.percentage()<this.configuration.replayRecordingRate||this.Yh.isForceReplayRecorded()?t=H.RECORDING_GLOBAL_SAMPLING:this._u&&this.vu.evaluateUrl(this.R.getAnonymizedUrl())&&(t=H.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=Gt.ETR_ON),this.S.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!Ys.isRecordingSupported())return H.ANALYTICS_ONLY;if(rs.isRecordingBlockedByConsent(t))return t.collectState===H.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?H.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:H.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===H.RECORDING_GLOBAL_SAMPLING)return H.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?Gt.ETR_ON:Gt.ETR_OFF;return this._u&&this.vu.evaluateUrl(this.R.getAnonymizedUrl())?(this.S.emitCollectStateChange(H.RECORDING_URL_SAMPLING,e),H.RECORDING_URL_SAMPLING):(this.S.emitCollectStateChange(H.ANALYTICS_ONLY,e),H.ANALYTICS_ONLY)}isReplayRecorded(t){return rs.isRecordingBlockedByConsent(t)?!1:t.collectState===H.RECORDING_TEMPORARILY||t.collectState===H.RECORDING_GLOBAL_SAMPLING||t.collectState===H.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return H.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return H.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})();function ew(){let s="[data-cs-mask]",n="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,n,t,...e,...i]}function sw(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var bu=(()=>{class s{constructor(){this.E0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.Rs={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:ew(),Attributes:sw()};this.Rs=U.getComputedSelectorSettings(t,this.Rs)}init(){this.S0()}setMaskedElementSettingsFromCommand(t){if(t=U.sanitizeSelectorUserInput(t),!U.isSelectorUserInput(t))throw new Error(`Command misuse: ${xi[0]}`);this.wu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.wu(e)}getMaskedElementSettings(t){return t?this.Tm(this.E0):this.Rs}S0(){var t,e,i,r,o,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(r=window==null?void 0:window.ClickTaleSettings)===null||r===void 0?void 0:r.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(h=>{T(h.attr)&&T(h.rule)&&l.Attributes.push({selector:h.rule,attrName:h.attr})}),this.wu(l)}wu(t){this.Rs=this.Tm(t)}Tm(t){return U.getComputedSelectorSettings(t,this.Rs)}}return s})();var iw=(()=>{class s{constructor(t,e,i,r,o){this.f=t,this.ci=e,this.ds=i,this.I=r,this.S=o,this.v0=()=>{var c;let l=wt.get(oe);l!==null&&On(l)?this.ut.canCollect(ol(l))?this.init():!((c=this.f.voc)===null||c===void 0)&&c.enabled:(this.ut.onQuotaReady(h=>{var p;h!==H.QUOTA_REACHED?this.init():!((p=this.f.voc)===null||p===void 0)&&p.enabled}),this.ut.refreshQuota())}}initWithQuota(){var t;if(!this.f.collectionEnabled){!((t=this.f.voc)===null||t===void 0)&&t.enabled;return}let e=new cS(this.f.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.ut=new Z_(this.f,e,this.S),this.ut.init(),this.v0()}init(){bs.isSupported()&&bs.setDigestSalt(this.f.projectId.toString());let t,e,i,r,o,c,l,h,p,u,m,y,S,C,M,b,v,k,I,R,F,G,rt,At,vt,_,x,j,z,it,St,xt,He,hs,Ps;this.I.schedule(()=>{t=new Rs,e=new au(t),r=new ru(window.location,e),i=new In(this.f,r,this.ci),i.init()}),this.I.schedule(()=>{o=new lv,c=new hv,v=new WS(window.location,i),new _v().init(),k=qh.create(L.warn),b=new tl(k),this.ut===void 0&&(this.ut=new tw(this.f,this.S,v,r,new Bn),this.ut.init())}),this.I.schedule(()=>{l=new kS(this.f,i,o),p=new xS(l,this.ut,this.f.replayConsentRequiredForSession,this.f.malkaEtrEnabled)}),this.I.schedule(()=>{u=new pv(this.f,i,o),m=new NS(this.f,u,this.S,p),this.ds.setContext(m,p)}),this.I.schedule(()=>{hs=new FS(this.f,new jS(this.f,i,c),this.S),y=new VS(m,p,hs),S=new ll(this.f,i,o),C=new $S(window.location,S),M=new GS(C),F=new US(this.f,m,C),xt=new cu(we,this.f),x=new lu(xt),j=new hu(xt),z=new uu(xt),it=new du,St=new ou(x,j,z,it),_=new su([qr.UXA]),G=new sv(_,St),rt=new Qh(r),At=new tu(rt,_);let Be=new hl(this.f,i,o);He=new dv(t,Be),vt=new uv(_,He);let us=new $f(m,p,C,He,this.f);{let ds=new eg,Ie=new tg(ds,window.location);{h=new iv(this.f,i,l,u,S,Be),h.init();let It=new rv(this.f,ds);h.setStates(us,It)}}}),this.I.schedule(()=>{let Be=new OS(this.f,m,C,F,y,I,h,v);this.f.implementations&&(Ps=new _u(this.f.implementations,_,this.I),Ps.init(),this.S.addListener(Ps)),Be.compute(us=>{this.I.schedule(()=>{G.init();let ds=new cv,Ie=new BS(this.f,_,hs,p,this.S),It=new YS(this.f,i,c),Ft=new XS(this.S,window.location,It),ni=new KS(_,Ft),qn=new av(_,this.f),Wn=new ov(this.f,m,p,R);if(us){this.S.emitInitTracking();let ri=new bu;new PS(Wn,k,m,p,this.S,_,G,this.f,ni,Ft,Ie,hs,t,xt,e,r,qn,ds,St,He,vt,rt,At,this.I,b,i,c,this.ut,ri).start()}else new zS(this.S,_,G,ni,Ft,M,Ie).start()})})})}}return s})(),_s=(()=>{let s;return function(n){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(v){let k=v.source,I=v.data;if(c(I)){let R=()=>{let F=r(t,I);m(F,()=>k.postMessage("csBundleLoaded",v.origin))};e=I.token,b(i.loadBundle),l(v.origin)&&R()}}};function r(v,k){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(v,"{version}",k.version),"{token}",k.token),"{domain}",k.domain)}function o(){return e}n.getToken=o;function c(v){return v&&v.type==="csBundleInjection"&&l(v.domain)&&p(v.version)&&h(v.token)}n.isAuthorizedIncomingMessage=c,n.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(v){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(v)||n.hjDomainRegex.test(v)}n.isAuthorizedDomain=l;function h(v){return/^[a-zA-Z0-9]+$/.test(v)}n.isAuthorizedToken=h;function p(v){return/^[a-zA-Z0-9\.]+$/.test(v)}n.isAuthorizedTagVersion=p;function u(){let v=window.opener||window.parent;return window!==v&&window.addEventListener}n.isActivable=u;function m(v,k){let I=document.createElement("script");I.type="text/javascript",I.async=!0,I.src=v,I.onload=k,I.charset="utf-8",document.head.appendChild(I)}n.addScript=m;function y(v){let k=document.createElement("link");k.rel="stylesheet",k.href=v,document.head.appendChild(k)}n.addStyle=y;function S(v){return`${v}?cb=${new csDate().getTime()}`}n.addCacheBusting=S;function C(){M(i.loadBundle)}n.waitForBundleInjection=C;function M(v){window.addEventListener("message",v,!1)}n.listen=M;function b(v){window.removeEventListener("message",v,!1)}n.removeListener=b}(s||(s={})),s})(),Tc="_hp_ved",nw=18e5,rw="/js/ved.js",ow="/css/ved.css",aw="/js/ved.css",cw=(()=>{let s;return function(n){n.StatusUpdate="status"}(s||(s={})),s})(),lw=(()=>{let s;return function(n){n.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var br=(()=>{let s;return function(n){let t=!1,e;function i(m){return e+m}function r(){let m=[i(ow),i(aw)];csArray.prototype.forEach.call(m,y=>{_s.addStyle(y)})}function o(m){let y=new csRegExp("(^|;)[ ]*"+m+"=([^;]*)"),S=y.exec(document.cookie);return S?decodeURIComponent(S[2]):null}function c(m,y,S){let C=encodeURIComponent(m)+"="+encodeURIComponent(y),M=new csDate;M.setTime(M.getTime()+S);let b=C+"; expires="+M.toUTCString()+"; path=/";document.cookie=b}function l(){c(Tc,"on",nw)}function h(){return o(Tc)==="on"}n.isVLCookieEnabled=h;function p(m){window.heapV=Object.assign({},window.heap,{source:m==null?void 0:m.source,uri:e,loadArgs:m==null?void 0:m.data.args,identify:()=>{},track:()=>{}})}n.initializeHeapV=p;function u(m,y){var S;if(e=m,y){let C={type:cw.StatusUpdate,value:lw.ReceivedInitMessage},M={targetOrigin:y==null?void 0:y.origin};(S=y==null?void 0:y.source)===null||S===void 0||S.postMessage(C,M)}t||(t=!0,l(),p(y),window.heapV&&(_s.addScript(i(rw)),r()))}n.init=u}(s||(s={})),s})(),hw=(()=>{let s;return function(n){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,_s.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(R){var F;R.origin===l&&((F=R.data)===null||F===void 0?void 0:F.message)==="init"&&R.source&&(br.init(l,R),v(h.initHeapVisualLabeler))},ping(R){typeof R.data=="string"&&R.data==="ping"&&m(R.origin)&&(c=R.origin,o=_s.hjDomainRegex.test(R.origin)?i:R.origin,v(h.ping),b(h.insertMessageScript),y(_s.addCacheBusting("utils.js")))},insertMessageScript:k(R=>{typeof R.data=="string"&&R.data!=="ping"&&(v(h.insertMessageScript),y(R.data))})};function p(){return _s.getToken()}n.getToken=p;function u(){return window!==t&&window.addEventListener}n.isActivable=u;function m(R){return csArray.prototype.some.call(r,F=>F.test(R))}n.isAuthorizedDomain=m;function y(R,F){let G=document.createElement("script");G.type="text/javascript",G.async=!0;let rt=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");G.src=`${rt}/${e}/${R}`,G.onload=F,G.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(G),S(R)}function S(R){csString.prototype.includes.call(R,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(R,"&mode=")[1])}function C(){b(h.ping),_s.waitForBundleInjection()}n.waitForConnection=C;function M(R){l=R,b(h.initHeapVisualLabeler),br.isVLCookieEnabled()&&br.init(l)}n.waitForHeapVisualLabeler=M;function b(R){window.addEventListener("message",R,!1)}n.listen=b;function v(R){window.removeEventListener("message",R,!1)}n.removeListener=v;function k(R){return function(F){F.origin===c&&R(F)}}n.secureListener=k;function I(R){c&&t.postMessage(R,c)}n.post=I}(s||(s={})),s})();var sn=window.CSFrameCommunication||hw,uw=(()=>{class s extends $n{emitTrackingContextResultMessage(t){for(let e of this.listeners)e.onTrackingContextResultCallback&&e.onTrackingContextResultCallback(t)}emitAfterPageViewCallback(t){for(let e of this.listeners)e.onAfterPageViewCallback&&e.onAfterPageViewCallback(t)}emitIntegrationSessionKeyCallback(t){for(let e of this.listeners)e.onIntegrationSessionKeyCallback&&e.onIntegrationSessionKeyCallback(t)}emitParentRecordingContextChange(t){for(let e of this.listeners)e.onParentRecordingContextChange&&e.onParentRecordingContextChange(t)}emitParentSensitiveStatusChange(t){for(let e of this.listeners)e.onParentSensitiveStatusChange&&e.onParentSensitiveStatusChange(t)}emitStartAnalytics(){for(let t of this.listeners)t.onStartAnalytics&&t.onStartAnalytics()}emitStopAnalytics(){for(let t of this.listeners)t.onStopAnalytics&&t.onStopAnalytics()}emitStartRecording(){for(let t of this.listeners)t.onStartRecording&&t.onStartRecording()}emitStopRecording(){for(let t of this.listeners)t.onStopRecording&&t.onStopRecording()}}return s})(),Au=(()=>{class s extends $n{constructor(t){super(),this.I=t}emitBeforeNaturalPageView(){for(let t of this.listeners)t.onBeforeNaturalPageView&&t.onBeforeNaturalPageView()}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.I.schedule(()=>e.onStartTracking(t))}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){L.error(e)}}emitBeforeArtificialPageView(){for(let t of this.listeners)t.onBeforeArtificialPageView&&t.onBeforeArtificialPageView()}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}}return B([Mt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})(),Tu=["trackTransaction"],dw=(()=>{class s{constructor(t){this.Y=t}init(){this.Y.register(Ni),this.Y.register(Gn),this.Y.register(bn),this.Y.register(An),this.Y.register(Vn),this.Y.register(lh),this.Y.register(Mi),this.Y.register(ei),this.Y.register(ki),this.Y.register(Tu),this.Y.register(Th),this.Y.register(Rh),this.Y.register(Do),this.Y.register(eu),this.Y.register(Ch),this.Y.register(jn),this.Y.register(ii),this.Y.register(_o),this.Y.register(Wh),this.Y.register(Yh),this.Y.register(Xh),this.Y.register(Kh),this.Y.register(zn),this.Y.register(Mo),this.Y.register(bS),this.Y.register(lS),this.Y.register(hS),this.Y.register(uS)}onStartTracking(){this.Y.start()}onOptout(){this.Y.stop()}}return s})(),pw=(()=>{class s extends Et{constructor(t,e){super(),this.E=t,this.C=e,this.Gt=[]}onStart(){this.commandsBatchReady()}onStop(){this.Gt=[]}register(t){for(let e of t)this.E.register([e],(...i)=>this.send(e,i))}send(t,e){csArray.prototype.push.call(this.Gt,{name:t,params:e}),this.isStarted&&this.commandsBatchReady()}commandsBatchReady(){if(this.Gt.length===0)return;let t={commands:this.Gt};this.C.sendToParent(P.Commands,t),this.Gt=[]}}return B([O("Commands.iframe.commandsBatch.send")],s.prototype,"send",null),B([Cs({wait:0,mode:"trailing"}),O("send iframe commands batch")],s.prototype,"commandsBatchReady",null),s})(),fw="Buffer is full, events might be missing.",gw=(()=>{class s{constructor(t=25){this.Cm=t,this.xn=[]}reset(){this.xn=[]}getMessages(){return this.xn}addMessage(t){this.xn.length<this.Cm?csArray.prototype.push.call(this.xn,t):this.xn.length===this.Cm&&(this._0(t),csArray.prototype.push.call(this.xn,t))}_0(t){t.type=P.ChildLogMessage,t.content={message:fw,errorCode:"",level:ct.warn}}}return s})(),Ru=(()=>{class s extends Et{constructor(t){super(),this.buffer=new gw(t)}}return s})(),mw=25,yw=(()=>{class s extends Ru{constructor(t,e,i,r,o){super(mw),this.f=t,this.S=e,this.Is=i,this.Xt=r,this.ii=o,this.Ye=null,this.Im={boundElement:window,type:"message",listener:c=>this.hh(c)}}onStart(){pt(this.Im,!1),this.w0()}onStop(){ft(this.Im,!1),this.Ye&&(nt.closeChannelPort(this.Ye),this.Ye=null)}sendToParent(t,e){let i=this.buildChildBaseMessage(t,e);this.La(i)}w0(){let t=this.buildChildBaseMessage(P.Discovery);nt.sendPostMessage(window.parent,"*",t)}buildChildBaseMessage(t,e){let i=nt.buildBaseMessage(t,Jt.Child,this.f.projectId);return e&&(i.content=e),i}La(t){this.Ye!==null?nt.sendChannelMessage(this.Ye,t):this.buffer.addMessage(t)}b0(t,e){let i=nt.getNewChannelMessage();this.Ye=i.port1,this.Ye.onmessage=o=>{this.ph(o)};let r=this.buildChildBaseMessage(P.Discovery);r.id=e,nt.sendPostMessage(window.parent,t,r,[i.port2]),this.sendAllMessagesFromBuffer()}ph(t){switch(t.data.type){case P.TrackingContextResultMessage:this.ii.emitTrackingContextResultMessage(t.data.content);break;case P.IntegrationCallback:{let e=t.data.content;e.initiator===Gs.AfterPageView?this.ii.emitAfterPageViewCallback(e):e.initiator===Gs.GetSessionKey?this.ii.emitIntegrationSessionKeyCallback(e):L.warn(`Iframe child received unknown IntegrationCallback type from parent : ${csJSON.stringify(t.data)}`);break}case P.Stop:this.S.emitOptout();break;case P.RecordingContext:{let e=t.data.content;this.Is.setRecordingContext(e),this.ii.emitParentRecordingContextChange(e);break}case P.SensitiveStatus:{let e=t.data.content;this.Xt.setSensitiveStatus(e),this.ii.emitParentSensitiveStatusChange(e);break}default:L.warn(`Iframe child received unknown channelMessage type from parent : ${csJSON.stringify(t.data)}`)}}hh(t){if(this.Ye===null&&nt.isMessageValid(t,Jt.Parent,this.f.projectId,this.f.hostnames))switch(t.data.type){case P.Stop:this.S.emitOptout();break;case P.Discovery:if(!Le(t.data.id)||t.data.id<0){L.warn(`Iframe child received discovery without valid id from parent (${t.origin}) : ${csJSON.stringify(t.data)}`);return}this.b0(t.origin,t.data.id);break;default:L.warn(`Iframe child received unknown postMessage type from parent (${t.origin}) : ${csJSON.stringify(t.data)}`)}}sendAllMessagesFromBuffer(){if(this.Ye===null)return;let t=this.buffer.getMessages();for(let e of t)nt.sendChannelMessage(this.Ye,e);this.A0(),this.buffer.reset()}A0(){let t=nt.buildBaseMessage(P.EndOfBufferedMessages,Jt.Child,this.f.projectId);nt.sendChannelMessage(this.Ye,t)}}return s})(),Ew=(()=>{class s{constructor(t){this.C=t}onStartTracking(){this.C.start()}onOptout(){this.C.stop()}}return s})(),Sw=(()=>{class s{constructor(t,e,i,r,o){this.J=t,this.ht=e,this.C=i,this.Is=r,this.Xt=o}init(){this.J.onChildMessage((t,e,i)=>this.ht.emitIframeEvent(t,e,i)),this.J.setSentiveStatusCallback(()=>this.Xt.getSensitiveStatus()),this.J.setRecordingContextCallback(()=>this.Is.getRecordingContext())}onStartTracking(){this.J.start()}onOptout(){this.J.stop()}onIframeRecordingUserEvent(t){let e={events:t,containsUserEvent:!0};this.C.sendToParent(P.RecordingEvent,e)}onIframeRecordingBrowserEvent(t){let e={events:t,containsUserEvent:!1};this.C.sendToParent(P.RecordingEvent,e)}onIframeAnalysisUserEvent(t){let e={event:t,isUserEvent:!0};this.C.sendToParent(P.AnalysisEvent,e)}onIframeAnalysisBrowserEvent(t){let e={event:t,isUserEvent:!1};this.C.sendToParent(P.AnalysisEvent,e)}onIframeJavascriptError(t){this.C.sendToParent(P.JavascriptError,t)}onIframeApiError(t){this.C.sendToParent(P.ApiError,t)}onIframeDetailedApiError(t){this.C.sendToParent(P.DetailedApiError,t)}onIframeEmerchandisingMessage(t){this.C.sendToParent(P.EmerchandisingMessage,t)}onIframeCommands(t){this.C.sendToParent(P.Commands,t)}onIframeIntegrationCallback(t){this.C.sendToParent(P.IntegrationCallback,t)}onTrackingContextRequestCallback(t){this.C.sendToParent(P.TrackingContextRequestMessage,t)}onIframeStaticResource(t){this.C.sendToParent(P.StaticResource,t)}onIframeCustomError(t){this.C.sendToParent(P.CustomError,t)}onTrackingContextResultCallback(t){this.J.sendToChildren(P.TrackingContextResultMessage,t)}onAfterPageViewCallback(t){this.J.sendToChildren(P.IntegrationCallback,t)}onIntegrationSessionKeyCallback(t){this.J.sendToChildren(P.IntegrationCallback,t)}onParentRecordingContextChange(t){this.J.sendToChildren(P.RecordingContext,t)}onParentSensitiveStatusChange(t){this.J.sendToChildren(P.SensitiveStatus,t)}}return s})(),vw=(()=>{class s extends Et{constructor(t,e,i,r,o,c,l,h){super(),this.Ws=t,this.Vt=e,this.C=i,this.Ss=r,this.vs=o,this.Ci=c,this.Ii=l,this.Pi=h}init(){var t,e,i,r,o;this.Ws.onEvent(c=>this.Mt(c)),this.Vt.onEvent(c=>this.Mt(c)),(t=this.Ss)===null||t===void 0||t.onEvent(c=>this.Mt(c)),(e=this.vs)===null||e===void 0||e.onEvent(c=>this.Mt(c)),(i=this.Ci)===null||i===void 0||i.onEvent(c=>this.Mt(c)),(r=this.Ii)===null||r===void 0||r.onEvent(c=>this.qe(c)),(o=this.Pi)===null||o===void 0||o.onEvent(c=>this.qe(c))}onStart(){var t,e,i,r,o;this.Ws.start(),this.Vt.start(),(t=this.Ss)===null||t===void 0||t.start(),(e=this.vs)===null||e===void 0||e.start(),(i=this.Ci)===null||i===void 0||i.start(),(r=this.Ii)===null||r===void 0||r.start(),(o=this.Pi)===null||o===void 0||o.start()}onStop(){var t,e,i,r,o;this.Ws.stop(),this.Vt.stop(),(t=this.Ss)===null||t===void 0||t.stop(),(e=this.vs)===null||e===void 0||e.stop(),(i=this.Ci)===null||i===void 0||i.stop(),(r=this.Ii)===null||r===void 0||r.stop(),(o=this.Pi)===null||o===void 0||o.stop()}Mt(t){let e={isUserEvent:!0,event:t};this.X(e)}qe(t){let e={isUserEvent:!1,event:t};this.X(e)}X(t){!this.isStarted||t.event.type===q.RESIZE||this.C.sendToParent(P.AnalysisEvent,t)}}return s})(),_w=["webview:analytics:start"],ww=["webview:analytics:stop"],bw=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p){this.f=t,this.K=e,this.jt=i,this.C=r,this.Et=o,this.yt=c,this.E=l,this.Vt=h,this.ye=p}init(){let t,e,i=vh(this.f,this.K,this.ye),r=[];this.f.collectSubmit||csArray.prototype.push.call(r,"submit");let o=new dh(i,this.K,this.jt,r),c=this.Et.isInWebViewContext()?{collectGestureVelocity:!0,collectGestureDistance:!0}:{collectGestureVelocity:!1,collectGestureDistance:!1},l=_h(this.f,this.K,this.ye),h=new uh(l,this.Vt,c),p,u,m;this.ro=new vw(o,h,this.C,t,e,u,m,p),this.ro.init(),this.Et.isInWebViewContext()&&this.T0()}onStartTracking(){this.ro.start()}onOptout(){this.ro.stop()}onStartAnalytics(){this.ro.start()}onStopAnalytics(){this.ro.stop()}T0(){this.E.register(_w,()=>this.yt.emitStartAnalytics(),{disableApplyPending:!0}),this.E.register(ww,()=>{this.yt.emitStopRecording(),this.yt.emitStopAnalytics()},{disableApplyPending:!0})}}return s})();var Aw=(()=>{class s extends Et{constructor(t,e,i,r,o=[],c){super(),this.f=t,this.nt=e,this.C=i,this.ke=r,this.De=o,this.Bt=c,this.bu=!1,this.mi=!1,this.Us=new mo,this.z=[],this.Ba=!1,this.ms=l=>this.qe(l),this.Yn=l=>this.Mt(l)}init(){this.zc()}zc(){var t;this.ke.onEvent(this.ms,this.Yn),(t=this.nt)===null||t===void 0||t.onInputNodeToEncrypt(this.Yn)}setEnableOnlineAssets(t){this.bu=t!=null?t:!1}setOnlineAssetsEnabledOnNextStart(t){this.mi=t}getStaticResourceManagerStatus(){return this.Bt?{supported:Ws.isSupported(),onlineAssets:{activated:this.bu,enableOnNextStart:this.mi}}:null}qe(t){this.P0(t),this.Fa()}Mt(t){this.Pm(t),this.Fa()}Pm(t){csArray.prototype.push.call(this.z,t),this.Ba=!0}P0(t){csArray.prototype.push.call(this.z,t)}Fa(){W(this.De,e=>{var i;return(i=e.flushEvents)===null||i===void 0?void 0:i.call(e)});let t={containsUserEvent:this.Ba,events:this.z};this.C.sendToParent(P.RecordingEvent,t),this.z=[],this.Ba=!1}onStart(){this.Bt&&this.bu&&this.Bt.enableOnlineAssets(),this.ke.start(),this.f.emitDebugEvents&&this.Us.emit("replayRecordingStarted"),W(this.De,t=>{t.start&&t.start()})}onStop(){var t;this.ke.stop(),(t=this.Bt)===null||t===void 0||t.disableOnlineAssets(),W(this.De,e=>{e.stop&&e.stop()})}addInitialDom(t){for(let e=0;e<this.z.length;e+=1)if(this.z[e].date>=t.date){csArray.prototype.splice.call(this.z,e,0,t),this.Ba=!0,this.Fa();return}this.Pm(t),this.Fa()}}return s})(),Cu=(()=>{class s{constructor(t){this.f=t}isReplayUnanonymizedAllowedByConsent(){return!this.f.consentRequired}}return s})(),Kr=(()=>{class s{static isWebViewLocalAssetsSupported(){return"URL"in window}}return s})(),Tw=["webview:replay:start"],Rw=["webview:replay:stop"],Cw=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.f=t,this.yt=e,this.Om=i,this.ni=r,this.Au=o,this.E=c,this.R=l,this.Xt=h,this.Tu=!1}init(){let t=new Cu(this.f),e=new Bn;if(this.ne=new Qh(this.R),new tu(this.ne,this.E).init(),this.lt=new Po(t,this.f,this.R,e),this.lt.init(),Kr.isWebViewLocalAssetsSupported()){let r=p=>{this.oo(p)},o=p=>L.error("An error occurred while fetching a styleSheet: "+p),c=new Set,l=p=>!c.has(p),h=p=>{c.add(p.assetId),this.oo([p])};this.Om.onAsset(p=>{this.O0(p)}),this.Om.onStyleSheetFound(p=>{this.Au.getStyleSheetAssets(p.assetId,r,o,l,h)})}this.N0()}onStartRecording(){if(this.Tu=!0,!this.ne.isUrlExcludedForSessionReplay()){let t=this.Xt.getSensitiveStatus();this.yt.emitParentRecordingContextChange({isRecording:!0,useAnonymization:t.useAnonymization})}}onStopRecording(){this.Tu=!1,this.yt.emitParentRecordingContextChange({isRecording:!1})}onArtificialPageViewEnd(){this.yt.emitParentRecordingContextChange({isRecording:!1})}onAfterArtificialPageView(){if(this.L()&&!this.ne.isUrlExcludedForSessionReplay()){let t=this.Xt.getSensitiveStatus();this.yt.emitParentRecordingContextChange({isRecording:!0,useAnonymization:t.useAnonymization})}}L(){return this.Tu}N0(){this.E.register(Tw,()=>{this.yt.emitStartAnalytics(),this.yt.emitStartRecording()},{disableApplyPending:!0}),this.E.register(Rw,()=>this.yt.emitStopRecording(),{disableApplyPending:!0})}O0(t){this.ni.sendToParent(P.Assets,{assets:[t]})}oo(t){t.length!==0&&this.ni.sendToParent(P.Assets,{assets:t})}}return s})();function Iw(s){var n=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return s.replace(n,function(t,e,i,r){if(e==="\\")return t.slice(1);if(r)return r;var o=parseInt(i,16),c=55296<=o&&o<=57343;return c||o===0||o>1114111?"\uFFFD":String.fromCodePoint(o)})}var Pw=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Ow(s,n){var t=s.replace(Pw,function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=e[3]||e[4],o=e[9]||e[10]||e[11],c=Iw((r||o).trim()),l=r?"@import ":"",h=n(c)||c;return l+"url("+Nw(h)+")"});return t}function Nw(s){return s.indexOf('"')===-1?'"'+s+'"':s.indexOf("'")===-1?"'"+s+"'":s}function Mw(s){var n=[];return Ow(s,function(t){return n.push(t),t}),n}var Iu=(()=>{class s{constructor(t){this.M0=t}getStyleSheetAssets(t,e,i,r,o){let c=[];if(!Sn(t)){i(`Not a recognized valid css file path ${t}`);return}let l=(h,p)=>{let u=this.k0(h,p);csArray.prototype.forEach.call(u,m=>{csArray.prototype.push.call(c,m),Sn(m.assetId)&&r(m.assetId)&&(o==null||o(m),this.getStyleSheetAssets(m.assetId,e,i,r,o))}),e(c)};this.M0.getResourceContentText(t,l,i)}k0(t,e){return this.D0(t,Mw(e))}D0(t,e){return csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(e,i=>!Zt(i)),i=>!ml(i)),i=>({assetId:Jc(i,t),assetBasePath:t,assetRawPath:i}))}}return s})(),Pu=(()=>{class s{getResourceContentText(t,e,i){let r=c=>{e(t,c.responseText)},o=this.L0(r,i);o.open("GET",t),o.send()}L0(t,e){let i=new XMLHttpRequest;return i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(i.status===200?t(i):e(i.statusText))},i}}return s})(),kw=(()=>{class s extends Et{constructor(t,e){super(),this.Ie=t,this.C=e}onStart(){}onStop(){}init(){this.Ie.onSendStaticResource(t=>this.C.sendToParent(P.StaticResource,t))}}return s})(),Dw=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,m,y,S){this.f=t,this.N=e,this.$t=i,this.S=r,this.C=o,this.Is=c,this.E=l,this.ii=h,this.Et=p,this.R=u,this.Xt=m,this.Z=y,this.nt=S}init(){let t=[],e=this.Is.getRecordingContext();this.yr=new xl(!!e.useAnonymization,this.f.whitelistedAttributes,this.N,this.f.anonymizeDigits);let i=[];csArray.prototype.push.call(i,new Ml,this.yr,new Ul(this.Z)),csArray.prototype.push.call(i,new Vl);let r=new Ol;csArray.prototype.push.call(t,r),!this.Et.isInWebViewContext()&&this.f.useStaticResourceManager&&Ws.isSupported()&&(this.Bt=new Ws,csArray.prototype.push.call(i,this.Bt),this.Ie=new Zl,this.Ru=new kw(this.Ie,this.C),this.Ru.init()),this.Ti=new fl,this.Ti.init(),csArray.prototype.push.call(t,this.Ti),csArray.prototype.push.call(t,new Rl(window.location,this.N));let o=[this.$t,new Al,new Jl(csArray.prototype.filter.call(t,h=>h)),new Fl,new zl,new ql,new Bl(this.nt)],c=new Kl(o,i),l=new Ql(c,this.S,this.Ie);if(this.oi=new Aw(this.f,this.nt,this.C,l,t,this.Bt),this.E.register(th,()=>this.Is.getRecordingContext().isRecording),this.E.register(eh,()=>this.oi.getStaticResourceManagerStatus()),this.oi.init(),this.Et.isInWebViewContext()){let h=new Iu(new Pu);this.Cu=new Cw(this.f,this.ii,r,this.C,h,this.E,this.R,this.Xt),this.ii.addListener(this.Cu),this.S.addListener(this.Cu),this.Cu.init()}}onParentRecordingContextChange(t){var e,i;t.useAnonymization!==void 0&&this.Ai(t.useAnonymization),t.enableOnlineResourcesOnNextPageview!==void 0&&this.oi.setOnlineAssetsEnabledOnNextStart(t.enableOnlineResourcesOnNextPageview),t.isRecording?(this.Il(),this.oi.setEnableOnlineAssets(t.enableOnlineResources),this.oi.start(),(e=this.Ru)===null||e===void 0||e.start()):(this.oi.stop(),(i=this.Ru)===null||i===void 0||i.stop())}onInitialDomStart(){}onInitialDomDone(t){this.Ti.start(),this.oi.addInitialDom(t)}Ai(t){var e;this.yr.setAnonymization(t),(e=this.Dv)===null||e===void 0||e.setAnonymization(t)}onOptout(){this.oi.stop()}Il(){var t,e,i,r;if(!((e=(t=this.f.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let o=(r=(i=this.f.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.filterByHostSelector;W(o,c=>{Nt(c)&&de.setShadowRootFilter(l=>{try{return Xt.call(l.host,c)}catch{return!1}})})}}}return s})(),Lw=(()=>{class s{constructor(t,e){this.ni=t,this.Nm=e}init(){this.ni.onWebViewEvent((t,e)=>{this.Nm.emitWebviewEventToBridge(t,e)})}onStartTracking(){this.ni.start()}onOptout(){this.ni.stop()}onStartAnalytics(){this.ni.setAnalyticsStatus(!0)}onStopAnalytics(){this.ni.setAnalyticsStatus(!1)}onParentRecordingContextChange(t){this.Nm.setSessionReplayStatus(t.isRecording)}}return s})(),ye=(()=>{let s;return function(n){n[n.PAGE_VIEW=4]="PAGE_VIEW",n[n.TAP=6]="TAP",n[n.LONG_PRESS=8]="LONG_PRESS",n[n.DRAG=9]="DRAG",n[n.FLICK=10]="FLICK",n[n.DETAILED_API_ERROR=13]="DETAILED_API_ERROR",n[n.JAVASCRIPT_ERROR_SR=19]="JAVASCRIPT_ERROR_SR",n[n.CUSTOM_ERROR_SR=20]="CUSTOM_ERROR_SR",n[n.API_ERROR=21]="API_ERROR",n[n.CUSTOM_ERROR_AN=25]="CUSTOM_ERROR_AN",n[n.JAVASCRIPT_ERROR_AN=26]="JAVASCRIPT_ERROR_AN"}(s||(s={})),s})(),xw=(()=>{class s{constructor(){this.Ui=1}transformEvent(t){switch(t.type){case q.TAP:return{version:this.Ui,type:ye.TAP,data:{path:t.tgt}};case q.DRAG:{let e=t;return{version:this.Ui,type:ye.DRAG,data:{path:e.tgt,direction:e.fd,distance:e.distance,velocity:e.velocity}}}case q.FLICK:{let e=t;return{version:this.Ui,type:ye.FLICK,data:{path:e.tgt,direction:e.fd,distance:e.distance,velocity:e.velocity}}}default:return null}}}return s})(),Uw=(()=>{class s{constructor(t,e,i,r){this.R=t,this.ue=e,this.de=i,this.vn=r,this.Ui=1}transformEvent(t,e){switch(t){case P.ApiError:case P.DetailedApiError:{let i=this.de.anonymize(e);return{version:this.Ui,data:i}}case P.JavascriptError:{let i={...e,pageUrl:this.R.getAnonymizedUrl()},r=this.ue.anonymize(i);return{version:this.Ui,data:{...r,date:D.now()}}}case P.CustomError:{let i=e;return i.message=this.vn.anonymize(i.message),{version:this.Ui,data:{...i,date:D.now()}}}default:return null}}}return s})(),Vw=2,_t=(()=>{let s;return function(n){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}n.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let S=window.CSJavascriptBridge.getVersion();if(Ot(S))return S}catch{L.warn("an error occurred when calling getVersion")}return null}n.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}n.notifyIsReadyForTracking=i;function r(S){window.CSJavascriptBridge.sendEvent(csJSON.stringify(S))}n.sendAnalysisEvent=r;function o(S){if(window.CSJavascriptBridge.sendSREvent)for(let C of S.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(C))}n.sendSREvent=o;function c(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(S))}n.sendLog=c;function l(){window.CSJavascriptBridge.optIn()}n.sendOptIn=l;function h(){window.CSJavascriptBridge.optOut()}n.sendOptOut=h;function p(S,C){window.CSJavascriptBridge.sendDynamicVar(S,C)}n.sendDynamicVariable=p;function u(S,C,M){window.CSJavascriptBridge.sendTransaction(S,C,M)}n.sendTransaction=u;function m(S,C){if(window.CSJavascriptBridge.sendAssets){let M=csJSON.stringify(S);window.CSJavascriptBridge.sendAssets(M,C||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(S,M=>M.assetId))}n.sendAssets=m;function y(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(S))}n.sendNativeSREvent=y}(s||(s={})),s})(),jw=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.Mm=t,this.ss=e,this.x0=i,this.za=r,this.Un=o,this.S=c,this.R=l,this.ft=h,this.Iu=!1}async emitWebviewEventToBridge(t,e){switch(t){case P.AnalysisEvent:{let i=this.x0.transformEvent(e.event);i&&_t.sendAnalysisEvent(i);break}case P.RecordingEvent:_t.sendSREvent(e);break;case P.ChildLogMessage:_t.sendLog(e);break;case P.Commands:L.tryToExecute(`SDKMessageUtils.sendMessage.sendCommandMessage: ${e}`,()=>{this.U0(e)})();break;case P.Assets:{let{assets:i,serializationId:r}=e,o=await this.Un.getTransformedAssets(i,r);_t.sendAssets(o,r);break}case P.JavascriptError:{let i=this.za.transformEvent(P.JavascriptError,e);i&&(this.Iu&&_t.sendNativeSREvent({...i,type:ye.JAVASCRIPT_ERROR_SR}),_t.sendAnalysisEvent({...i,type:ye.JAVASCRIPT_ERROR_AN}));break}case P.ApiError:{let i=this.za.transformEvent(P.ApiError,e);i&&(_t.sendAnalysisEvent({...i,type:ye.API_ERROR}),et.counters.networkRequests.count("collected"));break}case P.DetailedApiError:{let i=this.za.transformEvent(P.DetailedApiError,e);i&&(_t.sendNativeSREvent({...i,type:ye.DETAILED_API_ERROR}),et.counters.networkRequests.count("collected"));break}default:break}}setSessionReplayStatus(t){this.Iu=t}U0(t){let e=t.commands;for(let i of e)switch(!0){case csArray.prototype.indexOf.call(eu,i.name)>=0:_t.sendOptIn();break;case csArray.prototype.indexOf.call(Do,i.name)>=0:this.S.emitOptout(),_t.sendOptOut();break;case csArray.prototype.indexOf.call(Ni,i.name)>=0:this.V0(i);break;case csArray.prototype.indexOf.call(Vn,i.name)>=0:this.j0(i);break;case csArray.prototype.indexOf.call(Mi,i.name)>=0:this.km(i);break;case csArray.prototype.indexOf.call(ei,i.name)>=0:break;case csArray.prototype.indexOf.call(ki,i.name)>=0:this.xa();break;case csArray.prototype.indexOf.call(Tu,i.name)>=0:this.km(i),this.xa();break;case csArray.prototype.indexOf.call(Ci,i.name)>=0:this.ft.addUrlMaskingPattern(i.params[0]);break;case csArray.prototype.indexOf.call(zn,i.name)>=0:this.ft.addPartialUrlMaskingPattern(i.params[0]);break;case csArray.prototype.indexOf.call(Mo,i.name)>=0:this.ft.resetPartialUrlMaskingPatterns();break;case csArray.prototype.indexOf.call(Hn,i.name)>=0:this.H0(i);break;default:L.warn(`WebviewBridgeEventEmitter received an unknown command: ${csJSON.stringify(i)}`);break}}V0(t){if(t.params.length!==1)return;let e=t.params[0];if(!(!te(e)||!("key"in e)||!("value"in e))&&wi.isKeyValid(e.key)&&wi.isValueValid(e.value)){let i=this.Mm.anonymizePII(e.key),r=Le(e.value)?e.value:this.Mm.anonymizePII(e.value);_t.sendDynamicVariable(i,r)}}j0(t){if(t.params.length!==1)return;let e=t.params[0];if(T(e)){let i={type:ye.PAGE_VIEW,version:1,data:{url:e}};this.R.overridePath(e),this.S.emitArtificialPageViewEnd(),_t.sendAnalysisEvent(i),this.S.emitAfterArtificialPageView()}}km(t){if(t.params.length!==1)return;let[e]=t.params;e.value&&(e.revenue=e.value),this.ss.addTransaction(e)}xa(){let t=this.ss.getTransaction();Hr.isValid(t)&&(_t.sendTransaction(t.id?t.id:null,t.revenue,t.currency?t.currency:""),this.ss.clear())}H0(t){if(t.params.length<1)return;let e=t.params[0],i=t.params[1]||{};if(!(T(e)&&te(i)))return;let r=XE.buildCustomErrorEvent(e,i),o=this.za.transformEvent(P.CustomError,r);o&&(this.Iu&&_t.sendNativeSREvent({...o,type:ye.CUSTOM_ERROR_SR}),_t.sendAnalysisEvent({...o,type:ye.CUSTOM_ERROR_AN}))}}return s})();var Hw="REMOTE_ASSET",Rc="LOCAL_ASSET",Bw="UNKNOWN_ASSET_TYPE",Jr="NONE",Ou="ONLY_LOCAL_ASSETS",Qr="ALL",Fw=(()=>{class s{constructor(t){var e,i;this.B0=t,this.Pu=new Set,this.$a=Jr;try{let r=(i=(e=window.CSJavascriptBridge)===null||e===void 0?void 0:e.getAssetTransformerMode)===null||i===void 0?void 0:i.call(e);(r===Ou||r===Qr)&&(this.$a=r)}catch{}}setAssetProcessingMode(t){this.$a=t}async getTransformedAssets(t,e){if(this.$a===Jr)return t;let i=[];for(let r of t){let o=r.assetId,c=this.F0(o);if(this.$a===Qr||c===Rc){let l=o;if(this.z0(o,e)&&(l=this.$0(o,e)),this.Pu.has(l)){csArray.prototype.push.call(i,r);continue}try{let h=await this.B0.getAssetContent(o);if(this.Pu.has(l)){csArray.prototype.push.call(i,r);continue}csArray.prototype.push.call(i,{...r,retrievedAssetContent:h}),this.Pu.add(r.assetId)}catch(h){L.error(`an error occurred while getting data for asset: ${l}: ${h}`),csArray.prototype.push.call(i,r)}}else csArray.prototype.push.call(i,r)}return i}F0(t){let e=window.WEBVIEW_SERVER_URL||null;try{let{protocol:i}=new csURL(t);return i==="file:"||e&&csString.prototype.startsWith.call(t,e)?Rc:Hw}catch(i){L.error(`Error constructing URL (${t}"): ${i.message}`)}return Bw}z0(t,e){return e&&Sn(t)||!1}$0(t,e){return`${t}#${e}`}}return s})(),zw=(()=>{class s{constructor(){this.G0=50*1024*1024,this.q0=30*1024*1024,this.Ou=0,this.Nu=!1,this.Ga=new Map,this.Ct=[]}async getAssetContent(t){let e=this.Ga.get(t);return e||new Promise((i,r)=>{csArray.prototype.push.call(this.Ct,{assetUrl:t,successCallback:i,errorCallback:r}),this.Nu||this.W0()})}async W0(){for(this.Nu=!0;this.Ct.length>0;){let{assetUrl:t,successCallback:e,errorCallback:i}=csArray.prototype.shift.call(this.Ct),r=this.Ga.get(t);if(r){e(r);continue}try{let c=(await this.Y0("GET",t,"blob")).target;if(c.status===200){let l=c.getResponseHeader("Content-Type"),h=Number(c.getResponseHeader("Content-Length"));if(h&&Number(h)>this.q0){let u=`asset is too big, size = ${h} bytes`;i(u);continue}let p=new csFileReader;p.onload=()=>{let m={data:csString.prototype.split.call(p.result,"base64,")[1],mimeType:l!=null?l:""};this.Ou+=h,this.Ou>this.G0&&(this.Ou=0,this.Ga.clear()),this.Ga.set(t,m),e(m)},p.onerror=()=>{i("Error converting XHR response to base64")},p.readAsDataURL(c.response)}else i(`error downloading ${t}: ${c.statusText}`)}catch(o){let c=`Error downloading resource ${t}: ${o.message}`;i(c)}}this.Nu=!1}Y0(t,e,i){return new Promise(function(r,o){let c=new XMLHttpRequest;c.open(t,e),c.responseType=i,c.onload=r,c.onerror=o,c.send()})}}return s})();function $w(s,n){let t=bl({...n,async:!1}),e;return t(s,i=>e=i),e}var Gw=(()=>{class s{constructor(t,e){this.C=t,this.Au=e,this.Dm=new Cl}X0(){let t=new Set;qt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{t.has(i)||(this.Dm.scanElement(i),t.add(i))})}handleCommand(t){let e=t&&t.withAssets,i=[],r=new Set,o=new Set,c=[];e&&Kr.isWebViewLocalAssetsSupported()?(this.Dm.onScannedAsset(({type:p,asset:u})=>{p==="stylesheet"&&!o.has(u.assetId)&&(o.add(u.assetId),csArray.prototype.push.call(c,u)),r.has(u.assetId)||(r.add(u.assetId),csArray.prototype.push.call(i,u))}),this.X0()):Kr.isWebViewLocalAssetsSupported()||L.warn("Local asset is not supported on this browser");let l=qw(),h=csJSON.stringify(l);if(e){let p=Lh.generate();return this.K0(i,c,p),csJSON.stringify({serializedDom:h,serializationId:p})}return h}K0(t,e,i){e.length===0?this.oo(t,i):this.J0(t,e,i,(r,o)=>this.oo(r,o))}J0(t,e,i,r){let o=0,c=0,l=new Set(csArray.prototype.map.call(t,y=>y.assetId)),h=y=>!l.has(y),p=y=>{l.has(y.assetId)||(l.add(y.assetId),csArray.prototype.push.call(e,y),csArray.prototype.push.call(t,y))},u=y=>{for(let S of y)l.has(S.assetId)||(l.add(S.assetId),csArray.prototype.push.call(t,S));o++,o+c===e.length&&r(t,i)},m=y=>{c++,L.error("An error occurred while fetching a styleSheet: "+y),o+c===e.length&&r(t,i)};csArray.prototype.forEach.call(e,y=>{this.Au.getStyleSheetAssets(y.assetId,u,m,h,p)})}oo(t,e){this.C.sendToParent(P.Assets,{assets:t,serializationId:e})}}return s})();function qw(){return nS(),sS($w(document))}var Ww=(()=>{class s{constructor(t){this.f=t,this.Mu=null}isSdkTrackingContext(t){return yt(t)&&te(t)&&T(t.sessionKey)&&Le(t.pageNumber)&&T(t.pageViewType)&&Tr(t.isRecording)}update(t){if(!this.isSdkTrackingContext(t)){L.warn(`webViewTrackingContext.service received wrong sdkTrackingContext, content:${csJSON.stringify(t)}`),this.Mu=null;return}this.Mu={...t,recordingConsentState:gi.NOT_NEEDED,projectId:this.f.projectId,uxaDomain:this.f.uxaDomain,...this.f.smbConfig}}getTrackingContext(){return this.Mu}}return s})(),Yw=(()=>{class s{constructor(t){this.ai=t,this.re=[]}handleCommand(t){if(!Yt(t))return;this.Sr(t);let e=this.ai.getTrackingContext();e!==null&&this.Ut(t,e)}executeRegisteredCallbacks(t){let e=t.trackingContext;e&&csArray.prototype.map.call(this.re,i=>this.Ut(i,e))}Sr(t){csArray.prototype.push.call(this.re,t)}Ut(t,e){csSetTimeout(()=>{t(e)})}}return s})(),Xw=(()=>{class s{constructor(t,e){this.J=t,this.ai=e}onIframeIntegrationCallback(t){let e=this.ai.getTrackingContext();e!==null&&(t.trackingContext=e,this.J.sendToChildren(P.IntegrationCallback,t))}}return s})(),Nu=(()=>{class s{constructor(t){this.commandsService=t,this._r=new ih}registerChildCommands(){this.commandsService.register(rh,t=>this._r.handleCommand(t,this.Vn))}onParentRecordingContextChange(t){this.Vn={isRecording:t.isRecording,recordingStartTimestamp:t.recordingStartTimestamp||0,etrState:t.etrState||Gt.ETR_OFF},this._r.executeCallbacks(this.Vn)}}return B([Cs({wait:0,mode:"trailing"})],s.prototype,"onParentRecordingContextChange",null),s})(),Kw=["serializeWebView","webview:serializeWebView"],Jw=["setAssetTransformerMode","webview:setAssetTransformerMode"],Qw=["webview:onAfterScreenView"],Zw=(()=>{class s extends Nu{constructor(t,e,i,r,o,c,l){super(t),this.commandsService=t,this.C=e,this.J=i,this.Un=r,this.Q0=o,this.ht=c,this.f=l}init(){this.ai=new Ww(this.f),this.Z0=new Xw(this.J,this.ai),this.ht.addListener(this.Z0),this.Lm=new Yw(this.ai);let t=new Iu(new Pu);this.tC=new Gw(this.C,t),this.gt()}onAfterPageViewCallback(t){this.Lm.executeRegisteredCallbacks(t)}gt(){super.registerChildCommands(),this.commandsService.register(Ln,t=>{this.Lm.handleCommand(t)}),this.commandsService.register(Qw,t=>{this.ai.update(t);let e=this.ai.getTrackingContext();e!==null&&this.Q0.emitAfterPageViewCallback({initiator:Gs.AfterPageView,trackingContext:e})}),this.commandsService.register(Kw,t=>this.tC.handleCommand(t)),this.commandsService.register(Jw,t=>{(t===Jr||t===Ou||t===Qr)&&this.Un.setAssetProcessingMode(t)})}}return s})(),tb=(()=>{class s{constructor(t){this.C=t,this.re={}}handleCommand(t){Yt(t)&&this.Sr(t)}executeRegisteredCallbacks(t){let e=t.trackingContext;if(e)if(t.callbackId){let i=this.re[t.callbackId];i&&this.Ut(i,e)}else for(let i in this.re)this.Ut(this.re[i],e)}Sr(t){let e=Ae.integer(),i={callbackId:e,initiator:Gs.AfterPageView};this.re[e]=t,this.C.sendToParent(P.IntegrationCallback,i)}Ut(t,e){csSetTimeout(()=>{t(e)})}}return s})(),eb=(()=>{class s{constructor(t){this.C=t,this.Ri={}}handleCommand(t){te(t)&&Yt(t.callback)&&this.vr(t.callback)}executePendingCallbacks(t){let{trackingContext:e,callbackId:i}=t;if(!i||!e)return;let r=this.Ri[i];r&&(delete this.Ri[i],this.Ut(r,e.sessionKey))}vr(t){let e=Ae.integer(),i={callbackId:e,initiator:Gs.GetSessionKey};this.Ri[e]=t,this.C.sendToParent(P.IntegrationCallback,i)}Ut(t,e){csSetTimeout(()=>{t(e)})}}return s})(),sb=(()=>{class s{constructor(t,e){this.C=t,this.J=e,this.qa={}}handleCommand(t,e){te(t)&&Yt(e)&&this.vr(t,e)}executePendingCommand(t){let{trackingContext:e,callbackId:i}=t;if(!(!i||!e))if(this.qa[i]){let[r,o]=this.qa[i];r&&(delete this.qa[i],this.Ut(e,r,o))}else this.J.sendToChildren(P.TrackingContextResultMessage,t)}vr(t,e){let i=Ae.integer();this.qa[i]=[t,e],this.C.sendToParent(P.TrackingContextRequestMessage,{callbackId:i})}Ut(t,e,i){csSetTimeout(()=>{let r=sh(t,e);i(r)})}}return s})(),ib=(()=>{class s extends Nu{constructor(t,e,i){super(t),this.commandsService=t,this.C=e,this.J=i}init(){this.xm=new tb(this.C),this.Um=new eb(this.C),this.Vm=new sb(this.C,this.J),this.gt()}onAfterPageViewCallback(t){this.xm.executeRegisteredCallbacks(t)}onIntegrationSessionKeyCallback(t){this.Um.executePendingCallbacks(t)}onTrackingContextResultCallback(t){this.Vm.executePendingCommand(t)}gt(){super.registerChildCommands(),this.commandsService.register(Ln,t=>{this.xm.handleCommand(t)}),this.commandsService.register(nh,t=>this.Um.handleCommand(t)),this.commandsService.register(oh,(t,e)=>{this.Vm.handleCommand(t,e)})}}return s})(),nb=(()=>{class s{constructor(t,e,i,r,o,c,l){this.E=t,this.vt=e,this.$t=i,this.Dt=r,this.nt=o,this.ao=c,this.On=l}init(){var t,e;this.ao&&this.nt&&((t=this.ao)===null||t===void 0||t.addSelector((e=this.nt)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.gt(),this.ve=new No(this.$t,this.vt,this.Dt,this.ao,this.On)}eC(){this.ve.start()}Bc(){this.ve.stop()}onParentSensitiveStatusChange(t){var e,i;t.maskedElementSettings&&this.vt.setMaskedElementSettingsFromParent(t.maskedElementSettings),t.capturedElementSelector&&this.Dt.setWhitelistedElementsSelector(t.capturedElementSelector,!1),t.encryptionSelectors&&((e=this.ao)===null||e===void 0||e.addSelector(t.encryptionSelectors),(i=this.nt)===null||i===void 0||i.setEncryptionSelectors(t.encryptionSelectors,!1)),t.started?this.eC():this.Bc()}gt(){this.E.register(Fn,t=>{this.Dt.setWhitelistedElementsSelector(t)}),this.E.register(xi,t=>{this.vt.setMaskedElementSettingsFromCommand(t)}),this.E.register(Oo,t=>{var e,i;(e=this.nt)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.ao)===null||i===void 0||i.addSelector(t)})}}return s})(),rb=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.S=t,this.E=e,this.vt=i,this.$t=r,this.lt=o,this.Dt=c,this.Xt=l,this.On=h,this.ve=new No(this.$t,this.vt,this.Dt,void 0,this.On,this.lt)}init(){this.lt.init(),this.gt()}onStartAnalytics(){this.kn()}onAfterArtificialPageView(){this.jm(),this.kn()}onStopAnalytics(){this.jm()}kn(){this.ve.start(),this.Xt.setSensitiveStatus({started:!0,useAnonymization:this.lt.shouldUseAnonymization()}),this.S.emitSensitiveStatusChange()}jm(){this.ve.stop(),this.Xt.setSensitiveStatus({started:!1,useAnonymization:this.lt.shouldUseAnonymization()}),this.S.emitSensitiveStatusChange()}gt(){this.E.register(Fn,t=>{this.Dt.setWhitelistedElementsSelector(t),this.S.emitSensitiveStatusChange()}),this.E.register(xi,t=>{this.vt.setMaskedElementSettingsFromCommand(t),this.S.emitSensitiveStatusChange()})}}return s})(),ob=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p){this.yt=t,this.S=e,this.f=i,this.C=r,this.Is=o,this.E=c,this.Et=l,this.I=h,this.Xt=p,this.ka=()=>{this.E.start(),this.Mn.start()}}start(){let t,e,i,r,o,c,l,h,p,u,m,y,S,C,M,b;this.I.schedule(()=>{if(o=new bu,c=new zh(()=>{}),S=new $h,b=new Gh,this.Et.isInIframeContext()){let v=new nb(this.E,o,c,S,C,M,b);v.init(),this.yt.addListener(v)}if(i=new Rs,u=new au(i),m=new ru(window.location,u),this.Et.isInWebViewContext()){let v=new Cu(this.f),k=new Bn,I=new Po(v,this.f,m,k),R=new rb(this.S,this.E,o,c,I,S,this.Xt);R.init(),this.yt.addListener(R),this.S.addListener(R)}}),this.I.schedule(()=>{t=new cu(we,this.f),e=new bh(t),r=new bw(this.f,t,e,this.C,this.Et,this.yt,this.E,new Dh(L),this.Xt),this.yt.addListener(r)}),Ys.isRecordingSupported()&&this.I.schedule(()=>{let v=new Dw(this.f,i,c,this.S,this.C,this.Is,this.E,this.yt,this.Et,m,this.Xt,u,C);this.S.addListener(v),this.yt.addListener(v),v.init()}),this.I.schedule(()=>{p=new Oh(this.f);let v=new lu(t),k=new hu(t),I=new uu(t),R=new du;h=new ou(v,k,I,R),l=new Sw(p,h,this.C,this.Is,this.Xt)}),this.I.schedule(()=>{h.addListener(l),this.yt.addListener(l),this.S.addListener(l),this.S.addListener(r)}),this.I.schedule(()=>{let v;if(this.Et.isInWebViewContext()){let k=new zw;this.Un=new Fw(k),v=new Zw(this.E,this.C,p,this.Un,this.yt,h,this.f)}else v=new ib(this.E,this.C,p);this.yt.addListener(v),v.init()}),this.I.schedule(()=>{l.init(),r.init()}),this.I.schedule(()=>{var v,k,I,R;if(this.Et.isInWebViewContext()){let F=new xw,G=new kh(i,m),rt=new Co,At=new Mh(rt,u,!!(!((k=(v=this.f)===null||v===void 0?void 0:v.experimental)===null||k===void 0)&&k.anonymizeNameInUrls)),vt=new SS(i,!((R=(I=this.f)===null||I===void 0?void 0:I.experimental)===null||R===void 0)&&R.anonymizeNameInUrls?u:void 0),_=new Uw(m,G,At,vt),x=new jw(i,new ch(i,null,null),F,_,this.Un,this.S,m,rt),j=new Lw(this.C,x);j.init(),this.S.addListener(j),this.yt.addListener(j)}else{let F=new Ew(this.C);this.S.addListener(F)}}),this.Mn=new Ah,this.I.schedule(()=>{this.Mn.onLoad(()=>{this.S.emitStartTracking()}),this.ka()})}}return s})(),ab=2500,cb=500,lb=(()=>{class s extends Ru{constructor(t,e,i=cb){super(ab),this.yt=t,this.f=e,this.sC=i,this.Vi=!1,this.Wa=void 0,this.ku=!0}onStart(){this.iC()}onStop(){this.buffer.reset(),this.Du&&window.csClearInterval(this.Du)}sendToParent(t,e){var i;if(this.nC()){(i=this.Lu)===null||i===void 0||i.call(this,t,e);return}if(this.rC(t)){let r=this.buildChildBaseMessage(t,e);this.buffer.addMessage(r)}}nC(){return this.Vi&&this.ku}rC(t){return!this.Vi||t===P.Commands}onWebViewEvent(t){this.Lu=t}setAnalyticsStatus(t){this.ku=t,this.ku&&this.oC()}sendAllMessagesFromBuffer(){var t;let e=this.buffer.getMessages();for(let i of e)(t=this.Lu)===null||t===void 0||t.call(this,i.type,i.content);this.buffer.reset()}oC(){var t;if(!this.Vi)return;let e=this.buffer.getMessages();for(let i of e)i.type===P.Commands&&((t=this.Lu)===null||t===void 0||t.call(this,i.type,i.content));this.buffer.reset()}buildChildBaseMessage(t,e){return{type:t,content:e}}iC(){this.Vi=_t.isCSJavascriptBridgeDefined(),this.Vi?this.Hm():this.Du=window.csSetInterval(()=>{this.Vi=_t.isCSJavascriptBridgeDefined(),this.Vi&&(this.Hm(),window.csClearInterval(this.Du))},this.sC)}Hm(){this.aC(),this.Wa=_t.getBridgeVersion(),this.Wa===null?this.sendAllMessagesFromBuffer():this.Wa>=Vw?(this.cC(),_t.notifyIsReadyForTracking()):L.warn(`bridge version ${this.Wa} is not supported`)}aC(){let t={message:csJSON.stringify(this.f),errorCode:"TAG_CONFIGURATION",level:ct.critical};_t.sendLog(t)}cC(){this.yt.emitStopAnalytics()}}return s})(),hb=(()=>{class s{constructor(){this.Vn=null}getRecordingContext(){return this.Vn===null?{isRecording:!1}:this.Vn}setRecordingContext(t){this.Vn=t}}return s})(),ub=(()=>{class s extends Et{constructor(t,e){super(),this.pt=t,this.C=e}onStart(){this.pt.subscribe(s.xt,t=>this.X(t))}onStop(){this.pt.unsubscribe(s.xt)}X(t){this.isStarted&&this.C.sendToParent(P.ApiError,t)}}return s.xt="ChildApiErrorsService",s})(),db=(()=>{class s extends Et{constructor(t,e){super(),this.pt=t,this.C=e}onStart(){this.pt.subscribe(s.xt,t=>this.X(t),{detailedEvent:!0})}onStop(){this.pt.unsubscribe(s.xt)}X(t){this.isStarted&&this.C.sendToParent(P.DetailedApiError,t)}}return s.xt="ChildDetailedApiErrorsService",s})(),pb=(()=>{class s{constructor(t,e,i){this.f=t,this.C=e,this.Y=i}init(){var t;let e=new Rs,i;!((t=this.f.apiErrors.collectionRules)===null||t===void 0)&&t.length?i=new Bh(this.f.apiErrors,e):i=new Fh(this.f.apiErrors,e),this.pt=new Nh(new Uh,new Vh,i),this.Ya=new ub(this.pt,this.C),this.xu=new db(this.pt,this.C),this.pt.init(),this.gt()}gt(){this.Y.register(Ci)}onStartTracking(){this.Ya.start()}onParentRecordingContextChange(t){t.isRecording?this.xu.start():this.xu.stop()}onOptout(){this.Ya.stop(),this.xu.stop()}onStartAnalytics(){this.Ya.start()}onStopAnalytics(){this.Ya.stop()}}return s})(),fb=(()=>{class s extends Et{constructor(t,e){super(),this.As=t,this.C=e}onStart(){this.As.subscribe(s.xt,t=>this.X(t))}onStop(){this.As.unsubscribe(s.xt)}X(t){this.isStarted&&this.C.sendToParent(P.JavascriptError,t)}}return s.xt="ChildJavaScriptErrorsService",s})(),gb=(()=>{class s{constructor(t,e,i){this.f=t,this.C=e,this.Y=i}init(){let t=new Ph;this.Xa=new fb(t,this.C),this.gt()}onStartTracking(){this.Xa.start()}onOptout(){this.Xa.stop()}onStartAnalytics(){this.Xa.start()}onStopAnalytics(){this.Xa.stop()}gt(){this.f.jsCustomErrorsEnabled&&!this.f.customErrors.enabled&&this.Y.register(Hn)}}return s})();var mb=(()=>{class s{constructor(){this.Ka={started:!1,useAnonymization:!0}}getSensitiveStatus(){return this.Ka}setSensitiveStatus(t){this.Ka=t}getElementSensitiveStatus(t){return this.Ka.started?U.isMaskedElement(t)||U.isMaskedElementChild(t)?Ht.MASKED:Ll.shouldEncrypt(t)?Ht.ENCRYPTED:ke.isEditableNode(t)?Ht.ANONYMIZED:this.Ka.useAnonymization?Se.isWhitelistedElement(t)?Ht.CAPTURED:Ht.ANONYMIZED:Ht.CAPTURED:Ht.ANONYMIZED}}return s})(),yb=(()=>{class s{constructor(t,e,i){this.f=t,this.Et=e,this.I=i}init(){bs.isSupported()&&bs.setDigestSalt(this.f.projectId.toString());let t,e,i,r,o,c,l,h,p;this.I.schedule(()=>{t=new Au(this.I),e=new uw,i=new hb,r=new mb;let u=[qr.UXA];this.Et.isInWebViewContext()?(window.cs_wvt=window.cs_wvt||[],csArray.prototype.push.call(u,qr.WVT),o=new lb(e,this.f)):o=new yw(this.f,t,i,r,e),c=new su(u)}),this.I.schedule(()=>{l=new pw(c,o),h=new dw(l)}),this.I.schedule(()=>{h.init()}),this.I.schedule(()=>{this.f.implementations&&(p=new _u(this.f.implementations,c,this.I),p.init(),t.addListener(p))}),this.I.schedule(()=>{if(this.f.apiErrors.enabled){let u=new pb(this.f,o,l);u.init(),t.addListener(u),e.addListener(u)}if(this.f.jsErrorsEnabled){let u=new gb(this.f,o,l);u.init(),t.addListener(u),e.addListener(u)}}),this.I.schedule(()=>{t.addListener(h)}),this.I.schedule(()=>{t.emitInitTracking()}),this.I.schedule(()=>{new ob(e,t,this.f,o,i,c,this.Et,this.I,r).start()})}}return s})(),Eb=(()=>{class s{constructor(t,e,i){this.f=t,this.Et=e,this.ds=i}start(){var t,e,i,r,o;if(window.UXAnalytics)return;window.UXAnalytics={};let c=new Pl(!!(!((t=this.f.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.f.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.f.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),l=new Vf(this.Et,this.f);l.init();let h=new Hf(this.f,l);if(this.Et.isTopWindowTracker()&&h.canTrack()){if(!((r=window.CSProtectnativeFunctionsLogs)===null||r===void 0)&&r.Warning&&L.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){L.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}xf();let u=new Au(c),m=new iw(this.f,l,this.ds,c,u);this.f.isQuotaEnabled()?m.initWithQuota():m.init()}else!this.Et.isTopWindowTracker()&&h.canTrackInChild()&&new yb(this.f,this.Et,c).init();let p=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(u){return U.isMaskedElement(u)||U.isMaskedElementChild(u)},isAttributeSensitive(u,m){return U.isMaskedAttribute(u,m)},getSensitiveAttributes(u){return Ai(u.attributes,m=>U.isMaskedAttribute(u,m.name))}},Console:{warn(u){p&&console.warn("cs.tracking.warning",u)},error(u){p&&console.error("cs.tracking.error",u)}},Version:$c},window.CSFrameCommunication||(window.CSFrameCommunication=sn,sn.isActivable()&&sn.waitForConnection(),this.f.isCsCrosswritingHeap()&&sn.waitForHeapVisualLabeler(this.f.getHeapWebAppUri()))}}return B([Mt("main.start"),O("main.start")],s.prototype,"start",null),s})(),Sb=(()=>{class s{constructor(){}send(t,e,i=ct.warn){let r={message:t,errorCode:e,level:i};_t.sendLog(r)}}return s})();var vb=(()=>{class s{constructor(t,e,i){this.B=t,this.N=e,this.fC=i,this.Ct=[],this.Me=null,this.gC=lo().v}Fm(){this.Ct.length!==0&&(this.B.send({m:csArray.prototype.map.call(this.Ct,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.N.anonymizePII(window.location.pathname),pid:this.fC,v:this.gC}),this.Ct=[])}push(t){if(csArray.prototype.push.call(this.Ct,...t),this.Me&&(csClearTimeout(this.Me),this.Me=null),this.Ct.length>=s.MAX_QUEUE_SIZE){this.Fm();return}this.Me=window.csSetTimeout(()=>{this.Fm(),this.Me=null},s.DEBOUNCE_INTERVAL)}}return s.DEBOUNCE_INTERVAL=5e3,s.MAX_QUEUE_SIZE=100,s})();function _b(s,n){let t=s.validationRate/10,e=Ae.boolean(t);if((s.environment==="staging"||!1||e)&&!n.isInWebViewContext())try{let o=qh.create(L.warn,n.isTopWindowTracker()),l=new tl(o).create(s.getMetricsUri(),!0),h=new Rs,p=new vb(l,h,s.projectId);et.setService(p)}catch(o){L.warn(`Error initializing metrics: ${o.message}`)}}function wb(){var s;let n=new cf(window.CS_CONF);window._uxa=window._uxa||[],n.processOptionOverrides(window._uxa);let t=new lf(window,n);t.init();let e=new Mf;if($p(L),L.computeIsActive(n.validationRate),t.isTopWindowTracker()){let o=new If(n,e);L.setStrategy(o)}else if(t.isInIframeContext()){let r=new Nf(n);L.setStrategy(r)}else if(t.isInWebViewContext()){let r=new Sb;L.setStrategy(r)}!((s=n==null?void 0:n.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=cs(window,"MutationObserver")),qp(),_b(n,t),new Eb(n,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{kf(wb)}catch{}});})();


// signature-377d4d9979ecba29888203f01ee403c66bb0c81407b1c655f48a9ce3f01b11b6