"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["41928"],{203744:function(e,t,r){var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AdobeIdData=void 0;var a=r(692224),s=r(580793),c=r(352334),u=r(554113),l=r(67293);t.AdobeIdData=function(e){function t(t){void 0===t&&(t=null);var r=e.call(this,t)||this;r.onAccessTokenHasExpired=null,r.onAccessToken=null,r.onReauthAccessToken=null,r.onError=null,r.onSignOutEventReceived=null,r.handlers={triggerOnAccessToken:function(e){r.onAccessToken&&r.onAccessToken(e)},triggerOnReauthAccessToken:function(e){r.onReauthAccessToken&&r.onReauthAccessToken(e)},triggerOnAccessTokenHasExpired:function(){r.onAccessTokenHasExpired&&r.onAccessTokenHasExpired()},triggerOnReady:function(e){void 0===e&&(e=null),r.onReady&&r.onReady(e)},triggerOnError:function(e,t){r.onError&&r.onError(e,t)}};var o=t||window[a.AdobeIdKey];if(!o||!o.client_id)throw Error("Please provide required adobeId, client_id information");var n=o.standalone,i=o.autoValidateToken,u=o.modalSettings,l=o.modalMode,d=o.onAccessToken,f=o.onReauthAccessToken,p=o.onAccessTokenHasExpired,h=o.onSignOutEventReceived,v=o.onReady,g=o.onError,y=o.overrideErrorHandler,m=o.onModalModeSignInComplete,_=o.alwaysRemoveTokenFromUrl,k=o.enableGuestAccounts,b=o.enableGuestTokenForceRefresh,S=o.enableGuestBotDetection;return n&&n.token&&(r.standalone=new c.StandaloneToken(n)),r.modalSettings=new s.PopupSettings(void 0===u?{}:u),r.modalMode=void 0!==l&&l,r.autoValidateToken=!!i,r.onAccessToken=d||null,r.onReauthAccessToken=f||null,r.onAccessTokenHasExpired=p||null,r.onReady=v||null,r.onError=g||null,r.overrideErrorHandler=y,r.onModalModeSignInComplete=m,r.alwaysRemoveTokenFromUrl=_,r.enableGuestAccounts=!!k,r.enableGuestTokenForceRefresh=!!b,r.enableGuestBotDetection=!!S,r.onSignOutEventReceived=h,r}return n(t,e),t.prototype.createSocialProviderRedirectRequest=function(e,t,r,o,n){void 0===n&&(n=l.IGrantTypes.token);var a=i(i({},t),{idp_flow:"social.deep_link.web",provider_id:e});return this.createRedirectRequest(a,r,o,n)},t.prototype.createReAuthenticateRedirectRequest=function(e,t,r,o,n){void 0===o&&(o=u.IReauth.check),void 0===n&&(n=l.IGrantTypes.token);var a={reauth:o},s=i(i({},e),a);return this.createRedirectRequest(s,t,r,n)},t.prototype.createSignUpRedirectRequest=function(e,t,r,o){void 0===o&&(o=l.IGrantTypes.token);var n=i(i({},e),{idp_flow:"create_account"});return this.createRedirectRequest(n,t,r,o)},t}(r(874587).AdobeIdThinData)},874587:function(e,t,r){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AdobeIdThinData=void 0;var i=r(692224),a=r(253204),s=n(r(540493)),c=r(154554),u=n(r(657303)),l=r(554113),d=r(67293),f=r(813565);t.AdobeIdThinData=function(){function e(e){void 0===e&&(e=null),this.analyticsParameters=new c.AnalyticsParameters,this.api_parameters={},this.locale="",this.scope="AdobeID",this.client_id="",this.environment=a.IEnvironment.PROD,this.useLocalStorage=!1,this.alwaysRemoveTokenFromUrl=!1,this.onReady=null,this.onModalModeSignInComplete=null,this.proxiedCheckToken=!1;var t=e||window[i.AdobeIdKey];if(!t||!t.client_id)throw Error("Please provide required adobeId, client_id information");var r=t.api_parameters,o=t.client_id,n=t.locale,l=t.scope,d=t.ijt,f=t.environment,p=void 0===f?a.IEnvironment.PROD:f,h=t.redirect_uri,v=t.useLocalStorage,g=t.logsEnabled,y=t.onReady,m=t.rideRedirectUri,_=t.proxiedCheckToken;this.environment=p,this.api_parameters=r||{},this.client_id=o,this.locale=n||i.DEFAULT_LANGUAGE,this.scope=l?l.replace(/\s/gi,""):"",this.redirect_uri=h,this.ijt=d,this.useLocalStorage=v,g?u.default.enableLogging():u.default.disableLogging(),this.onReady=y||null,this.rideRedirectUri=m,this.proxiedCheckToken=_,this.fillAnalyticsParameters(t),s.default.loadEnvironment(p,_,window.location.hostname)}return e.prototype.fillAnalyticsParameters=function(e){var t=e.analytics,r=void 0===t?{}:t,o=r.appCode,n=r.appVersion,i=this.analyticsParameters;i.appCode=void 0===o?"":o,i.appVersion=void 0===n?"":n},e.prototype.createSocialProviderRedirectRequest=function(e,t,r,n,i){var a=o(o({},t),{idp_flow:"social.deep_link.web",provider_id:e});return this.createRedirectRequest(a,r,n,i)},e.prototype.createReAuthenticateRedirectRequest=function(e,t,r,n,i){void 0===n&&(n=l.IReauth.check),void 0===i&&(i=d.IGrantTypes.token);var a={reauth:n},s=o(o({},e),a);return this.createRedirectRequest(s,t,r,i)},e.prototype.createSignUpRedirectRequest=function(e,t,r){var n=o(o({},e),{idp_flow:"create_account"});return this.createRedirectRequest(n,t,r,d.IGrantTypes.token)},e.prototype.createRedirectRequest=function(e,t,r,o){var n=this,i=this.api_parameters,a=this.client_id,s=this.redirect_uri,c={adobeIdRedirectUri:void 0===s?"":s,apiParameters:void 0===i?{}:i,clientId:a,externalParameters:e,scope:this.scope,locale:this.locale,response_type:o,state:this.createRedirectState(t,r)};return o===d.IGrantTypes.token?Promise.resolve(c):new f.CodeChallenge().createCodeChallenge(r).then(function(o){return e.code_challenge=o.challenge,e.code_challenge_method="S256",c.state=n.createRedirectState(t,r),Promise.resolve(c)})},e.prototype.createRedirectState=function(e,t){var r=this.analyticsParameters,o=r.appCode,n=void 0===o?"":o,i=r.appVersion,a=void 0===i?"":i,c=void 0===e?{}:{context:e};return n&&(c.ac=n),a&&(c.av=a),c.jslibver=s.default.jslibver,c.nonce=t,Object.keys(c).length?c:null},e.prototype.triggerOnReady=function(){this.onReady&&this.onReady(void 0)},e.prototype.computeRideRedirectUri=function(e){return this.rideRedirectUri?"string"==typeof this.rideRedirectUri?"DEFAULT"===this.rideRedirectUri?null:this.rideRedirectUri:this.rideRedirectUri(e):window.location.href},e}()},154554:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsParameters=void 0,t.AnalyticsParameters=function(){this.appCode="",this.appVersion=""}},253204:function(e,t){var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.IEnvironment=void 0,(o=r||(t.IEnvironment=r={})).STAGE="stg1",o.PROD="prod"},268131:function(e,t){var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.IErrorType=void 0,(o=r||(t.IErrorType=r={})).INITIALIZE_ERROR="initialize_error",o.HTTP="http",o.FRAGMENT="fragment",o.CSRF="csrf",o.NOT_ALLOWED="not_allowed",o.PROFILE_EXCEPTION="profile_exception",o.TOKEN_EXPIRED="token_expired",o.SOCIAL_PROVIDERS="SOCIAL_PROVIDERS",o.RIDE_EXCEPTION="ride_exception",o.ARKOSE_ERROR="arkose_error"},552850:function(e,t,r){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){var u=[s,c];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(r=1,o&&(n=2&u[0]?o.return:u[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,u[1])).done)return n;switch(o=0,n&&(u=[2&u[0],n.value]),u[0]){case 0:case 1:n=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,o=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3])){i.label=u[1];break}if(6===u[0]&&i.label<n[1]){i.label=n[1],n=u;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(u);break}n[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],o=0}finally{r=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},s=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AdobeIMS=void 0;var u=r(939e3),l=c(r(657303)),d=r(498879),f=r(186186),p=r(554009),h=r(203744),v=r(574116),g=r(554113),y=r(372438),m=r(718036),_=r(201140),k=c(r(834515)),b=c(r(532460)),S=r(268131),I=r(917153),T=r(483217),E=r(949616),w=c(r(973713)),O=r(692224),A=c(r(540493)),P=r(67293),R=r(904121),j=r(813565),x=r(598042),D=r(706610),M=r(997928),C=r(57011);t.AdobeIMS=function(){function e(e,t){void 0===e&&(e=null);var r=this;this.initialized=!1,this.instanceKey=O.AdobeIMSKey,this.onPopupMessage=function(e){if(e&&r.adobeIdData.onModalModeSignInComplete){var t=r.tokenService.getTokenFromFragment(e);if(t instanceof x.TokenFields&&(r.tokenService.addTokenToStorage(t),r.adobeIdData.onModalModeSignInComplete(t)))return Promise.resolve()}return k.default.replaceUrl(e),r.initialize()},this.signIn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r,s([],a(e),!1),void 0,function(e,t,r){var o,n,a,s;return void 0===e&&(e={}),void 0===r&&(r=P.IGrantTypes.token),i(this,function(i){switch(i.label){case 0:return this.checkInitialized(),o=this,n=o.adobeIdData,a=o.csrfService.initialize(),[4,n.createRedirectRequest(e,t,a,r)];case 1:return s=i.sent(),this.signInservice.signIn(s),[2,Promise.resolve()]}})})},this.authorizeToken=function(e,t,o,n){void 0===e&&(e=""),void 0===t&&(t={}),void 0===n&&(n=P.IGrantTypes.token);var i=r.adobeIdData,a=r.csrfService.initialize();return i.createRedirectRequest(t,o,a,n).then(function(t){new d.SignInService().authorizeToken(e,t)})},this.reAuthenticate=function(e,t,o,n){void 0===e&&(e={}),void 0===t&&(t=g.IReauth.check),void 0===n&&(n=P.IGrantTypes.token),r.checkInitialized();var i=r.adobeIdData,a=r.csrfService.initialize();return i.createReAuthenticateRedirectRequest(e,o,a,t,n).then(function(e){r.signInservice.signIn(e)})},this.signInWithSocialProvider=function(e,t,o,n){if(void 0===t&&(t={}),void 0===n&&(n=P.IGrantTypes.token),r.checkInitialized(),!e)throw Error("please provide the provider name");var i=r.adobeIdData,a=r.csrfService.initialize();i.createSocialProviderRedirectRequest(e,t,o,a,n).then(function(e){r.signInservice.signIn(e)})},this.signOut=function(e){void 0===e&&(e={}),r.checkInitialized(),r.tokenService.purge(),r.profileService.removeProfile();var t=r.adobeIdData,o=t.api_parameters,n=t.client_id,i={adobeIdRedirectUri:t.redirect_uri,apiParameters:void 0===o?{}:o,clientId:n,externalParameters:e},a=window.signoutBroadcastChannel;a&&(a.postMessage({clientId:n,instanceId:r.instanceId}),a.close()),new p.SignOutService().signOut(i)},this.getTokenForPBAPolicy=function(e,t,o,n){void 0===e&&(e=""),void 0===t&&(t=1e4),void 0===n&&(n={});var i,a=r.getAccessToken();if(a&&Date.now()+t<a.expire.getTime()&&(!e||(null==(i=a.pbaSatisfiedPolicies)?void 0:i.includes(e))))return Promise.resolve(a);var s=r.adobeIdData,c=r.csrfService.initialize();return n.state=s.createRedirectState(o,c),n.redirect_uri=D.RedirectHelper.createRedirectUrl(s.redirect_uri,s.client_id,n,"check_token",s.scope),e&&(n.pba_policy=e),r.refreshToken(n)},this.refreshToken=function(e,t){if(void 0===e&&(e={}),void 0===t&&(t=!1),!t&&e.userInactiveSince){var o=e.userInactiveSince,n=Date.now()-1e3*o;n>w.default.lastUserInteraction&&(w.default.lastUserInteraction=n)}return r.tokenService.refreshToken(e).then(function(e){return r.onTokenProfileReceived(e)}).catch(function(e){if(l.default.error("refresh token error",e),e instanceof E.HttpErrorResponse)return Promise.reject(e);var t=r.verifyRideErrorExceptionStrict(e);return t||(r.profileService.removeProfile(),r.onTokenExpired(),Promise.reject(e))})},this.switchProfile=function(e,t){return(void 0===t&&(t={}),e)?r.tokenService.switchProfile(e,t).then(function(e){return r.onTokenProfileReceived(e)}).catch(function(e){return r.verifyRideErrorException(e)}):Promise.reject(Error("Please provide the user id for switchProfile"))},this.executeErrorCallback=function(e){if(l.default.info("initialize exception ended",e),!e||e.type!==M.IFragmentExceptionType.LOGOUT){var t=r.adobeIdData.onError;t&&t(S.IErrorType.HTTP,"Initialization error")}},this.triggerOnImsInstance=function(e){var t=document.createEvent("CustomEvent"),o={clientId:r.adobeIdData.client_id,instance:e};t.initCustomEvent(O.ON_IMSLIB_INSTANCE,!1,!1,o),window.dispatchEvent(t)},this.processInitializeException=function(e){return void 0===e&&(e={}),l.default.warn("initialize",e),r.restoreHash(),Promise.reject(e)},this.verifyModalSignInEvent=function(e){return e instanceof R.ModalSignInEvent?r.notifyParentAboutModalSignIn(e):Promise.reject(e)},this.verifyTokenExpiredException=function(e){return e instanceof I.TokenExpiredException?(r.adobeIdData.handlers.triggerOnAccessTokenHasExpired(),Promise.resolve()):Promise.reject(e)},this.verifyRideErrorException=function(e){return n(r,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:if(!(e instanceof T.RideException))return[3,4];if(this.adobeIdData.overrideErrorHandler&&!this.adobeIdData.overrideErrorHandler(e))return[2,Promise.reject(e)];if(!e.isPbaExpiredIdleSessionWorkaround)return[3,2];return[4,this.signIn()];case 1:return t.sent(),[3,4];case 2:if(!e.jump)return[3,4];return[4,k.default.replaceUrlAndWait(e.jump,1e4)];case 3:t.sent(),t.label=4;case 4:return[2,Promise.reject(e)]}})})},this.verifyRideErrorExceptionStrict=function(e){return e instanceof T.RideException?r.verifyRideErrorException(e):null},this.verifyCsrfException=function(e){var t=e.type;return t&&t===S.IErrorType.CSRF&&r.signOut(),Promise.reject(e)},this.processTokenResponse=function(e){var t=r.adobeIdData.handlers,o=e.tokenFields,n=e.profile,i=o.tokenValue,a=o.state,s=o.expire,c=o.sid,u=o.user_id,d=o.other,f=void 0===d?{}:d,p=o.impersonatorId,h=o.isImpersonatedSession,v=o.pbaSatisfiedPolicies,g=o.isGuestToken,y=o.gse;l.default.info("token",i),f.from_ims&&k.default.setHash(f.old_hash||""),r.profileService.removeProfileIfOtherUser(u);var m={token:i,expire:s,sid:c,impersonatorId:p,isImpersonatedSession:h,pbaSatisfiedPolicies:v,isGuestToken:g,gse:y};return o.isReauth()?t.triggerOnReauthAccessToken(m):r.tokenReceived(m),n&&r.profileService.saveProfileToStorage(n),Promise.resolve(a)},this.exchangeIjt=function(e){var t=r.adobeIdData.ijt;return e||t?r.tokenService.exchangeIjt(e||t).then(function(e){return e.profile?r.profileService.saveProfileToStorage(e.profile):r.profileService.removeProfile(),Promise.resolve(e)}):Promise.reject(Error("please set the adobeid.ijt value"))},this.adobeIdData=new h.AdobeIdData(e),t&&(this.instanceKey=t),this.instanceId="imslib-".concat(Math.random().toString(36).substring(2,9));var c=this.adobeIdData,y=c.api_parameters,b=c.client_id,A=c.scope,j=c.useLocalStorage,C=c.autoValidateToken,F=c.modalMode,U=c.modalSettings;this.imsApis=new v.ImsApis(void 0===y?{}:y),this.csrfService=new u.CsrfService(b,this.instanceKey),this.serviceRequest={clientId:b,scope:A,imsApis:this.imsApis},this.tokenService=new _.TokenService(o(o({},this.serviceRequest),{useLocalStorage:j,autoValidateToken:C}),this.csrfService),this.profileService=new m.ProfileService(this.serviceRequest),this.signInservice=F?new f.SignInModalService(this.onPopupMessage,U):new d.SignInService;var N=new BroadcastChannel("imslib-signout");N.addEventListener("message",this.onSignOutEventReceived.bind(this)),window.signoutBroadcastChannel=N}return Object.defineProperty(e.prototype,"version",{get:function(){return A.default.jslibver},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adobeid",{get:function(){return o({},this.adobeIdData)},enumerable:!1,configurable:!0}),e.prototype.enableLogging=function(){l.default.enableLogging()},e.prototype.disableLogging=function(){l.default.disableLogging()},e.prototype.checkInitialized=function(){if(this.initialized)return},e.prototype.signUp=function(e,t){var r=this;void 0===e&&(e={}),this.checkInitialized();var o=this.adobeIdData,n=this.csrfService;if(!o)throw Error("no adobeId on reAuthenticate");var i=n.initialize();return o.createSignUpRedirectRequest(e,t,i).then(function(e){r.signInservice.signIn(e)})},e.prototype.isSignedInUser=function(){var e=this.getAccessToken();return(!e||!e.isGuestToken)&&!!(e||this.getReauthAccessToken())},e.prototype.getProfile=function(){var e=this,t=this.profileService.getProfileFromStorage();if(t)return Promise.resolve(t);var r=this.getAccessToken()||this.getReauthAccessToken();if(!r){var o="please login before getting the profile";return Promise.reject(new y.ProfileException(o))}if(r.isGuestToken){var o="guest account does not have a profile";return Promise.reject(new y.ProfileException(o))}return this.profileService.getProfile(r.token).then(function(e){return Promise.resolve(e)}).catch(function(t){return(l.default.error("get profile exception ",t),t instanceof E.HttpErrorResponse)?e.refreshToken().then(function(e){return Promise.resolve(e.profile)}):Promise.reject(new y.ProfileException(t.message||t))})},e.prototype.avatarUrl=function(e){return this.imsApis.avatarUrl(e)},e.prototype.getReleaseFlags=function(e){return void 0===e&&(e=!1),e?this.tokenService.getDecodedReleaseFlags():this.tokenService.getReleaseFlags()},e.prototype.getAccessToken=function(){return this.getTokenFromStorage(!1)},e.prototype.getReauthAccessToken=function(){return this.getTokenFromStorage(!0)},e.prototype.getTokenFromStorage=function(e){var t=this.tokenService.getTokenFieldsFromStorage(e);return t?{token:t.tokenValue,expire:t.expire,sid:t.sid,impersonatorId:t.impersonatorId,isImpersonatedSession:t.isImpersonatedSession,pbaSatisfiedPolicies:t.pbaSatisfiedPolicies,isGuestToken:t.isGuestToken,gse:t.gse}:null},e.prototype.listSocialProviders=function(){var e=this;return new Promise(function(t,r){var o=e.adobeIdData.client_id;e.imsApis.listSocialProviders({client_id:o}).then(function(e){t(e)}).catch(function(e){r(e)})})},e.prototype.tokenReceived=function(e){this.adobeIdData.handlers.triggerOnAccessToken(e),w.default.startAutoRefreshFlow({expire:e.expire,refreshTokenMethod:this.refreshToken})},e.prototype.onTokenProfileReceived=function(e){var t=e.tokenInfo,r=e.profile;return l.default.info("token",t),this.tokenReceived(t),this.profileService.saveProfileToStorage(r),Promise.resolve(e)},e.prototype.validateToken=function(){var e=this;return this.tokenService.validateToken().then(function(){return Promise.resolve(!0)}).catch(function(t){return l.default.warn("validate token exception",t),t instanceof E.HttpErrorResponse||e.profileService.removeProfile(),Promise.reject(!1)})},e.prototype.onTokenExpired=function(){var e=this.adobeIdData.handlers;this.tokenService.purge(),e.triggerOnAccessTokenHasExpired()},e.prototype.setStandAloneToken=function(e){return this.tokenService.setStandAloneToken(e)},e.prototype.initialize=function(){var e,t=this,r=this.adobeIdData,o=r.handlers,n=r.standalone,i=r.ijt,a=r.alwaysRemoveTokenFromUrl,s=r.enableGuestAccounts,c=r.enableGuestTokenForceRefresh,u=r.enableGuestBotDetection,d=null;switch(n&&this.setStandAloneToken(n),!0){case!!i:e=this.exchangeIjt;break;case s:e=this.tokenService.getGuestToken.bind(this.tokenService,{},{enableGuestAccounts:s,enableGuestTokenForceRefresh:c,enableGuestBotDetection:u});break;default:e=this.tokenService.getTokenAndProfile}return e().then(this.processTokenResponse,this.processError.apply(this)).then(function(e){d=e}).finally(function(){l.default.info("onReady initialization"),window.addEventListener(O.ASK_FOR_IMSLIB_INSTANCE_DOM_EVENT_NAME,function(){t.triggerOnImsInstance(t)},!1),a&&k.default.setHash(b.default.removeAccessToken()),o.triggerOnReady(d?d.context:null),t.triggerOnImsInstance(t),t.initialized=!0})},e.prototype.processError=function(){var e=this;return function(t){return e.verifyModalSignInEvent(t).catch(e.processInitializeException).catch(e.verifyTokenExpiredException).catch(e.verifyRideErrorException).catch(e.verifyCsrfException).catch(e.executeErrorCallback)}},e.prototype.notifyParentAboutModalSignIn=function(e){var t=window.location.href.replace("imslibmodal","wasmodal");if(window.opener)window.opener.postMessage(t,window.location.origin),window.close();else{var r=new BroadcastChannel("imslib");r.postMessage(t),r.close(),window.close()}return Promise.reject("popup")},e.prototype.restoreHash=function(){var e=b.default.fragmentToObject();e&&e.from_ims&&k.default.setHash(e.old_hash||"")},e.prototype.getTransitoryAuthorizationCode=function(e,t){return void 0===t&&(t={}),(e=e||{}).response_type=e.response_type||"code",e.target_client_id=e.target_client_id||this.adobeIdData.client_id,e.target_scope=e.target_scope||this.adobeIdData.scope,this.imsApis.getTransitoryAuthorizationCode(e,t,this.adobeIdData.client_id)},e.prototype.jumpToken=function(e,t){return void 0===t&&(t={}),e.target_client_id=e.target_client_id||this.adobeIdData.client_id,e.target_scope=e.target_scope||this.adobeIdData.scope,this.imsApis.jumpToken(e,t,this.adobeIdData.client_id)},e.prototype.getVerifierByKey=function(e){return new j.CodeChallenge().getVerifierByKey(e)},e.prototype.socialHeadlessSignIn=function(e){return n(this,arguments,void 0,function(e,t){var r=this;return void 0===t&&(t={}),i(this,function(o){return[2,this.imsApis.socialHeadlessSignIn(e,t).then(function(e){return r.exchangeIjt(e.token)}).catch(function(t){return"ride_AdobeID_social"===t.error&&r.signIn({idp_flow:"social.native",provider_id:e.provider_id,idp_token:e.idp_token}),Promise.reject(t)})]})})},e.prototype.getAccountType=function(){var e=this.getAccessToken();if(!e)throw Error("please login before getting the account type");if(e.isGuestToken)return C.IAccountType.GUEST;var t=this.profileService.getProfileFromStorage();if(!t)throw Error("you need to first get the profile before getting the account type");return t.account_type},e.prototype.getSessionExpiration=function(){var e=this.getAccessToken();if(!e)throw Error("please obtain a token before getting the session expiration");return e.gse},e.prototype.jumpTokenToDevice=function(e,t){void 0===t&&(t={});var r=this.tokenService.getTokenFieldsFromStorage(),o=r?r.user_id:null;return this.imsApis.jumpTokenToDevice(e,t,this.adobeIdData.client_id,o)},e.prototype.onSignOutEventReceived=function(e){e.data.clientId===this.adobeIdData.client_id&&e.data.instanceId!==this.instanceId&&(this.tokenService.purge(),this.profileService.removeProfile(),"function"==typeof this.adobeIdData.onSignOutEventReceived&&this.adobeIdData.onSignOutEventReceived())},e}()},573229:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TokenProfileResponse=void 0,t.TokenProfileResponse=function(e,t){this.profile=null,this.tokenFields=e,this.profile=t}},939e3:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CsrfService=t.ONE_HOUR=void 0;var n=o(r(814969)),i=r(321798),a=r(692224);t.ONE_HOUR=1296e4;var s="csrf_verified",c=function(){function e(e,t){void 0===t&&(t=a.AdobeIMSKey),this.storageInstance=null,this.nonceStorageKey="",this.nonceStorageKey="".concat("nonce").concat(t).concat(e)}return Object.defineProperty(e.prototype,"storage",{get:function(){return this.storageInstance||(this.storageInstance=n.default.getAvailableStorage()),this.storageInstance},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){if(window[s]=!1,!this.isStorageAvailable())return"";var t=e.generateNonce(),r=this.getNonceFromStorage()||{};return r=this.clearOlderNonceKeys(r),this.addNonceToObject(r,t),this.saveNonceValuesToStorage(r),t.value},e.prototype.addNonceToObject=function(e,t){e[t.value]=t.expiry},e.prototype.clearOlderNonceKeys=function(e,r){void 0===r&&(r=t.ONE_HOUR);var o=Date.now()-r;return Object.keys(e).forEach(function(t){parseInt(e[t])<o&&delete e[t]}),e},e.prototype.verify=function(e){if(!0===window[s]||(window[s]=!0,!this.isStorageAvailable()))return!0;var t=this.getNonceFromStorage();if(!t)return!1;var r=this.clearOlderNonceKeys(t),o=null!==(r[e]||null);return o&&this.clearNonceValueFromStorage(r,e),o},e.prototype.clearNonceValueFromStorage=function(e,t){delete e[t],this.saveNonceValuesToStorage(e)},e.prototype.getNonceFromStorage=function(){var e=this.storage.getItem(this.nonceStorageKey);return e?JSON.parse(e):null},e.prototype.saveNonceValuesToStorage=function(e){this.storage.setItem(this.nonceStorageKey,JSON.stringify(e))},e.prototype.isStorageAvailable=function(){return!(this.storage instanceof i.MemoryStorage)},e.cryptoRndomString=function(){if(!window.crypto)return"";var e=new Uint32Array(3);return window.crypto.getRandomValues(e),e.join("").substr(0,16)},e.randomString=function(){var t=e.cryptoRndomString();if(t)return t;for(var r="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<16;n++)r+=o.charAt(Math.floor(Math.random()*o.length));return r},e.generateNonce=function(){return{value:e.randomString(),expiry:new Date().getTime().toString()}},e}();t.CsrfService=c},922086:function(e,t){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckTokenEndpoint=void 0,t.CheckTokenEndpoint=function(){function e(e,t,r){void 0===e&&(e=!1),void 0===t&&(t=""),void 0===r&&(r=""),this.proxied=e,this.url=t,this.fallbackUrl=r}return e.computeEndpoint=function(t,o,n,i){var a,s;if(t){var c=n?e.THIRD_PARTY_DOMAINS_STAGE:e.THIRD_PARTY_DOMAINS_PROD;try{for(var u=r(Object.keys(c)),l=u.next();!l.done;l=u.next()){var d=l.value;if(o===d||o.endsWith("."+d))return new e(!0,c[d],i)}}catch(e){a={error:e}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}}return new e(!1,i)},e.prototype.shouldFallbackToAdobe=function(e){return!!this.proxied&&"feature_disabled"===e.error&&"cdsc"===e.error_description},e.THIRD_PARTY_DOMAINS_PROD={"behance.net":"https://sso.behance.net"},e.THIRD_PARTY_DOMAINS_STAGE={"s2stagehance.com":"https://sso.s2stagehance.com"},e}()},540493:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var o=r(253204),n=r(922086);t.default=new(function(){function e(){this.baseUrlAdobe="",this.baseUrlServices="",this.checkTokenEndpoint=new n.CheckTokenEndpoint,this.jslibver="v2-v0.48.0-1-g1e322cb"}return e.prototype.loadEnvironment=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r="");var i=e===o.IEnvironment.STAGE;i?(this.baseUrlAdobe="https://ims-na1-stg1.adobelogin.com",this.baseUrlServices="https://adobeid-na1-stg1.services.adobe.com"):(this.baseUrlAdobe="https://ims-na1.adobelogin.com",this.baseUrlServices="https://adobeid-na1.services.adobe.com"),this.checkTokenEndpoint=n.CheckTokenEndpoint.computeEndpoint(t,r,i,this.baseUrlServices)},e}())},57011:function(e,t){var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.IAccountType=void 0,(o=r||(t.IAccountType=r={})).TYPE1="type1",o.TYPE3="type3",o.TYPE2E="type2e",o.GUEST="guest"},67293:function(e,t){var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.IGrantTypes=void 0,(o=r||(t.IGrantTypes=r={})).token="token",o.code="code"},554113:function(e,t){var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.IReauth=void 0,(o=r||(t.IReauth=r={})).force="force",o.check="check"},706610:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectHelper=void 0;var n=o(r(615110)),i=r(947078);t.RedirectHelper=function(){function e(){}return e.getInitialRedirectUri=function(e,t){var r=e.redirect_uri||t||window.location.href,o="function"==typeof r?r():r,n=o.indexOf("from_ims");return -1===n?o:("#"===o[n-1]&&n--,o.substr(0,n))},e.createDefaultRedirectUrl=function(e,t,r,o){var n=this.getInitialRedirectUri(r,e),i=this.createOldHash(n);return i.indexOf("?")>0?"".concat(i,"&client_id=").concat(t,"&api=").concat(o):"".concat(i,"?client_id=").concat(t,"&api=").concat(o)},e.createRedirectUrl=function(e,t,r,o,n){void 0===n&&(n="");var i=this.createDefaultRedirectUrl(e,t,r,o);(n=n||r.scope||"")&&(i="".concat(i,"&scope=").concat(n));var a=r.reauth||"";return a&&(i="".concat(i,"&reauth=").concat(a)),i},e.createOldHash=function(e){var t=e.indexOf("#");if(t<0)return"".concat(e,"#old_hash=&from_ims=true");var r=e.substring(0,t),o=e.substring(t+1);return"".concat(r,"#old_hash=").concat(o,"&from_ims=true")},e.mergeApiParamsWithExternalParams=function(e,t,r){return(0,i.merge)(n.default.getCustomApiParameters(e,r),t)},e}()},813565:function(e,t,r){var o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},n=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeChallenge=t.ONE_HOUR=void 0;var a=i(r(814969));t.ONE_HOUR=1296e4;var s=function(){function e(){this.storage=a.default.getAvailableStorage()}return e.prototype.b64Uri=function(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},e.prototype.createCodeChallenge=function(e,t){var r=this;void 0===t&&(t=43);for(var i=window.msCrypto||window.crypto,a=this.b64Uri(Array.prototype.map.call(i.getRandomValues(new Uint8Array(t)),function(e){return String.fromCharCode(e)}).join("")).substring(0,t),s=new Uint8Array(a.length),c=0;c<a.length;c++)s[c]=a.charCodeAt(c);var u=i.subtle.digest("SHA-256",s);return new Promise(function(t,i){window.CryptoOperation?(u.onerror=function(e){return i(e)},u.oncomplete=function(i){var s=new Uint8Array(i.target.result),c=r.b64Uri(String.fromCharCode.apply(String,n([],o(s),!1)));return t(r.saveVerifierAndReturn(e,{verifier:a,challenge:c}))}):u.then(function(i){var s=new Uint8Array(i),c=r.b64Uri(String.fromCharCode.apply(String,n([],o(s),!1)));return t(r.saveVerifierAndReturn(e,{verifier:a,challenge:c}))})})},e.prototype.saveVerifierAndReturn=function(e,t){var r=this.getVerifierValuesFromStorage(),o={verifier:t.verifier||"",expiry:new Date().getTime().toString()};return r[e]=o,this.storage.setItem("verifiers",JSON.stringify(r)),Promise.resolve(t)},e.prototype.getVerifierValuesFromStorage=function(){var e=this.storage.getItem("verifiers"),t=e?JSON.parse(e):{};return this.clearOlderVerifiers(t)},e.prototype.clearOlderVerifiers=function(e,r){void 0===r&&(r=t.ONE_HOUR);var o=Date.now()-r;return Object.keys(e).forEach(function(t){parseInt(e[t])<o&&delete e[t]}),e},e.prototype.getVerifierByKey=function(e){var t=this.getVerifierValuesFromStorage(),r=t?t[e]:{};return delete t[e],this.storage.setItem("verifiers",JSON.stringify(t)),r?r.verifier:""},e}();t.CodeChallenge=s},42680:function(e,t,r){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSignInService=void 0;var i=n(r(834515)),a=n(r(540493)),s=r(706610),c=r(947078);t.BaseSignInService=function(){var e=this;this.composeRedirectUrl=function(e){var t="authorize",r=e.apiParameters,n=e.externalParameters,i=void 0===n?{}:n,u=e.adobeIdRedirectUri,l=e.clientId,d=e.locale,f=e.state,p=void 0===f?{}:f,h=e.scope,v=void 0===h?i.scope||r.scope||"":h,g=s.RedirectHelper.mergeApiParamsWithExternalParams(r,i,t);p&&(g.state=(0,c.merge)(g.state||{},p));var y=s.RedirectHelper.createRedirectUrl(void 0===u?"":u,l,g,t,v),m=i.locale||d||"",_=e.response_type,k=void 0===_?g.response_type||"":_;return o(o({},g),{client_id:l,scope:v,locale:m,response_type:k,jslVersion:a.default.jslibver,redirect_uri:y})},this.createRedirectUrl=function(t){var r=e.composeRedirectUrl(t),o=i.default.uriEncodeData(r);return"".concat(a.default.baseUrlAdobe,"/ims/authorize/v1?").concat(o)}}},981619:function(e,t){var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},o=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var n=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/,i=["https://auth.services.adobe.com","https://auth-stg1.services.adobe.com","https://localhost.corp.adobe.com:9000"];t.default=new function(){var e=this;this.windowObjectReference=null,this.previousUrl="",this.openSignInWindow=function(t,r,o,n){e.onProcessLocation=n,e.allowOrigin=o.allowOrigin,e.timerId&&clearInterval(e.timerId),window.removeEventListener("message",e.receiveMessage),window.addEventListener("message",e.receiveMessage),e.broadcastChannel&&e.broadcastChannel.close(),e.broadcastChannel=new BroadcastChannel("imslib"),e.broadcastChannel.onmessage=e.receiveMessage;var i="popup=yes, width=".concat(o.width,", height=").concat(o.height,", top=").concat(o.top,", left=").concat(o.left);!e.windowObjectReference||e.windowObjectReference&&e.windowObjectReference.closed?e.windowObjectReference=window.open(t,o.title,i):e.previousUrl!==t?(e.windowObjectReference=window.open(t,o.title,i),e.windowObjectReference&&e.windowObjectReference.focus()):e.windowObjectReference.focus(),e.previousUrl=t},this.receiveMessage=function(t){if(!o(o([],r(i),!1),[e.allowOrigin],!1).includes(t.origin))return void console.warn("refused to receive message from origin not whitelisted",t.origin);try{if(!n.test(t.data))return void console.warn("refused to receive message containing unknown data format",t.data)}catch(e){console.error(e);return}e.broadcastChannel&&e.broadcastChannel.close(),e.onProcessLocation&&e.onProcessLocation(t.data)}}},580793:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PopupSettings=void 0,t.PopupSettings=function(e){void 0===e&&(e={}),this.title="Adobe ID",this.width=600,this.top=100,this.left=100;var t=e.title,r=e.width,o=e.height,n=e.top,i=e.left,a=e.allowedOrigin;this.title=void 0===t?"Adobe ID":t,this.width=void 0===r?600:r,this.height=void 0===o?700:o,this.top=void 0===n?100:n,this.left=void 0===i?100:i,this.allowOrigin=a}},186186:function(e,t,r){var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SignInModalService=void 0;var s=a(r(981619));t.SignInModalService=function(e){function t(t,r){var o=e.call(this)||this;return o.signIn=function(e){e.state=i(i({},e.state),{imslibmodal:!0});var t=e.state.nonce,r=o.createRedirectUrl(e);s.default.openSignInWindow(r,t,o.popupSettings,o.onPopupMessage)},o.onPopupMessage=t,o.popupSettings=r,o}return n(t,e),t}(r(42680).BaseSignInService)},498879:function(e,t,r){var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},a=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SignInService=void 0;var c=s(r(834515)),u=s(r(540493));t.SignInService=function(e){function t(){var t=e.apply(this,a([],i(arguments),!1))||this;return t.signIn=function(e){var r=t.createRedirectUrl(e);c.default.setHrefUrl(r)},t.authorizeToken=function(e,r){var o=t.composeRedirectUrl(r);e&&(o.user_assertion=e,o.user_assertion_type="urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),t.createAuthorizeForm(o).submit()},t}return n(t,e),t.prototype.createAuthorizeForm=function(e){var t="".concat(u.default.baseUrlAdobe,"/ims/authorize/v1"),r=document.createElement("form");r.style.display="none",r.setAttribute("method","post"),r.setAttribute("action",t);var o=null,n=null,i="";for(var a in e){if("object"==typeof(n=e[a])){if(0===Object.keys(n).length)continue;i=JSON.stringify(n)}else i=n;""!==i&&(o=this.createFormElement("input","text",a,i),r.appendChild(o))}return document.getElementsByTagName("body")[0].appendChild(r),r},t.prototype.createFormElement=function(e,t,r,o){var n=document.createElement(e);return n.setAttribute("type",t),n.setAttribute("name",r),n.setAttribute("value",o),n},t}(r(42680).BaseSignInService)},554009:function(e,t,r){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SignOutService=void 0;var i=r(706610),a=n(r(834515)),s=n(r(540493)),c=r(627864);function u(e,t){void 0===t&&(t=void 0);var r="logout",n=e.apiParameters,c=e.externalParameters,u=e.adobeIdRedirectUri,l=e.clientId,d=i.RedirectHelper.mergeApiParamsWithExternalParams(n,c,r),f=i.RedirectHelper.createDefaultRedirectUrl(void 0===u?"":u,l,d,r),p=o(o({},d),{client_id:l,redirect_uri:f,jslVersion:s.default.jslibver});t&&(p=Object.assign(p,{probing_results:t}));var h=a.default.uriEncodeData(p),v="".concat(s.default.baseUrlAdobe,"/ims/logout/v1?").concat(h);a.default.replaceUrl(v)}t.SignOutService=function(){this.signOut=function(e){var t=e.clientId;s.default.checkTokenEndpoint.proxied?new c.ThirdPartyProbingService().probe([s.default.checkTokenEndpoint.url],t).then(function(t){u(e,t)}).catch(function(){u(e)}):u(e)}}},627864:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThirdPartyProbingService=void 0;var n=o(r(834515)),i=o(r(55905));t.ThirdPartyProbingService=function(){this.probe=function(e,t,r){if(void 0===r&&(r=2e3),!e||0===e.length)return Promise.resolve([]);for(var o={"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:0,"X-IMS-CLIENTID":t},a="/ims/cdsc_probe?"+n.default.uriEncodeData({client_id:t}),s=[],c=[],u=function(t){var n=e[t]+a;c.push(i.default.post(n,{},o,!1,r).then(function(e){return 200==e.status&&s.push(t)}).catch(function(){}))},l=0;l<e.length;l++)u(l);return Promise.all(c).then(function(){return s})}}},973713:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(657303)),i=["keyup","mousemove"];t.default=new(function(){function e(){var e=this;this.lastUserInteraction=Date.now(),this.userActive=!1,this.userInteractionHandler=function(){e.lastUserInteraction=Date.now(),e.userActive=!0},this.initializeDomEvents=function(){i.forEach(function(t){return window.addEventListener(t,e.userInteractionHandler)})},this.clearDomEvents=function(){i.forEach(function(t){return window.removeEventListener(t,e.userInteractionHandler)})}}return e.prototype.startAutoRefreshFlow=function(e){var t,r=this;if(!e||!e.expire||!e.refreshTokenMethod)return void n.default.info("Won't schedule token auto-refresh",!e,!e.expire,!e.refreshTokenMethod);this.refreshParameters=e,this.refreshTimerId&&(n.default.info("Auto-refresh timer already set, clearing"),clearTimeout(this.refreshTimerId)),this.clearDomEvents(),this.initializeDomEvents();var o=this.fromNowToNMinutesBeforeDate(null==(t=this.refreshParameters)?void 0:t.expire,1);n.default.info("Auto-refresh timer will run after (seconds)",o/1e3),this.refreshTimerId=setTimeout(function(){var t,o;if(e.isGuest)null==(t=r.refreshParameters)||t.refreshTokenMethod({},!0),n.default.info("Auto-refresh performed, guest user");else if(r.userActive){var i=Math.floor((Date.now()-r.lastUserInteraction)/1e3);null==(o=r.refreshParameters)||o.refreshTokenMethod({userInactiveSince:i},!0),n.default.info("Auto-refresh performed, user was inactive for (seconds)",i)}else n.default.info("Auto-refresh skipped, user was never active")},o)},e.prototype.fromNowToNMinutesBeforeDate=function(e,t){var r=e.getTime()-Date.now()-6e4*t;return r<=0?6e4*t:r},e}())},615110:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var o=r(947078);t.default=new(function(){function e(){this.getCustomApiParameters=function(e,t){return e[t]||{}}}return e.prototype.mergeExternalParameters=function(e,t,r){return(0,o.merge)(this.getCustomApiParameters(t,r),e)},e.prototype.toJson=function(e){try{if("string"!=typeof e)return e;return JSON.parse(e)}catch(e){return null}},e}())},700426:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ArkoseException=void 0;var o=r(268131);t.ArkoseException=function(e){this.message=null,this.errorType=o.IErrorType.ARKOSE_ERROR,this.message=e}},257571:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ArkoseInitialization=void 0;var n=r(692224),i=o(r(657303));t.ArkoseInitialization=function(){function e(){this.arkoseSessionToken=null}return e.getArkoseInstance=function(){return this.arkoseInstance||(e.arkoseInstance=new e),e.arkoseInstance},e.prototype.getArkoseSessionToken=function(){return this.arkoseSessionToken},e.prototype.setArkoseSessionToken=function(e){this.arkoseSessionToken=e},e.prototype.callArkose=function(){var e=this;return new Promise(function(t,r){window[n.SETUP_ARKOSE]=e.setupArkose(t);var o=document.createElement("script");o.type="text/javascript",o.src=n.ARKOSE_JS_ENDPOINT,o.setAttribute("data-callback","setupArkose"),o.addEventListener("error",function(e){i.default.error("Arkose script failed to load",e),r(e)}),document.head.append(o)})},e.prototype.setupArkose=function(t){return function(r){r.setConfig({onCompleted:function(r){i.default.info("Arkose verification completed"),e.arkoseInstance.setArkoseSessionToken(r.token),t()},onReady:function(){r.run()}})}},e}()},692224:function(e,t){var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.ARKOSE_JS_ENDPOINT=t.ARKOSE_PUBLIC_KEY=t.SETUP_ARKOSE=t.ASK_FOR_IMSLIB_INSTANCE_DOM_EVENT_NAME=t.ON_IMSLIB_INSTANCE=t.TOKEN_STORAGE_KEY=t.PROFILE_STORAGE_KEY=t.HEADERS=t.STORAGE_MODE=t.DEFAULT_LANGUAGE=t.AdobeImsFactory=t.AdobeIMSKey=t.AdobeIdKey=void 0,t.AdobeIdKey="adobeid",t.AdobeIMSKey="adobeIMS",t.AdobeImsFactory="adobeImsFactory",t.DEFAULT_LANGUAGE="en_US",(o=r||(t.STORAGE_MODE=r={})).LocalStorage="local",o.SessionStorage="session",o.MemoryStorage="memory",t.HEADERS={AUTHORIZATION:"Authorization",X_IMS_CLIENT_ID:"X-IMS-ClientId",RETRY_AFTER:"Retry-after"},t.PROFILE_STORAGE_KEY="adobeid_ims_profile",t.TOKEN_STORAGE_KEY="adobeid_ims_access_token",t.ON_IMSLIB_INSTANCE="onImsLibInstance",t.ASK_FOR_IMSLIB_INSTANCE_DOM_EVENT_NAME="getImsLibInstance",t.SETUP_ARKOSE="setupArkose",t.ARKOSE_PUBLIC_KEY="BBCC314C-4937-4CCD-B0A3-FDF0F0F7603C",t.ARKOSE_JS_ENDPOINT="//adobe-api.arkoselabs.com/v2/".concat(t.ARKOSE_PUBLIC_KEY,"/api.js")},666717:function(e,t){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=new(function(){function e(){var e=this;this.DEBOUNCE_TIME=1e3,this.cache={},this.storeApiResponse=function(t,r,o){void 0===t&&(t=""),void 0===r&&(r=""),e.cacheApiResponse(t,r,o)}}return e.prototype.getCachedApiResponse=function(e,t){void 0===t&&(t="");var r="string"==typeof t?t:JSON.stringify(t),o=this.cache[e];if(!o)return null;var n=o[r];return n?n.data:null},e.prototype.cacheApiResponse=function(e,t,o){void 0===e&&(e=""),void 0===t&&(t="");var n=this.cache[e];n||(n={},this.cache[e]=n);var i=this.createClearCachedDataTimer(e,t);n[t]={timerId:i,data:r({},o)}},e.prototype.createClearCachedDataTimer=function(e,t){var r=this;return setTimeout(function(){var o=r.cache[e]||{},n=o[t];n&&n&&n.timerId&&(clearTimeout(n.timerId),delete o[t])},this.DEBOUNCE_TIME)},e}())},975575:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var o=r(874587),n=r(483217),i=r(949616);t.default=new(function(){function e(){this.adobeIdThinData=null}return e.prototype.verify=function(e,t){void 0===t&&(t="");var r=e.status,o=e.data;if(!r)return new i.HttpErrorResponse({error:"networkError",message:o||""});if(401==r)return new i.HttpErrorResponse({error:"unauthorized"});var n=this.parseTokenResponseForRideErrors(o,t);return n||(409==r?o:429==r?new i.HttpErrorResponse({error:"rate_limited",retryAfter:o.retryAfter?parseInt(o.retryAfter):10}):r.toString().match(/5\d{2}/g)?new i.HttpErrorResponse({error:"server_error"}):null)},e.prototype.parseTokenResponseForRideErrors=function(e,t){if(!e)return null;var r=e.error,o=e.jump;if(!r)return null;if(0!==r.indexOf("ride_"))return"token_expired"===r&&t.indexOf("check/v6/token")>=0?new n.RideException("ride_pba_idle_session","",!0):null;var i=this.addRedirectUriToJump(r,o);return new n.RideException(r,i)},e.prototype.addRedirectUriToJump=function(e,t){if(!t||"string"!=typeof t)return"";this.adobeIdThinData||(this.adobeIdThinData=new o.AdobeIdThinData);var r=this.adobeIdThinData.computeRideRedirectUri(e);if(!r||0===r.length)return t;try{var n=new URL(t);return n.searchParams.append("redirect_uri",r),n.toString()}catch(e){return t}},e.prototype.isUnauthorizedException=function(e){var t=e.status;return 401===(void 0===t?0:t)},e}())},949616:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpErrorResponse=void 0,t.HttpErrorResponse=function(e){var t=e.error,r=e.retryAfter,o=e.message;this.error=t,this.retryAfter=void 0===r?0:r,this.message=void 0===o?"":o}},574116:function(e,t,r){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)0>t.indexOf(o[n])&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ImsApis=void 0;var a=r(692224),s=i(r(834515)),c=i(r(615110)),u=i(r(540493)),l=i(r(709984));t.ImsApis=function(){function e(e){void 0===e&&(e={}),this.CONTENT_FORM_ENCODED="application/x-www-form-urlencoded;charset=utf-8",this.apiParameters=e}return e.prototype.validateToken=function(e){var t=e.token,r=e.client_id,n=e.type,i=s.default.uriEncodeData(o(o({},c.default.getCustomApiParameters(this.apiParameters,"validate_token")),{type:n||"access_token",client_id:r,token:t})),a="".concat(u.default.baseUrlAdobe,"/ims/validate_token/v1?jslVersion=").concat(u.default.jslibver),d=this.formEncoded();return l.default.post(a,i,d)},e.prototype.getProfile=function(e){var t=e.token,r=e.client_id,n=o({},c.default.getCustomApiParameters(this.apiParameters,"profile")),i=this.createAuthorizationHeader(t);this.addClientIdInHeader(r,i);var a=s.default.uriEncodeData(o({client_id:r},n)),d="".concat(u.default.baseUrlAdobe,"/ims/profile/v1?").concat(a,"&jslVersion=").concat(u.default.jslibver);return l.default.get(d,i)},e.prototype.getUserInfo=function(e){var t=e.token,r=e.client_id,n=o({},c.default.getCustomApiParameters(this.apiParameters,"userinfo")),i=this.createAuthorizationHeader(t);this.addClientIdInHeader(r,i);var a=s.default.uriEncodeData(o({client_id:r},n)),d="".concat(u.default.baseUrlAdobe,"/ims/userinfo/v1?").concat(a,"&jslVersion=").concat(u.default.jslibver);return l.default.get(d,i)},e.prototype.logoutToken=function(e){var t=e.client_id,r=e.token,n=o({},c.default.getCustomApiParameters(this.apiParameters,"logout_token")),i="".concat(u.default.baseUrlServices,"/ims/logout/v1?jslVersion=").concat(u.default.jslibver),a=this.addClientIdInHeader(t);return l.default.post(i,o({client_id:t,access_token:r},n),a)},e.prototype.checkStatus=function(){var e="".concat(u.default.baseUrlServices,"/ims/check/v1/status");return l.default.get(e)},e.prototype.checkToken=function(e,t,r){var i=e.client_id,a=e.scope,l=t.arkoseSessionToken,d=n(t,["arkoseSessionToken"]),f=o({},c.default.mergeExternalParameters(d,this.apiParameters,"check_token")),p=o(o({},f),{client_id:i,scope:a});return l&&(p.arkose_session_token=l),r&&(p.user_id=r),this.callCheckToken(s.default.uriEncodeData(p),"/check/v6/token?jslVersion=".concat(u.default.jslibver))},e.prototype.switchProfile=function(e,t,r){void 0===r&&(r="");var n=e.client_id,i=e.scope,a=o({},c.default.mergeExternalParameters(t,this.apiParameters,"check_token")),l=s.default.uriEncodeData(o(o({},a),{client_id:n,scope:void 0===i?"":i,user_id:r}));return this.callCheckToken(l,"/check/v6/token?jslVersion=".concat(u.default.jslibver))},e.prototype.listSocialProviders=function(e){var t=e.client_id,r=o({},c.default.getCustomApiParameters(this.apiParameters,"providers")),n=s.default.uriEncodeData(o({client_id:t},r)),i="".concat(u.default.baseUrlServices,"/ims/social/v2/providers?").concat(n,"&jslVersion=").concat(u.default.jslibver),a=this.addClientIdInHeader(t);return l.default.get(i,a)},e.prototype.exchangeIjt=function(e,t){var r=e.client_id,n=o({},c.default.getCustomApiParameters(this.apiParameters,"ijt")),i="".concat(u.default.baseUrlServices,"/ims/jump/implicit/").concat(t),a=s.default.uriEncodeData(o({client_id:r},n)),d="".concat(i,"?").concat(a,"&jslVersion=").concat(u.default.jslibver);d.length>2048&&(delete n.redirect_uri,a=s.default.uriEncodeData(n),d="".concat(i,"?").concat(a));var f=this.addClientIdInHeader(r);return l.default.get(d,f)},e.prototype.avatarUrl=function(e){return"".concat(u.default.baseUrlAdobe,"/ims/avatar/download/").concat(e)},e.prototype.getReleaseFlags=function(e){var t=e.token,r=e.client_id,n=o({},c.default.getCustomApiParameters(this.apiParameters,"fg_value")),i=this.createAuthorizationHeader(t);this.addClientIdInHeader(r,i);var a=s.default.uriEncodeData(o({client_id:r},n)),d="".concat(u.default.baseUrlAdobe,"/ims/fg/value/v1?").concat(a,"&jslVersion=").concat(u.default.jslibver);return l.default.get(d,i)},e.prototype.getTransitoryAuthorizationCode=function(e,t,r){void 0===t&&(t={});var n=o({},c.default.mergeExternalParameters(t,this.apiParameters,"check_token")),i=s.default.uriEncodeData(o(o({},n),e));return this.callCheckToken(i,"/check/v6/token?client_id=".concat(r,"&jslVersion=").concat(u.default.jslibver))},e.prototype.getTokenFromCode=function(e,t){void 0===t&&(t={});var r=o({},c.default.mergeExternalParameters(t,this.apiParameters,"token"));r.grant_type="authorization_code",delete e.other;var n="".concat(u.default.baseUrlServices,"/ims/token/v3?jslVersion=").concat(u.default.jslibver),i=s.default.uriEncodeData(o(o({},r),e)),a=this.formEncoded();return this.addClientIdInHeader(e.client_id,a),l.default.post(n,i,a)},e.prototype.jumpToken=function(e,t,r){void 0===t&&(t={});var n=o({},c.default.mergeExternalParameters(t,this.apiParameters,"jumptoken")),i="".concat(u.default.baseUrlServices,"/ims/jumptoken/v1?client_id=").concat(r,"&jslVersion=").concat(u.default.jslibver),a=s.default.uriEncodeData(o(o({},n),e)),d=this.formEncoded();return this.addClientIdInHeader(r,d),l.default.post(i,a,d)},e.prototype.jumpTokenToDevice=function(e,t,r,n){void 0===t&&(t={});var i=o({},c.default.mergeExternalParameters(t,this.apiParameters,"jumptoken_to_device"));!i.user_id&&n&&(i.user_id=n);var a="".concat(u.default.baseUrlServices,"/ims/jumptoken/v2?client_id=").concat(r,"&jslVersion=").concat(u.default.jslibver),d=s.default.uriEncodeData(o(o({},i),e)),f=this.formEncoded();return this.addClientIdInHeader(r,f),l.default.post(a,d,f)},e.prototype.socialHeadlessSignIn=function(e,t){void 0===t&&(t={});var r=o({},c.default.mergeExternalParameters(t,this.apiParameters,"jumptoken")),n="".concat(u.default.baseUrlServices,"/ims/social/v2/native?jslVersion=").concat(u.default.jslibver),i=s.default.uriEncodeData(o(o(o({},r),e),{response_type:"implicit_jump"}));return l.default.post(n,i,this.formEncoded())},e.prototype.createAuthorizationHeader=function(e){var t={};return e&&(t[a.HEADERS.AUTHORIZATION]="Bearer ".concat(e)),t},e.prototype.formEncoded=function(e){return void 0===e&&(e={}),e["content-type"]=this.CONTENT_FORM_ENCODED,e},e.prototype.addClientIdInHeader=function(e,t){return void 0===t&&(t={}),t.client_id=e,t},e.prototype.callCheckToken=function(e,t){var r=this.formEncoded();return l.default.post("".concat(u.default.checkTokenEndpoint.url,"/ims").concat(t),e,r).catch(function(o){if(!u.default.checkTokenEndpoint.shouldFallbackToAdobe(o))throw o;return l.default.post("".concat(u.default.checkTokenEndpoint.fallbackUrl,"/ims").concat(t),e,r)})},e}()},330108:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ApiResponse=void 0,t.ApiResponse=function(){function e(e,t){this.status=0,this.data="",this.status=e,this.data=this.toJson(t)}return e.prototype.toJson=function(e){try{if("string"!=typeof e)return e;return JSON.parse(e)}catch(t){return e}},e}()},709984:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(666717)),i=o(r(975575)),a=o(r(55905));t.default=new(function(){function e(){this.triggerOnError=null}return e.prototype.post=function(e,t,r){var o=this;void 0===r&&(r={});var i=n.default.getCachedApiResponse(e,t);if(i){var s=i.status,c=i.data;return 200===s?Promise.resolve(c):Promise.reject(c)}return a.default.post(e,t,r).then(function(r){return o.storeApiResponse(e,JSON.stringify(t),r)}).catch(function(r){return o.verifyError(e,JSON.stringify(t),r)})},e.prototype.get=function(e,t){var r=this;void 0===t&&(t={});var o=n.default.getCachedApiResponse(e);if(o){var i=o.status,s=o.data;return 200===i?Promise.resolve(s):Promise.reject(s)}return a.default.get(e,t).then(function(t){return r.storeApiResponse(e,"",t)}).catch(function(t){return r.verifyError(e,"",t)})},e.prototype.verifyError=function(e,t,r){return this.storeApiResponse(e,t,r),Promise.reject(i.default.verify(r,e)||r.data)},e.prototype.storeApiResponse=function(e,t,r){return void 0===t&&(t=""),n.default.storeApiResponse(e,t,r),Promise.resolve(r.data)},e}())},55905:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var o=r(330108);t.default=new(function(){function e(){}return e.prototype.http=function(e){return new Promise(function(t,r){var n,i=new window.XMLHttpRequest;"boolean"==typeof e.withCredentials?i.withCredentials=e.withCredentials:i.withCredentials=!0,"number"==typeof e.timeout&&(i.timeout=e.timeout),i.open(e.method,e.url,!0),i.onload=function(){return this.status>=200&&this.status<300?t(new o.ApiResponse(this.status,this.response)):r(new o.ApiResponse(this.status,this.response))},i.onerror=function(){return r(new o.ApiResponse(this.status,this.response))},i.ontimeout=function(){return r(new o.ApiResponse(0,"timeout"))},i.onabort=function(){return r(new o.ApiResponse(0,"aborted"))},(n=e.headers)&&Object.keys(n).forEach(function(e){i.setRequestHeader(e,n[e])}),i.send(e.data)})},e.prototype.post=function(e,t,r,o,n){return void 0===r&&(r={}),this.http({headers:r,method:"POST",url:e,data:t,withCredentials:o,timeout:n})},e.prototype.get=function(e,t,r,o){return void 0===t&&(t={}),this.http({headers:t,method:"GET",url:e,withCredentials:r,timeout:o})},e}())},801320:function(e,t,r){r.d(t,{x:()=>o.AdobeIMS});var o=r(552850)},657303:function(e,t){var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},o=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=new(function(){function e(){var e=this;this.logEnabled=!1,this.print=function(t,n){e.logEnabled&&t.apply(void 0,o([],r(n),!1))},this.assert=function(t,r){e.print(console.assert,[t,r])},this.assertCondition=function(t,r){t()||e.print(console.error,[r])},this.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.print(console.error,t)},this.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.print(console.warn,t)},this.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.print(console.info,t)}}return e.prototype.enableLogging=function(){this.logEnabled=!0},e.prototype.disableLogging=function(){this.logEnabled=!1},e}())},372438:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileException=void 0;var o=r(268131);t.ProfileException=function(e){this.message=null,this.errorType=o.IErrorType.PROFILE_EXCEPTION,this.message=e}},718036:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileService=void 0;var n=o(r(814969)),i=r(692224),a=r(372438),s=r(949616),c=r(600149);t.ProfileService=function(){function e(e){this.profileServiceRequest=e,this.storage=n.default.getStorageByName(i.STORAGE_MODE.SessionStorage)}return e.prototype.getProfile=function(e){var t=this,r=this.profileServiceRequest,o=r.clientId,n=r.imsApis,i=this.getProfileFromStorage();return i?Promise.resolve(i):n.getProfile({client_id:o,token:e}).then(function(e){if(!e)throw new a.ProfileException("NO profile response");if(0===Object.keys(e).length)throw new a.ProfileException("NO profile value");return t.saveProfileToStorage(e),Promise.resolve(e)}).catch(function(e){return e instanceof s.HttpErrorResponse||t.removeProfile(),Promise.reject(e)})},e.prototype.getProfileStorageKey=function(){var e=this.profileServiceRequest,t=e.clientId,r=e.scope;return"".concat(i.PROFILE_STORAGE_KEY,"/").concat(t,"/").concat(!1,"/").concat((0,c.sortScopes)(r))},e.prototype.getProfileFromStorage=function(){var e=this.getProfileStorageKey(),t=this.storage.getItem(e);return t&&JSON.parse(t)},e.prototype.saveProfileToStorage=function(e){var t=this.getProfileStorageKey();this.storage.setItem(t,JSON.stringify(e))},e.prototype.removeProfile=function(){var e=this.getProfileStorageKey();this.storage.removeItem(e)},e.prototype.removeProfileIfOtherUser=function(e){if(e){var t=this.getProfileFromStorage();t&&t.userId!==e&&this.removeProfile()}},e}()},321798:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=void 0,t.MemoryStorage=function(){function e(){this.data={},this.length=0}return e.prototype.clear=function(){this.data={},this.length=0},e.prototype.getItem=function(e){return this.data[e]||null},e.prototype.removeItem=function(e){return!!this.data[e]&&(delete this.data[e],--this.length,!0)},e.prototype.setItem=function(e,t){!this.data[e]&&++this.length,this.data[e]=t},e.prototype.key=function(e){return Object.keys(this.data)[e]||null},e}()},814969:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(321798),i=r(692224),a=o(r(657303)),s=r(760545);t.default=new(function(){function e(){this.memoryStorageInstance=null}return Object.defineProperty(e.prototype,"memoryStorage",{get:function(){return this.memoryStorageInstance||(this.memoryStorageInstance=new n.MemoryStorage),this.memoryStorageInstance},enumerable:!1,configurable:!0}),e.prototype.getStorageByName=function(e){var t=this.getStorageInstanceByName(e);return t&&e!==i.STORAGE_MODE.MemoryStorage&&this.verifyStorage(t)?new s.StorageWithFallback(t,this.memoryStorage):this.memoryStorage},e.prototype.getStorageInstanceByName=function(e){if(e===i.STORAGE_MODE.MemoryStorage)return this.memoryStorage;try{return e===i.STORAGE_MODE.LocalStorage?window.localStorage:window.sessionStorage}catch(e){return a.default.warn("Please change your cookies settings in order to allow local data to be set"),null}},e.prototype.getAvailableStorage=function(){var e=this.getStorageByName(i.STORAGE_MODE.LocalStorage);return e instanceof n.MemoryStorage?this.getStorageByName(i.STORAGE_MODE.SessionStorage):e},e.prototype.verifyStorage=function(e){var t="test";try{e.setItem(t,"true");var r=e.getItem(t);if("true"!==r)return!1;return e.removeItem(t),!0}catch(e){return!1}},e}())},760545:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StorageWithFallback=void 0,t.StorageWithFallback=function(){function e(e,t){this.storage=e,this.fallback=t}return e.prototype.clear=function(){this.storage.clear(),this.fallback.clear()},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return t||(t=this.fallback.getItem(e))&&this.storage.setItem(e,t),t},e.prototype.key=function(e){var t=this.storage.key(e);return t||(t=this.fallback.key(e))&&this.storage.setItem(t,this.fallback.getItem(t)),t},e.prototype.removeItem=function(e){this.storage.removeItem(e),this.fallback.removeItem(e)},e.prototype.setItem=function(e,t){this.storage.setItem(e,t),this.fallback.setItem(e,t)},Object.defineProperty(e.prototype,"primaryStorage",{get:function(){return this.storage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fallbackStorage",{get:function(){return this.fallback},enumerable:!1,configurable:!0}),e}()},977302:function(e,t){var r=this&&this.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)0>t.indexOf(o[n])&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationCode=void 0,t.AuthorizationCode=function(e){this.client_id="",this.scope="",this.code="",this.state=null,this.code_verifier="",this.other=null;var t=e.code,o=e.state,n=e.client_id,i=e.scope,a=e.verifier,s=r(e,["code","state","client_id","scope","verifier"]);this.state=o,this.client_id=n,this.code=t,this.scope=i,this.code_verifier=a,this.other=s}},157999:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FragmentException=void 0,t.FragmentException=function(e,t){this.message="",this.type="",this.type=e,this.message=t}},660992:function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.IAtpValues=void 0,(r||(t.IAtpValues=r={})).GUEST="guest"},997928:function(e,t){var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.IFragmentExceptionType=void 0,(o=r||(t.IFragmentExceptionType=r={})).FRAGMENT="fragment",o.CSRF="csrf",o.NOT_AUTHORIZE="not_authorize",o.API_NOT_ALLOWED="not_allowed",o.LOGOUT="logout"},904121:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ModalSignInEvent=void 0,t.ModalSignInEvent=function(e){this.wndRedirectPropName="",this.wndRedirectPropName=e}},483217:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RideException=void 0,t.RideException=function(e,t,r){void 0===r&&(r=!1),this.jump="",this.code=e,this.jump=t,this.isPbaExpiredIdleSessionWorkaround=r}},352334:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StandaloneToken=void 0,t.StandaloneToken=function(e){this.token="",this.sid="",this.expirems=0;var t=e.token,r=e.expirems;this.token=t,this.expirems=r}},917153:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TokenExpiredException=void 0,t.TokenExpiredException=function(e){this.exception=null,this.exception=e}},598042:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TokenFields=void 0;var n=o(r(615110)),i=o(r(657303)),a=r(600149),s=r(660992);t.TokenFields=function(){function e(e,t){var r=this;this.REAUTH_SCOPE="reauthenticated",this.valid=!1,this.isReauth=function(){return r.scope.indexOf(r.REAUTH_SCOPE)>=0},this.client_id="",this.scope="",this.expire=new Date,this.user_id="",this.tokenValue="",this.sid="",this.state=null,this.fromFragment=!1,this.impersonatorId="",this.isImpersonatedSession=!1;var o=e.valid,i=e.tokenValue,a=e.access_token,c=e.state,u=e.other,l=i||a,d=this.parseJwt(l);if(!d)throw Error("token cannot be decoded ".concat(l));this.state=n.default.toJson(c);var f=d.client_id,p=d.user_id,h=d.scope,v=d.sid,g=d.imp_id,y=d.imp_sid,m=d.pba,_=d.atp,k=d.gse;this.atp=_,this.client_id=f,this.expire=t,this.user_id=p,this.scope=h,this.valid=o,this.tokenValue=l,this.sid=v,this.other=u,this.impersonatorId=g||"",this.isImpersonatedSession=!!y,this.pbaSatisfiedPolicies=m&&m.split(",")||[],this.isGuestToken=this.atp===s.IAtpValues.GUEST,this.gse=k}return e.prototype.parseJwt=function(e){if(!e)return null;try{return JSON.parse(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")))}catch(t){return i.default.error("error on decoding token ",e,t),null}},e.prototype.validate=function(e,t){var r=this.valid,o=this.client_id,n=this.scope,s=this.expire;return s<new Date?(i.default.error("token invalid  --\x3e expires_at",s),!1):void 0==r||r?o!==e?(i.default.error("token invalid  --\x3e client id",o,e),!1):!!(0,a.validateScopeInclusion)(t,n)||(i.default.error("token invalid  --\x3e scope"," token scope =",n,"vs adobeIdScope =",t,"."),!1):(i.default.error("token invalid  --\x3e valid"),!1)},e}()},201140:function(e,t,r){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){var u=[s,c];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(r=1,o&&(n=2&u[0]?o.return:u[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,u[1])).done)return n;switch(o=0,n&&(u=[2&u[0],n.value]),u[0]){case 0:case 1:n=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,o=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3])){i.label=u[1];break}if(6===u[0]&&i.label<n[1]){i.label=n[1],n=u;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(u);break}n[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],o=0}finally{r=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},a=this&&this.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)0>t.indexOf(o[n])&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TokenService=void 0;var c=s(r(814969)),u=r(692224),l=r(598042),d=s(r(532460)),f=r(157999),p=r(997928),h=r(573229),v=r(483217),g=r(917153),y=s(r(657303)),m=r(949616),_=r(977302),k=r(904121),b=r(813565),S=r(600149),I=r(960353),T=r(257571),E=r(700426),w=["authorize","check_token"];t.TokenService=function(){function e(e,t){var r=this;this.getTokenAndProfile=function(e){void 0===e&&(e={});var t=r.getTokenFields();return t instanceof k.ModalSignInEvent||t instanceof f.FragmentException?Promise.reject(t):t instanceof _.AuthorizationCode?r.tokenServiceRequest.imsApis.getTokenFromCode(t,e).then(function(e){var r=e.access_token,o=e.state,n=e.expires_in,i=e.scope,s=a(e,["access_token","state","expires_in","scope"]),c=new l.TokenFields({scope:void 0===i?"":i,tokenValue:r,valid:!0,state:o,other:t.other},new Date(new Date().getTime()+parseFloat(n)));return Promise.resolve(new h.TokenProfileResponse(c,s))}):t instanceof l.TokenFields?t.fromFragment||!r.tokenServiceRequest.autoValidateToken?Promise.resolve(new h.TokenProfileResponse(t,null)):r.callValidateTokenApi(t.tokenValue,t.isGuestToken).then(function(){return new h.TokenProfileResponse(t,null)}).catch(function(){return r.callRefreshToken(e)}):r.callRefreshToken(e)};var o=e.useLocalStorage;this.csrfService=t,this.tokenServiceRequest=e,this.storage=c.default.getStorageByName(o?u.STORAGE_MODE.LocalStorage:u.STORAGE_MODE.SessionStorage)}return e.prototype.getTokenFields=function(){var e=this.tokenServiceRequest,t=e.clientId,r=e.scope,o=this.getTokenFromFragment();return o instanceof k.ModalSignInEvent||o instanceof f.FragmentException||o instanceof _.AuthorizationCode?o:o&&o.validate(t,r)?(o.fromFragment=!0,this.addTokenToStorage(o),o):this.getTokenFieldsFromStorage()},e.prototype.validateToken=function(){var e=this.getTokenFieldsFromStorage();return e?this.callValidateTokenApi(e.tokenValue,e.isGuestToken):Promise.reject(null)},e.prototype.getReleaseFlags=function(){var e=this.tokenServiceRequest,t=e.clientId,r=e.imsApis,o=this.getTokenFieldsFromStorage();return o?r.getReleaseFlags({token:o.tokenValue,client_id:t}):Promise.reject(null)},e.prototype.getDecodedReleaseFlags=function(){return this.getReleaseFlags().then(function(e){return(0,I.decodeToBitstring)(e.releaseFlags,!0)})},e.prototype.callValidateTokenApi=function(e,t){var r=this;void 0===t&&(t=!1);var n=this.tokenServiceRequest,i=n.clientId,a=n.scope,s=n.imsApis,c={client_id:i,token:e,type:t?"at":void 0};return s.validateToken(c).then(function(t){y.default.info("validateToken response",t);var n=new l.TokenFields(o(o({},t),{tokenValue:e}),new Date(parseFloat(t.expires_at)));if(n.validate(i,a))return r.addTokenToStorage(n),Promise.resolve(n);throw Error("could not validate tokenFields")}).catch(function(e){return y.default.error("validateToken response",e),e instanceof m.HttpErrorResponse||r.removeTokenFromLocalStorage(),Promise.reject(e)})},e.prototype.getGuestToken=function(){return n(this,arguments,void 0,function(e,t){var r,n,a,s,c,u;return void 0===e&&(e={}),i(this,function(i){switch(i.label){case 0:if(a=(n=!((r=this.getTokenFields())instanceof k.ModalSignInEvent)&&!(r instanceof _.AuthorizationCode)&&r instanceof l.TokenFields)&&(null==r?void 0:r.isGuestToken),!t.enableGuestAccounts)return[3,11];if(s=null,!t.enableGuestTokenForceRefresh)return[3,6];if(!(t.enableGuestBotDetection&&!n))return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,T.ArkoseInitialization.getArkoseInstance().callArkose()];case 2:return i.sent(),[3,4];case 3:throw c=i.sent(),new E.ArkoseException(c);case 4:s=T.ArkoseInitialization.getArkoseInstance().getArkoseSessionToken(),i.label=5;case 5:if(r instanceof f.FragmentException&&r.type===p.IFragmentExceptionType.LOGOUT||a)return[2,this.callRefreshToken(o(o({},e),{arkoseSessionToken:s}))];i.label=6;case 6:if(!(t.enableGuestBotDetection&&!n))return[3,11];i.label=7;case 7:return i.trys.push([7,9,,10]),[4,T.ArkoseInitialization.getArkoseInstance().callArkose()];case 8:return i.sent(),[3,10];case 9:throw u=i.sent(),new E.ArkoseException(u);case 10:return s=T.ArkoseInitialization.getArkoseInstance().getArkoseSessionToken(),[2,this.getTokenAndProfile(o(o({},e),{arkoseSessionToken:s}))];case 11:return[2,this.getTokenAndProfile(e)]}})})},e.prototype.getTokenFromFragment=function(e){var t=d.default.fragmentToObject(e);if(!t)return null;var r=t.access_token,n=t.scope,i=t.error,s=t.api,c=t.state,u=void 0===c?{}:c,h=t.expires_in,v=t.client_id,g=t.code,y=a(t,["access_token","scope","error","api","state","expires_in","client_id","code"]),m=u||{},S=m.imslibmodal,I=m.nonce;if(!0===S)return new k.ModalSignInEvent(I);if("logout"===s)return this.removeTokenFromLocalStorage(),new f.FragmentException(p.IFragmentExceptionType.LOGOUT,"logout callback");if(!t.from_ims||v!==this.tokenServiceRequest.clientId)return null;if(i)return new f.FragmentException(p.IFragmentExceptionType.FRAGMENT,i);if(!w.includes(s))return new f.FragmentException(p.IFragmentExceptionType.API_NOT_ALLOWED,"api should be authorize or check token and ".concat(s," is used"));if(!this.csrfService.verify(I))return new f.FragmentException(p.IFragmentExceptionType.CSRF,"CSRF exception");if(void 0===g?"":g){var T=new b.CodeChallenge().getVerifierByKey(I);if(!T)throw Error("no verifier value has been found");return new _.AuthorizationCode(o(o({},t),{verifier:T}))}return r?new l.TokenFields({client_id:v,scope:n,tokenValue:r,valid:!0,state:u,other:y},new Date(new Date().getTime()+parseFloat(h))):null},e.prototype.getItemFromStorage=function(e){return this.storage.getItem(e)},e.prototype.getTokenFieldsFromStorage=function(e){void 0===e&&(e=!1);var t=this.tokenServiceRequest,r=t.clientId,o=t.scope,n=this.getAccessTokenKey(e),i=this.getItemFromStorage(n);if(!i)return null;var a=JSON.parse(i),s=new Date(a.expire?Date.parse(a.expire):a.expiresAtMilliseconds),c=new l.TokenFields(a,s);return c.validate(r,o)?c:null},e.prototype.getAccessTokenKey=function(e){void 0===e&&(e=!1);var t=this.tokenServiceRequest,r=t.clientId,o=t.scope;return"".concat(u.TOKEN_STORAGE_KEY,"/").concat(r,"/").concat(e,"/").concat((0,S.sortScopes)(o))},e.prototype.addTokenToStorage=function(e){if(e){var t=e.isReauth(),r=this.getAccessTokenKey(t),n=o({},e);n.state={},n.other="{}";var i=JSON.stringify(n);this.storage.setItem(r,i)}},e.prototype.removeTokenFromLocalStorage=function(){var e=this.getAccessTokenKey();this.storage.removeItem(e)},e.prototype.removeReauthTokenFromLocalStorage=function(){var e=this.getAccessTokenKey(!0);this.storage.removeItem(e)},e.prototype.refreshToken=function(e){var t=this;void 0===e&&(e={});var r=this.tokenServiceRequest,n=r.clientId,i=r.imsApis,s=r.scope,c=this.getTokenFieldsFromStorage(),u=c?c.user_id:"";return i.checkToken({client_id:n,scope:s},e,u).then(function(e){if(!e)throw Error("refresh token --\x3e no response");var r=e.access_token,n=e.expires_in,i=e.token_type,s=e.error,c=e.error_description,u=e.sid,l=a(e,["access_token","expires_in","token_type","error","error_description","sid"]);if(s)throw Error("".concat(s," ").concat(void 0===c?"":c));var d=Object.keys(l).length?l:null,f={token:r,expire:new Date(Date.now()+parseFloat(n)),token_type:i,sid:u},p=t.updateToken(f)||{};return Promise.resolve({tokenInfo:o(o({},f),{impersonatorId:p.impersonatorId||"",isImpersonatedSession:p.isImpersonatedSession||!1,pbaSatisfiedPolicies:p.pbaSatisfiedPolicies||[],isGuestToken:p.isGuestToken,gse:p.gse}),profile:d})}).catch(function(e){return(void 0===e&&(e={}),e instanceof m.HttpErrorResponse||e instanceof v.RideException)?Promise.reject(e):(t.removeTokenFromLocalStorage(),Promise.reject(new g.TokenExpiredException(e)))})},e.prototype.switchProfile=function(e,t){var r=this;void 0===t&&(t={});var n=this.tokenServiceRequest,i=n.clientId,s=n.imsApis,c=n.scope;return s.switchProfile({client_id:i,scope:c},t,e).then(function(e){if(!e)throw Error("refresh token --\x3e no response");var t=e.access_token,n=e.expires_in,i=e.token_type,s=e.error,c=e.error_description,u=e.sid,l=a(e,["access_token","expires_in","token_type","error","error_description","sid"]);if(s)throw Error("".concat(s," ").concat(void 0===c?"":c));var d=Object.keys(l).length?l:null,f={token:t,expire:new Date(Date.now()+parseFloat(n)),token_type:i,sid:u},p=r.updateToken(f)||{};return Promise.resolve({tokenInfo:o(o({},f),{impersonatorId:p.impersonatorId||"",isImpersonatedSession:p.isImpersonatedSession||!1}),profile:d})}).catch(function(e){return void 0===e&&(e={}),Promise.reject(e)})},e.prototype.callRefreshToken=function(e){return void 0===e&&(e={}),this.refreshToken(e).then(function(e){var t=e.tokenInfo,r=t.token,o=t.expire,n=e.profile,i=new l.TokenFields({valid:!0,tokenValue:r},o);return Promise.resolve(new h.TokenProfileResponse(i,n))}).catch(function(e){return Promise.reject(e)})},e.prototype.updateToken=function(e){var t=e.token,r=e.expire,o=new l.TokenFields({tokenValue:t},r);return o?(o.tokenValue=t,this.addTokenToStorage(o),o):null},e.prototype.purge=function(){this.removeTokenFromLocalStorage(),this.removeReauthTokenFromLocalStorage()},e.prototype.setStandAloneToken=function(e){var t=e.token,r=e.sid,o=e.expirems,n=this.tokenServiceRequest,i=n.clientId,a=n.scope,s=new Date(new Date().getTime()+(void 0===o?-1:o));return!!new l.TokenFields({valid:!0,tokenValue:t},s).validate(i,a)&&(this.updateToken({expire:s,token:t,sid:r}),!0)},e.prototype.exchangeIjt=function(e){var t=this,r=this.tokenServiceRequest,o=r.clientId,n=r.scope;return r.imsApis.exchangeIjt({client_id:o,scope:n},e).then(function(e){var r=e.valid,o=e.access_token,n=e.expires_in,i=e.profile;if(!1===r)return Promise.reject(e);var a=new Date(Date.now()+1e3*parseFloat(n)),s=new l.TokenFields({valid:!0,tokenValue:o},a);return t.addTokenToStorage(s),Promise.resolve(new h.TokenProfileResponse(s,i))})},e}()},532460:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(615110));t.default=new(function(){function e(){}return e.prototype.fragmentToObject=function(e){var t=this.getHashFromURL(e);if(!t)return null;var r=this.processHashUrl(t),o=this.getOldHash(r),i=o?r.slice(r.indexOf("old_hash")):r,a=this.removeOldHash(i),s=this.getQueryParamsAsMap(a);o&&(s.old_hash=o);var c=s.state;return c&&(s.state=n.default.toJson(c)),s},e.prototype.getOldHash=function(e){if(!e)return"";var t=e.match("old_hash=(.*?)&from_ims=true");return t?t[1]:""},e.prototype.removeOldHash=function(e){return e?e.replace(/old_hash=(.*?)&from_ims=true/gi,"from_ims=true"):e},e.prototype.removeAccessToken=function(e){return(void 0===e&&(e=window.location.hash),!e&&e.length<1)?e:e.startsWith("#")?"#"+this.removeAccessToken(e.substring(1)):e.replace(/(^access_token=[^&]+&?)|(&access_token=[^&]+)/g,"")},e.prototype.getHashFromURL=function(e){void 0===e&&(e=window.location.href);var t=e.indexOf("#");return -1!==t?e.substring(t+1):""},e.prototype.getQueryParamsAsMap=function(e){if(!e)return{};var t={};return(e=e.replace(/^(#\/|\/|#|\?|&)/,"")).split("&").forEach(function(e){if(e.length){var r=e.split("=");t[r[0]]=decodeURIComponent(r[1])}}),t},e.prototype.processHashUrl=function(e){return e.replace("?error","#error").replace(/#/gi,"&").replace("from_ims=true?","from_ims=true&")},e}())},834515:function(e,t){var r=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){var u=[s,c];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(r=1,o&&(n=2&u[0]?o.return:u[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,u[1])).done)return n;switch(o=0,n&&(u=[2&u[0],n.value]),u[0]){case 0:case 1:n=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,o=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3])){i.label=u[1];break}if(6===u[0]&&i.label<n[1]){i.label=n[1],n=u;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(u);break}n[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],o=0}finally{r=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=new(function(){function e(){}return e.prototype.uriEncodeData=function(e){if("object"!=typeof e)return"";var t,r=[],o="";for(var n in e)void 0!==(t=e[n])&&(o=this.encodeValue(t),r.push(encodeURIComponent(n)+"="+o));return r.join("&")},e.prototype.encodeValue=function(e){return null===e?"null":"object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(e)},e.prototype.replaceUrl=function(e){e&&window.location.replace(e)},e.prototype.sleep=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,new Promise(function(t){return setTimeout(t,e)})]})})},e.prototype.replaceUrlAndWait=function(e,t){return r(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:if(!e)return[2,Promise.resolve()];return window.location.replace(e),[4,this.sleep(t)];case 1:return r.sent(),[2,Promise.resolve()]}})})},e.prototype.setHrefUrl=function(e){e&&(window.location.href=e)},e.prototype.setHash=function(e){void 0===e&&(e=""),window.location.hash=e},e}())},960353:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeToBitstring=void 0;var r="abcdefghijklmnopqrstuvwxyz234567".split("").reduce(function(e,t,r){return e[t]=r,e},{"=":0}),o=function(e,t,r){var o=t-r.length;return o>0&&(r=Array(o+1).join(e)+r),r},n=function(e){if(e.length%8!=0)throw Error("Data length is not a multiple of 8");e.forEach(function(e){if(!(e in r))throw Error("Unknown encoded character "+e)});var t=!1;e.forEach(function(e){if("="!==e&&t)throw Error("Found padding char in the middle of the string");"="===e&&(t=!0)})},i=function(e){for(var t=e.length-1,r=0;"="===e[t];)++r,--t;return r},a=function(e){var t="";if(e.length%8!=0)throw Error("Length must be a multiple of 8");for(var r=0,o=e.length;r<o;r+=8)t+=e.slice(r,r+8).split("").reverse().join("");return t};t.decodeToBitstring=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw Error("Data is not a string");var s=e.toLowerCase().split("");n(s);var c=i(s),u=[];s.forEach(function(e){u.push(o("0",5,r[e].toString(2)))});var l=u.join("");return c>0&&(l=l.slice(0,-5*c)),l.length%8!=0&&(l=l.slice(0,-1*(l.length%8))),t?a(l):l}},947078:function(e,t){function r(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=r,t.merge=function e(t,o){if(null==t)return o;if(t===o||!r(t))return t;var n=Object.assign({},t);return r(o)&&Object.keys(o).forEach(function(i){var a,s;r(o[i])?i in t?n[i]=e(t[i],o[i]):Object.assign(n,((a={})[i]=o[i],a)):Object.assign(n,((s={})[i]=o[i],s))}),n}},600149:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sortScopes=function(e){return e.split(r).sort().join(",")},t.validateScopeInclusion=function(e,t){var o=(null==t?void 0:t.split(r))||[];return((null==e?void 0:e.split(r))||[]).every(function(e){return o.includes(e)})};var r=/\s|,/g}}]);
//# sourceMappingURL=vendor-startup-ims.117b677395bccd50.js.map